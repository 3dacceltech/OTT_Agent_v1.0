var t="undefined"!=typeof self?self:{};function e(){throw Error("Invalid UTF8")}function n(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}let r,i;const o="undefined"!=typeof TextDecoder;let s;const a="undefined"!=typeof TextEncoder;function u(t){if(a)t=(s||=new TextEncoder).encode(t);else{let n=0;const r=new Uint8Array(3*t.length);for(let i=0;i<t.length;i++){var e=t.charCodeAt(i);if(e<128)r[n++]=e;else{if(e<2048)r[n++]=e>>6|192;else{if(e>=55296&&e<=57343){if(e<=56319&&i<t.length){const o=t.charCodeAt(++i);if(o>=56320&&o<=57343){e=1024*(e-55296)+o-56320+65536,r[n++]=e>>18|240,r[n++]=e>>12&63|128,r[n++]=e>>6&63|128,r[n++]=63&e|128;continue}i--}e=65533}r[n++]=e>>12|224,r[n++]=e>>6&63|128}r[n++]=63&e|128}}t=n===r.length?r:r.subarray(0,n)}return t}var c,l;t:{for(var h=["CLOSURE_FLAGS"],f=t,d=0;d<h.length;d++)if(null==(f=f[h[d]])){l=null;break t}l=f}var g,p=l&&l[610401301];c=null!=p&&p;const m=t.navigator;function y(t){return!!c&&(!!g&&g.brands.some((({brand:e})=>e&&-1!=e.indexOf(t))))}function b(e){var n;return(n=t.navigator)&&(n=n.userAgent)||(n=""),-1!=n.indexOf(e)}function v(){return!!c&&(!!g&&g.brands.length>0)}function w(){return v()?y("Chromium"):(b("Chrome")||b("CriOS"))&&!(!v()&&b("Edge"))||b("Silk")}g=m&&m.userAgentData||null;var _=!v()&&(b("Trident")||b("MSIE"));!b("Android")||w(),w(),b("Safari")&&(w()||!v()&&b("Coast")||!v()&&b("Opera")||!v()&&b("Edge")||(v()?y("Microsoft Edge"):b("Edg/"))||v()&&y("Opera"));var S={},A=null;function E(t){const e=t.length;let n=3*e/4;n%3?n=Math.floor(n):-1!="=.".indexOf(t[e-1])&&(n=-1!="=.".indexOf(t[e-2])?n-2:n-1);const r=new Uint8Array(n);let i=0;return function(t,e){function n(e){for(;r<t.length;){const e=t.charAt(r++),n=A[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return e}I();let r=0;for(;;){const t=n(-1),r=n(0),i=n(64),o=n(64);if(64===o&&-1===t)break;e(t<<2|r>>4),64!=i&&(e(r<<4&240|i>>2),64!=o&&e(i<<6&192|o))}}(t,(function(t){r[i++]=t})),i!==n?r.subarray(0,i):r}function I(){if(!A){A={};var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"];for(let n=0;n<5;n++){const r=t.concat(e[n].split(""));S[n]=r;for(let t=0;t<r.length;t++){const e=r[t];void 0===A[e]&&(A[e]=t)}}}}var T="undefined"!=typeof Uint8Array,x=!_&&"function"==typeof btoa;function P(t){if(!x){var e;void 0===e&&(e=0),I(),e=S[e];var n=Array(Math.floor(t.length/3)),r=e[64]||"";let u=0,c=0;for(;u<t.length-2;u+=3){var i=t[u],o=t[u+1],s=t[u+2],a=e[i>>2];i=e[(3&i)<<4|o>>4],o=e[(15&o)<<2|s>>6],s=e[63&s],n[c++]=a+i+o+s}switch(a=0,s=r,t.length-u){case 2:s=e[(15&(a=t[u+1]))<<2]||r;case 1:t=t[u],n[c]=e[t>>2]+e[(3&t)<<4|a>>4]+s+r}return n.join("")}for(e="",n=0,r=t.length-10240;n<r;)e+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));return e+=String.fromCharCode.apply(null,n?t.subarray(n):t),btoa(e)}const U=/[-_.]/g,B={"-":"+",_:"/",".":"="};function O(t){return B[t]||""}function L(t){if(!x)return E(t);U.test(t)&&(t=t.replace(U,O)),t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function N(t){return T&&null!=t&&t instanceof Uint8Array}var F={};function k(){return C||=new j(null,F)}function V(t){G(F);var e=t.g;return null==(e=null==e||N(e)?e:"string"==typeof e?L(e):null)?e:t.g=e}var j=class{i(){return new Uint8Array(V(this)||0)}constructor(t,e){if(G(e),this.g=t,null!=t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}};let C,M;function G(t){if(t!==F)throw Error("illegal external caller")}function D(t,e){t.__closure__error__context__984382||(t.__closure__error__context__984382={}),t.__closure__error__context__984382.severity=e}function $(){const e=Error();D(e,"incident"),function(e){t.setTimeout((()=>{throw e}),0)}(e)}function z(){const t=Error("int32");return D(t,"warning"),t}function R(){return"function"==typeof BigInt}function W(t){return Array.prototype.slice.call(t)}var H="function"==typeof Symbol&&"symbol"==typeof Symbol();function q(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol():t}var J=q(),K=q("2ex"),X=q("1oa"),Y=H?(t,e)=>{t[J]|=e}:(t,e)=>{void 0!==t.s?t.s|=e:Object.defineProperties(t,{s:{value:e,configurable:!0,writable:!0,enumerable:!1}})},Q=H?(t,e)=>{t[J]&=~e}:(t,e)=>{void 0!==t.s&&(t.s&=~e)},Z=H?t=>0|t[J]:t=>0|t.s,tt=H?t=>t[J]:t=>t.s,et=H?(t,e)=>{t[J]=e}:(t,e)=>{void 0!==t.s?t.s=e:Object.defineProperties(t,{s:{value:e,configurable:!0,writable:!0,enumerable:!1}})};function nt(t,e){et(e,-30975&(0|t))}function rt(t,e){et(e,-30941&(34|t))}var it,ot={},st={};function at(t){return!(!t||"object"!=typeof t||t.g!==st)}function ut(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)&&t.constructor===Object}function ct(t,e){if(null!=t)if("string"==typeof t)t=t?new j(t,F):k();else if(t.constructor!==j)if(N(t))t=t.length?new j(new Uint8Array(t),F):k();else{if(!e)throw Error();t=void 0}return t}function lt(t){return!(!Array.isArray(t)||t.length)&&!!(1&Z(t))}const ht=[];function ft(t){if(2&t)throw Error()}let dt;function gt(t,e){(e=dt?e[dt]:void 0)&&(t[dt]=W(e))}et(ht,55),it=Object.freeze(ht);var pt=Object.freeze({}),mt="function"==typeof t.BigInt&&"bigint"==typeof t.BigInt(0),yt=t=>mt?t>=vt&&t<=_t:"-"===t[0]?St(t,bt):St(t,wt);const bt=Number.MIN_SAFE_INTEGER.toString(),vt=mt?BigInt(Number.MIN_SAFE_INTEGER):void 0,wt=Number.MAX_SAFE_INTEGER.toString(),_t=mt?BigInt(Number.MAX_SAFE_INTEGER):void 0;function St(t,e){if(t.length>e.length)return!1;if(t.length<e.length||t===e)return!0;for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(r>i)return!1;if(r<i)return!0}}const At="function"==typeof Uint8Array.prototype.slice;let Et,It=0,Tt=0;function xt(t){const e=t>>>0;It=e,Tt=(t-e)/4294967296>>>0}function Pt(t){if(t<0){xt(-t);const[e,n]=kt(It,Tt);It=e>>>0,Tt=n>>>0}else xt(t)}function Ut(t){const e=Et||=new DataView(new ArrayBuffer(8));e.setFloat32(0,+t,!0),Tt=0,It=e.getUint32(0,!0)}function Bt(t,e){const n=4294967296*e+(t>>>0);return Number.isSafeInteger(n)?n:Lt(t,e)}function Ot(t,e){const n=2147483648&e;return n&&(e=~e>>>0,0==(t=1+~t>>>0)&&(e=e+1>>>0)),"number"==typeof(t=Bt(t,e))?n?-t:t:n?"-"+t:t}function Lt(t,e){if(t>>>=0,(e>>>=0)<=2097151)var n=""+(4294967296*e+t);else R()?n=""+(BigInt(e)<<BigInt(32)|BigInt(t)):(t=(16777215&t)+6777216*(n=16777215&(t>>>24|e<<8))+6710656*(e=e>>16&65535),n+=8147497*e,e*=2,t>=1e7&&(n+=t/1e7>>>0,t%=1e7),n>=1e7&&(e+=n/1e7>>>0,n%=1e7),n=e+Nt(n)+Nt(t));return n}function Nt(t){return t=String(t),"0000000".slice(t.length)+t}function Ft(t){if(t.length<16)Pt(Number(t));else if(R())t=BigInt(t),It=Number(t&BigInt(4294967295))>>>0,Tt=Number(t>>BigInt(32)&BigInt(4294967295));else{const e=+("-"===t[0]);Tt=It=0;const n=t.length;for(let r=e,i=(n-e)%6+e;i<=n;r=i,i+=6){const e=Number(t.slice(r,i));Tt*=1e6,It=1e6*It+e,It>=4294967296&&(Tt+=Math.trunc(It/4294967296),Tt>>>=0,It>>>=0)}if(e){const[t,e]=kt(It,Tt);It=t,Tt=e}}}function kt(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}function Vt(t){return null==t||"number"==typeof t?t:"NaN"===t||"Infinity"===t||"-Infinity"===t?Number(t):void 0}function jt(t){if(null!=t&&"boolean"!=typeof t){var e=typeof t;throw Error(`Expected boolean but got ${"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}: ${t}`)}return t}const Ct=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function Mt(t){const e=typeof t;switch(e){case"bigint":return!0;case"number":return Number.isFinite(t)}return"string"===e&&Ct.test(t)}function Gt(t){if(null==t)return t;if("string"==typeof t){if(!t)return;t=+t}return"number"==typeof t&&Number.isFinite(t)?0|t:void 0}function Dt(t){return"-"!==t[0]&&(t.length<20||20===t.length&&Number(t.substring(0,6))<184467)}function $t(t){return t=Math.trunc(t),Number.isSafeInteger(t)||(Pt(t),t=Ot(It,Tt)),t}function zt(t){var e=Math.trunc(Number(t));if(Number.isSafeInteger(e))return String(e);if(-1!==(e=t.indexOf("."))&&(t=t.substring(0,e)),!("-"===t[0]?t.length<20||20===t.length&&Number(t.substring(0,7))>-922337:t.length<19||19===t.length&&Number(t.substring(0,6))<922337))if(Ft(t),t=It,2147483648&(e=Tt))if(R())t=""+(BigInt(0|e)<<BigInt(32)|BigInt(t>>>0));else{const[n,r]=kt(t,e);t="-"+Lt(n,r)}else t=Lt(t,e);return t}function Rt(t){return null==t?t:"bigint"==typeof t?(yt(t)?t=Number(t):(t=BigInt.asIntN(64,t),t=yt(t)?Number(t):String(t)),t):Mt(t)?"number"==typeof t?$t(t):zt(t):void 0}function Wt(t){if(null==t)return t;var e=typeof t;if("bigint"===e)return String(BigInt.asUintN(64,t));if(Mt(t)){if("string"===e)return e=Math.trunc(Number(t)),Number.isSafeInteger(e)&&e>=0?t=String(e):(-1!==(e=t.indexOf("."))&&(t=t.substring(0,e)),Dt(t)||(Ft(t),t=Lt(It,Tt))),t;if("number"===e)return(t=Math.trunc(t))>=0&&Number.isSafeInteger(t)?t:function(t){if(t<0){Pt(t);var e=Lt(It,Tt);return t=Number(e),Number.isSafeInteger(t)?t:e}return Dt(e=String(t))?e:(Pt(t),Bt(It,Tt))}(t)}}function Ht(t){if("string"!=typeof t)throw Error();return t}function qt(t){if(null!=t&&"string"!=typeof t)throw Error();return t}function Jt(t){return null==t||"string"==typeof t?t:void 0}function Kt(t,e,n){if(null!=t&&"object"==typeof t&&t.C===ot)return t;if(Array.isArray(t)){var r=Z(t),i=r;return 0===i&&(i|=32&n),(i|=2&n)!==r&&et(t,i),new e(t)}}function Xt(t){var e;return void 0===Zt&&(Zt="function"==typeof Proxy?oe(Proxy):null),(e=!Zt)||(void 0===te&&(te="function"==typeof WeakMap?oe(WeakMap):null),e=!te),e?t:(e=Yt?.get(t))?e:Math.random()>.01?t:(function(t){if(void 0===ee){const t=new Zt([],{});ee=1===Array.prototype.concat.call([],t).length}ee&&"function"==typeof Symbol&&Symbol.isConcatSpreadable&&(t[Symbol.isConcatSpreadable]=!0)}(t),function(t,e){(Yt||=new te).set(t,e),(Qt||=new te).set(e,t)}(t,e=new Zt(t,{set:(t,e,n)=>($(),t[e]=n,!0)})),e)}let Yt,Qt,Zt,te,ee,ne,re,ie;function oe(t){try{return-1!==t.toString().indexOf("[native code]")?t:null}catch{return null}}function se(t,e,n){return t=ae(t,e[0],e[1],n?1:2),e!==re&&n&&Y(t,16384),t}function ae(t,e,n,r){if(r=r??0,null==t&&(t=ne),ne=void 0,null==t){var i=96;n?(t=[n],i|=512):t=[],e&&(i=-33521665&i|(1023&e)<<15)}else{if(!Array.isArray(t))throw Error("narr");if(2048&(i=Z(t)))throw Error("farr");if(64&i)return t;if(1===r||2===r||(i|=64),n&&(i|=512,n!==t[0]))throw Error("mid");t:{if(r=(n=t).length){const t=r-1;if(ut(n[t])){if((e=t-(+!!(512&(i|=256))-1))>=1024)throw Error("pvtlmt");i=-33521665&i|(1023&e)<<15;break t}}if(e){if((e=Math.max(e,r-(+!!(512&i)-1)))>1024)throw Error("spvt");i=-33521665&i|(1023&e)<<15}}}return et(t,i),t}function ue(t,e,n,r,i){if(null!=t){if(Array.isArray(t))t=lt(t)?void 0:i&&2&Z(t)?t:ce(t,e,n,void 0!==r,i);else if(ut(t)){const o={};for(let s in t)o[s]=ue(t[s],e,n,r,i);t=o}else t=e(t,r);return t}}function ce(t,e,n,r,i){const o=r||n?Z(t):0;r=r?!!(32&o):void 0;const s=W(t);for(let t=0;t<s.length;t++)s[t]=ue(s[t],e,n,r,i);return n&&(gt(s,t),n(o,s)),s}function le(t){return t.C===ot?t.toJSON():function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"bigint":return yt(t)?Number(t):String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(lt(t))return}else{if(N(t))return P(t);if(t instanceof j){const e=t.g;return null==e?"":"string"==typeof e?e:t.g=P(e)}}}return t}(t)}function he(t,e,n=rt){if(null!=t){if(T&&t instanceof Uint8Array)return e?t:new Uint8Array(t);if(Array.isArray(t)){var r=Z(t);return 2&r?t:(e&&=0===r||!!(32&r)&&!(64&r||!(16&r)),e?(et(t,-12293&(34|r)),t):ce(t,he,4&r?rt:n,!0,!0))}return t.C===ot&&(n=t.l,t=2&(r=tt(n))?t:de(t,n,r,!0)),t}}function fe(t){const e=t.l;return de(t,e,tt(e),!1)}function de(t,e,n,r){return t=t.constructor,ne=e=ge(e,n,r),e=new t(e),ne=void 0,e}function ge(t,e,n){const r=n||2&e?rt:nt,i=!!(32&e);return t=function(t,e,n){const r=W(t);var i=r.length;const o=256&e?r[i-1]:void 0;for(i+=o?-1:0,e=512&e?1:0;e<i;e++)r[e]=n(r[e]);if(o){e=r[e]={};for(const t in o)e[t]=n(o[t])}return gt(r,t),r}(t,e,(t=>he(t,i,r))),Y(t,32|(n?2:0)),t}function pe(t){const e=t.l,n=tt(e);return 2&n?de(t,e,n,!1):t}function me(t,e){return be(t=t.l,tt(t),e)}function ye(t,e,n,r){if(!((e=r+(+!!(512&e)-1))<0||e>=t.length||e>=n))return t[e]}function be(t,e,n,r){if(-1===n)return null;const i=e>>15&1023||536870912;if(!(n>=i)){var o=t.length;return r&&256&e&&null!=(r=t[o-1][n])?(ye(t,e,i,n)&&null!=K&&((e=(t=M??={})[K]||0)>=4||(t[K]=e+1,$())),r):ye(t,e,i,n)}return 256&e?t[t.length-1][n]:void 0}function ve(t,e,n){const r=t.l;let i=tt(r);return ft(i),we(r,i,e,n),t}function we(t,e,n,r){const i=e>>15&1023||536870912;if(n>=i){let o,s=e;if(256&e)o=t[t.length-1];else{if(null==r)return s;o=t[i+(+!!(512&e)-1)]={},s|=256}return o[n]=r,n<i&&(t[n+(+!!(512&e)-1)]=void 0),s!==e&&et(t,s),s}return t[n+(+!!(512&e)-1)]=r,256&e&&(n in(t=t[t.length-1])&&delete t[n]),e}function _e(t){t=t.l;let e=tt(t);const n=be(t,e,1),r=ct(n,!0);return null!=r&&r!==n&&we(t,e,1,r),r}function Se(t,e,n,r,i){const o=t.l,s=2&(t=tt(o))?1:r;i=!!i,r=Ae(o,t,e);var a=Z(r);if(!(4&a)){4&a&&(r=W(r),a=Ge(a,t),t=we(o,t,e,r));let i=0,s=0;for(;i<r.length;i++){const t=n(r[i]);null!=t&&(r[s++]=t)}s<i&&(r.length=s),a=-4097&(20|(a=Ee(a,t))),et(r,a&=-8193),2&a&&Object.freeze(r)}let u;return 1===s||4===s&&32&a?Ie(a)||(i=a,(a|=2)!==i&&et(r,a),Object.freeze(r)):(n=5===s&&(!!(32&a)||Ie(a)||!!Yt?.get(r)),(2===s||n)&&Ie(a)&&(r=W(r),a=De(a=Ge(a,t),t,i),et(r,a),t=we(o,t,e,r)),Ie(a)||(e=a,(a=De(a,t,i))!==e&&et(r,a)),n?u=Xt(r):2!==s||i||Yt?.delete(r)),u||r}function Ae(t,e,n,r){return t=be(t,e,n,r),Array.isArray(t)?t:it}function Ee(t,e){return 0===t&&(t=Ge(t,e)),1|t}function Ie(t){return!!(2&t)&&!!(4&t)||!!(2048&t)}function Te(t,e,n){t=t.l;let r=tt(t);if(ft(r),null==n)we(t,r,e);else{n=Qt?.get(n)||n;var i=Z(n),o=i,s=Ie(i),a=s||Object.isFrozen(n);for(s||(i=0),a||(n=W(n),o=0,i=De(i=Ge(i,r),r,!0),a=!1),i|=21,s=0;s<n.length;s++){const t=n[s],e=Ht(t);Object.is(t,e)||(a&&(n=W(n),o=0,i=De(i=Ge(i,r),r,!0),a=!1),n[s]=e)}i!==o&&(a&&(n=W(n),i=De(i=Ge(i,r),r,!0)),et(n,i)),we(t,r,e,n)}}function xe(t,e){t=t.l;let n=tt(t);ft(n),we(t,n,2,""===e?void 0:e)}function Pe(t,e,n,r,i){ft(e);var o=!(!(64&e)&&16384&e);const s=(i=Ae(t,e,n,i))!==it;if(o||!s){let a=o=s?Z(i):0;(!s||2&a||Ie(a)||4&a&&!(32&a))&&(i=W(i),a=Ge(a,e),e=we(t,e,n,i)),a=-13&Ee(a,e),a=De(r?-17&a:16|a,e,!0),a!==o&&et(i,a)}return i}function Ue(t,e){var n=mi;return Le(Be(t=t.l),t,tt(t),n)===e?e:-1}function Be(t){if(H)return t[X]??(t[X]=new Map);if(X in t)return t[X];const e=new Map;return Object.defineProperty(t,X,{value:e}),e}function Oe(t,e,n,r){const i=Be(t),o=Le(i,t,e,n);return o!==r&&(o&&(e=we(t,e,o)),i.set(n,r)),e}function Le(t,e,n,r){let i=t.get(r);if(null!=i)return i;i=0;for(let t=0;t<r.length;t++){const o=r[t];null!=be(e,n,o)&&(0!==i&&(n=we(e,n,i)),i=o)}return t.set(r,i),i}function Ne(t,e,n,r){let i,o=tt(t);if(null!=(r=be(t,o,n,r))&&r.C===ot)return(e=pe(r))!==r&&we(t,o,n,e),e.l;if(Array.isArray(r)){const t=Z(r);i=2&t?se(ge(r,t,!1),e,!0):64&t?r:se(i,e,!0)}else i=se(void 0,e,!0);return i!==r&&we(t,o,n,i),i}function Fe(t,e,n,r){t=t.l;let i=tt(t);return(e=Kt(r=be(t,i,n,r),e,i))!==r&&null!=e&&we(t,i,n,e),e}function ke(t,e,n){if(null==(e=Fe(t,e,n,!1)))return e;t=t.l;let r=tt(t);if(!(2&r)){const i=pe(e);i!==e&&we(t,r,n,e=i)}return e}function Ve(t,e,n,r,i,o){t=t.l;var s=!!(2&e);r=s?1:r,i=!!i,o&&=!s,s=Ae(t,e,1);var a=Z(s),u=!!(4&a);if(!u){var c=s,l=e;const t=!!(2&(a=Ee(a,e)));t&&(l|=2);let r=!t,i=!0,o=0,u=0;for(;o<c.length;o++){const e=Kt(c[o],n,l);if(e instanceof n){if(!t){const t=!!(2&Z(e.l));r&&=!t,i&&=t}c[u++]=e}}u<o&&(c.length=u),a|=4,a=i?16|a:-17&a,et(c,a=r?8|a:-9&a),t&&Object.freeze(c)}if(o&&!(8&a||!s.length&&(1===r||4===r&&32&a))){for(Ie(a)&&(s=W(s),a=Ge(a,e),e=we(t,e,1,s)),n=s,o=a,c=0;c<n.length;c++)(a=n[c])!==(l=pe(a))&&(n[c]=l);o|=8,o=n.length?-17&o:16|o,et(n,o),a=o}let h;return 1===r||4===r&&32&a?Ie(a)||(e=a,(a|=!s.length||16&a&&(!u||32&a)?2:2048)!==e&&et(s,a),Object.freeze(s)):(u=5===r&&(!!(32&a)||Ie(a)||!!Yt?.get(s)),(2===r||u)&&Ie(a)&&(s=W(s),a=De(a=Ge(a,e),e,i),et(s,a),e=we(t,e,1,s)),Ie(a)||(t=a,(a=De(a,e,i))!==t&&et(s,a)),u?h=Xt(s):2!==r||i||Yt?.delete(s)),h||s}function je(t,e){const n=tt(t.l);return Ve(t,n,e,void 0===pt?2:4,!1,!(2&n))}function Ce(t,e,n,r){return null==r&&(r=void 0),ve(t,n,r)}function Me(t,e,n){var r=Si;null==n&&(n=void 0);t:{t=t.l;let i=tt(t);if(ft(i),null==n){const n=Be(t);if(Le(n,t,i,r)!==e)break t;n.set(r,0)}else i=Oe(t,i,r,e);we(t,i,e,n)}}function Ge(t,e){return-2049&(t=32|(2&e?2|t:-3&t))}function De(t,e,n){return 32&e&&n||(t&=-33),t}function $e(t,e){var n=ni;const r=tt(t.l);ft(r),t=Ve(t,r,n,2,!0),e=null!=e?e:new n,t.push(e),2&Z(e.l)?Q(t,8):Q(t,16)}function ze(t,e){return t??e}function Re(t,e,n){ft(tt(t.l)),Se(t,e,Jt,2,!0).push(Ht(n))}function We(t,e){return Error(`Invalid wire type: ${t} (at position ${e})`)}function He(){return Error("Failed to read varint, encoding is invalid.")}function qe(t,e){return Error(`Tried to read past the end of the data ${e} > ${t}`)}function Je(t){if("string"==typeof t)return{buffer:L(t),A:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),A:!1};if(t.constructor===Uint8Array)return{buffer:t,A:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),A:!1};if(t.constructor===j)return{buffer:V(t)||new Uint8Array(0),A:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),A:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Ke(t,e){let n,r=0,i=0,o=0;const s=t.i;let a=t.g;do{n=s[a++],r|=(127&n)<<o,o+=7}while(o<32&&128&n);for(o>32&&(i|=(127&n)>>4),o=3;o<32&&128&n;o+=7)n=s[a++],i|=(127&n)<<o;if(en(t,a),n<128)return e(r>>>0,i>>>0);throw He()}function Xe(t){let e=0,n=t.g;const r=n+10,i=t.i;for(;n<r;){const r=i[n++];if(e|=r,0==(128&r))return en(t,n),!!(127&e)}throw He()}function Ye(t){const e=t.i;let n=t.g,r=e[n++],i=127&r;if(128&r&&(r=e[n++],i|=(127&r)<<7,128&r&&(r=e[n++],i|=(127&r)<<14,128&r&&(r=e[n++],i|=(127&r)<<21,128&r&&(r=e[n++],i|=r<<28,128&r&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++])))))throw He();return en(t,n),i}function Qe(t){var e=t.i;const n=t.g;var r=e[n],i=e[n+1];const o=e[n+2];return e=e[n+3],en(t,t.g+4),t=2*((i=(r<<0|i<<8|o<<16|e<<24)>>>0)>>31)+1,r=i>>>23&255,i&=8388607,255==r?i?NaN:t*(1/0):0==r?1401298464324817e-60*t*i:t*Math.pow(2,r-150)*(i+8388608)}function Ze(t){return Ye(t)}function tn(t,e,{D:n=!1}={}){t.D=n,e&&(e=Je(e),t.i=e.buffer,t.m=e.A,t.v=0,t.j=t.i.length,t.g=t.v)}function en(t,e){if(t.g=e,e>t.j)throw qe(t.j,e)}function nn(t,e){if(e<0)throw Error(`Tried to read a negative byte length: ${e}`);const n=t.g,r=n+e;if(r>t.j)throw qe(e,t.j-n);return t.g=r,n}function rn(t,e){if(0==e)return k();var n=nn(t,e);return t.D&&t.m?n=t.i.subarray(n,n+e):(t=t.i,n=n===(e=n+e)?new Uint8Array(0):At?t.slice(n,e):new Uint8Array(t.subarray(n,e))),0==n.length?k():new j(n,F)}var on=[];function sn(t){var e=t.g;if(e.g==e.j)return!1;t.j=t.g.g;var n=Ye(t.g)>>>0;if(e=n>>>3,!((n&=7)>=0&&n<=5))throw We(n,t.j);if(e<1)throw Error(`Invalid field number: ${e} (at position ${t.j})`);return t.m=e,t.i=n,!0}function an(t){switch(t.i){case 0:0!=t.i?an(t):Xe(t.g);break;case 1:en(t=t.g,t.g+8);break;case 2:if(2!=t.i)an(t);else{var e=Ye(t.g)>>>0;en(t=t.g,t.g+e)}break;case 5:en(t=t.g,t.g+4);break;case 3:for(e=t.m;;){if(!sn(t))throw Error("Unmatched start-group tag: stream EOF");if(4==t.i){if(t.m!=e)throw Error("Unmatched end-group tag");break}an(t)}break;default:throw We(t.i,t.j)}}function un(t,e,n){const r=t.g.j,i=Ye(t.g)>>>0,o=t.g.g+i;let s=o-r;if(s<=0&&(t.g.j=o,n(e,t,void 0,void 0,void 0),s=o-t.g.g),s)throw Error(`Message parsing ended unexpectedly. Expected to read ${i} bytes, instead read ${i-s} bytes, either the data ended unexpectedly or the message misreported its own length`);t.g.g=o,t.g.j=r}function cn(t){var s=Ye(t.g)>>>0,a=nn(t=t.g,s);if(t=t.i,o){var u,c=t;(u=i)||(u=i=new TextDecoder("utf-8",{fatal:!0})),s=a+s,c=0===a&&s===c.length?c:c.subarray(a,s);try{var l=u.decode(c)}catch(t){if(void 0===r){try{u.decode(new Uint8Array([128]))}catch(t){}try{u.decode(new Uint8Array([97])),r=!0}catch(t){r=!1}}throw!r&&(i=void 0),t}}else{s=(l=a)+s,a=[];let r,i=null;for(;l<s;){var h=t[l++];h<128?a.push(h):h<224?l>=s?e():(r=t[l++],h<194||128!=(192&r)?(l--,e()):a.push((31&h)<<6|63&r)):h<240?l>=s-1?e():(r=t[l++],128!=(192&r)||224===h&&r<160||237===h&&r>=160||128!=(192&(u=t[l++]))?(l--,e()):a.push((15&h)<<12|(63&r)<<6|63&u)):h<=244?l>=s-2?e():(r=t[l++],128!=(192&r)||r-144+(h<<28)>>30!=0||128!=(192&(u=t[l++]))||128!=(192&(c=t[l++]))?(l--,e()):(h=(7&h)<<18|(63&r)<<12|(63&u)<<6|63&c,h-=65536,a.push(55296+(h>>10&1023),56320+(1023&h)))):e(),a.length>=8192&&(i=n(i,a),a.length=0)}l=n(i,a)}return l}function ln(t){const e=Ye(t.g)>>>0;return rn(t.g,e)}function hn(t,e,n){var r=Ye(t.g)>>>0;for(r=t.g.g+r;t.g.g<r;)n.push(e(t.g))}var fn=[];let dn;function gn(t,e,n){e.g?e.j(t,e.g,e.i,n,!0):e.j(t,e.i,n,!0)}var pn=class{constructor(t,e){this.l=ae(t,e)}toJSON(){return mn(this)}A(){return!!(2&Z(this.l))}};function mn(t){t=t.l,t=dn?t:ce(t,le,void 0,void 0,!1);{var e=!dn;let c=t.length;if(c){var n=t[c-1],r=ut(n);r?c--:n=void 0;var i=t;if(r){t:{var o,s=n,a=!1;if(s)for(let t in s)isNaN(+t)?(o??={})[t]=s[t]:(r=s[t],Array.isArray(r)&&(lt(r)||at(r)&&0===r.size)&&(r=null),null==r&&(a=!0),null!=r&&((o??={})[t]=r));if(a||(o=s),o)for(let t in o){a=o;break t}a=null}s=null==a?null!=n:a!==n}for(;c>0&&(null==(o=i[c-1])||lt(o)||at(o)&&0===o.size);c--)var u=!0;(i!==t||s||u)&&(e?(u||s||a)&&(i.length=c):i=Array.prototype.slice.call(i,0,c),a&&i.push(a)),u=i}else u=t}return u}function yn(t){return t?/^\d+$/.test(t)?(Ft(t),new bn(It,Tt)):null:vn||=new bn(0,0)}pn.prototype.C=ot,pn.prototype.toString=function(){try{return dn=!0,mn(this).toString()}finally{dn=!1}};var bn=class{constructor(t,e){this.i=t>>>0,this.g=e>>>0}};let vn;function wn(t){return t?/^-?\d+$/.test(t)?(Ft(t),new _n(It,Tt)):null:Sn||=new _n(0,0)}var _n=class{constructor(t,e){this.i=t>>>0,this.g=e>>>0}};let Sn;function An(t,e,n){for(;n>0||e>127;)t.g.push(127&e|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.g.push(e)}function En(t,e){for(;e>127;)t.g.push(127&e|128),e>>>=7;t.g.push(e)}function In(t,e){if(e>=0)En(t,e);else{for(let n=0;n<9;n++)t.g.push(127&e|128),e>>=7;t.g.push(1)}}function Tn(t){var e=It;t.g.push(e>>>0&255),t.g.push(e>>>8&255),t.g.push(e>>>16&255),t.g.push(e>>>24&255)}function xn(t,e){0!==e.length&&(t.j.push(e),t.i+=e.length)}function Pn(t,e,n){En(t.g,8*e+n)}function Un(t,e){return Pn(t,e,2),e=t.g.end(),xn(t,e),e.push(t.i),e}function Bn(t,e){var n=e.pop();for(n=t.i+t.g.length()-n;n>127;)e.push(127&n|128),n>>>=7,t.i++;e.push(n),t.i++}function On(t,e,n){Pn(t,e,2),En(t.g,n.length),xn(t,t.g.end()),xn(t,n)}function Ln(){const t=class{constructor(){throw Error()}};return Object.setPrototypeOf(t,t.prototype),t}var Nn=Ln(),Fn=Ln(),kn=Ln(),Vn=Ln(),jn=Ln(),Cn=Ln(),Mn=Ln(),Gn=Ln(),Dn=class{constructor(t,e,n){this.g=t,this.i=e,t=Nn,this.j=!!t&&n===t||!1}};function $n(t,e){return new Dn(t,e,Nn)}function zn(t,e,n,r,i){null!=(e=tr(e,r))&&(n=Un(t,n),i(e,t),Bn(t,n))}const Rn=$n((function(t,e,n,r,i){return 2===t.i&&(un(t,Ne(e,r,n),i),!0)}),zn),Wn=$n((function(t,e,n,r,i){return 2===t.i&&(un(t,Ne(e,r,n,!0),i),!0)}),zn);var Hn=Symbol(),qn=Symbol(),Jn=Symbol(),Kn=Symbol();let Xn,Yn;function Qn(t,e,n,r){var i=r[t];if(i)return i;(i={}).B=function(t){switch(typeof t){case"boolean":return re||=[0,void 0,!0];case"number":return t>0?void 0:0===t?ie||=[0,void 0]:[-t,void 0];case"string":return[0,t];case"object":return t}}(r[0]);var o=r[1];let s=1;o&&o.constructor===Object&&(i.G=o,"function"==typeof(o=r[++s])&&(i.H=!0,Xn??=o,Yn??=r[s+1],o=r[s+=2]));const a={};for(;o&&Array.isArray(o)&&o.length&&"number"==typeof o[0]&&o[0]>0;){for(var u=0;u<o.length;u++)a[o[u]]=o;o=r[++s]}for(u=1;void 0!==o;){let t;"number"==typeof o&&(u+=o,o=r[++s]);var c=void 0;if(o instanceof Dn?t=o:(t=Rn,s--),t?.j){o=r[++s],c=r;var l=s;"function"==typeof o&&(o=o(),c[l]=o),c=o}for(l=u+1,"number"==typeof(o=r[++s])&&o<0&&(l-=o,o=r[++s]);u<l;u++){const r=a[u];c?n(i,u,t,c,r):e(i,u,t,r)}}return r[t]=i}function Zn(t){return Array.isArray(t)?t[0]instanceof Dn?t:[Wn,t]:[t,void 0]}function tr(t,e){return t instanceof pn?t.l:Array.isArray(t)?se(t,e,!1):void 0}function er(t,e,n,r){const i=n.g;t[e]=r?(t,e,n)=>i(t,e,n,r):i}function nr(t,e,n,r,i){const o=n.g;let s,a;t[e]=(t,e,n)=>o(t,e,n,a||=Qn(qn,er,nr,r).B,s||=rr(r),i)}function rr(t){let e=t[Jn];if(null!=e)return e;const n=Qn(qn,er,nr,t);return e=n.H?(t,e)=>Xn(t,e,n):(t,e)=>{const r=tt(t);for(;sn(e)&&4!=e.i;){var i=e.m,o=n[i];if(null==o){var s=n.G;s&&(s=s[i])&&(null!=(s=ir(s))&&(o=n[i]=s))}null!=o&&o(e,t,i)||(i=(o=e).j,an(o),o.F?o=void 0:(s=o.g.g-i,o.g.g=i,o=rn(o.g,s)),i=t,o&&(dt||=Symbol(),(s=i[dt])?s.push(o):i[dt]=[o]))}return 16384&r&&Y(t,34),!0},t[Jn]=e}function ir(t){const e=(t=Zn(t))[0].g;if(t=t[1]){const n=rr(t),r=Qn(qn,er,nr,t).B;return(t,i,o)=>e(t,i,o,r,n)}return e}function or(t,e,n){t[e]=n.i}function sr(t,e,n,r){let i,o;const s=n.i;t[e]=(t,e,n)=>s(t,e,n,o||=Qn(Hn,or,sr,r).B,i||=ar(r))}function ar(t){let e=t[Kn];if(!e){const n=Qn(Hn,or,sr,t);e=(t,e)=>ur(t,e,n),t[Kn]=e}return e}function ur(t,e,n){for(var r=Z(t),i=+!!(512&r)-1,o=t.length,s=512&r?1:0,a=o+(256&r?-1:0);s<a;s++){const r=t[s];if(null==r)continue;const o=s-i,a=cr(n,o);a&&a(e,r,o)}if(256&r){r=t[o-1];for(const t in r)i=+t,Number.isNaN(i)||null!=(o=r[i])&&(a=cr(n,i))&&a(e,o,i)}if(t=dt?t[dt]:void 0)for(xn(e,e.g.end()),n=0;n<t.length;n++)xn(e,V(t[n])||new Uint8Array(0))}function cr(t,e){var n=t[e];if(n)return n;if((n=t.G)&&(n=n[e])){var r=(n=Zn(n))[0].i;if(n=n[1]){const e=ar(n),i=Qn(Hn,or,sr,n).B;n=t.H?Yn(i,e):(t,n,o)=>r(t,n,o,i,e)}else n=r;return t[e]=n}}function lr(t,e){if(Array.isArray(e)){var n=Z(e);if(4&n)return e;for(var r=0,i=0;r<e.length;r++){const n=t(e[r]);null!=n&&(e[i++]=n)}return i<r&&(e.length=i),et(e,-12289&(5|n)),2&n&&Object.freeze(e),e}}function hr(t,e,n){return new Dn(t,e,n)}function fr(t,e,n){return new Dn(t,e,n)}function dr(t,e,n){we(t,tt(t),e,n)}function gr(t,e,n){if(e=function(t){if(null==t)return t;const e=typeof t;if("bigint"===e)return String(BigInt.asIntN(64,t));if(Mt(t)){if("string"===e)return zt(t);if("number"===e)return $t(t)}}(e),null!=e){if("string"==typeof e)wn(e);if(null!=e)switch(Pn(t,n,0),typeof e){case"number":t=t.g,Pt(e),An(t,It,Tt);break;case"bigint":n=BigInt.asUintN(64,e),n=new _n(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),An(t.g,n.i,n.g);break;default:n=wn(e),An(t.g,n.i,n.g)}}}function pr(t,e,n){null!=(e=Gt(e))&&null!=e&&(Pn(t,n,0),In(t.g,e))}function mr(t,e,n){null!=(e=null==e||"boolean"==typeof e?e:"number"==typeof e?!!e:void 0)&&(Pn(t,n,0),t.g.g.push(e?1:0))}function yr(t,e,n){null!=(e=Jt(e))&&On(t,n,u(e))}function br(t,e,n,r,i){null!=(e=tr(e,r))&&(n=Un(t,n),i(e,t),Bn(t,n))}function vr(t,e,n){null!=(e=null==e||"string"==typeof e||N(e)||e instanceof j?e:void 0)&&On(t,n,Je(e).buffer)}var wr=hr((function(t,e,n){return 5===t.i&&(dr(e,n,Qe(t.g)),!0)}),(function(t,e,n){null!=(e=Vt(e))&&(Pn(t,n,5),t=t.g,Ut(e),Tn(t))}),Cn),_r=fr((function(t,e,n){return(5===t.i||2===t.i)&&(e=Pe(e,tt(e),n,!1,!1),2==t.i?hn(t,Qe,e):e.push(Qe(t.g)),!0)}),(function(t,e,n){if(null!=(e=lr(Vt,e))&&e.length){Pn(t,n,2),En(t.g,4*e.length);for(let r=0;r<e.length;r++)n=t.g,Ut(e[r]),Tn(n)}}),Cn),Sr=hr((function(t,e,n){return 0===t.i&&(dr(e,n,Ke(t.g,Ot)),!0)}),gr,jn),Ar=hr((function(t,e,n){return 0===t.i&&(dr(e,n,0===(t=Ke(t.g,Ot))?void 0:t),!0)}),gr,jn),Er=hr((function(t,e,n){return 0===t.i&&(dr(e,n,Ke(t.g,Bt)),!0)}),(function(t,e,n){if(null!=(e=Wt(e))){if("string"==typeof e)yn(e);if(null!=e)switch(Pn(t,n,0),typeof e){case"number":t=t.g,Pt(e),An(t,It,Tt);break;case"bigint":n=BigInt.asUintN(64,e),n=new bn(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),An(t.g,n.i,n.g);break;default:n=yn(e),An(t.g,n.i,n.g)}}}),Ln()),Ir=hr((function(t,e,n){return 0===t.i&&(dr(e,n,Ye(t.g)),!0)}),pr,Vn),Tr=fr((function(t,e,n){return(0===t.i||2===t.i)&&(e=Pe(e,tt(e),n,!1,!1),2==t.i?hn(t,Ye,e):e.push(Ye(t.g)),!0)}),(function(t,e,n){if(null!=(e=lr(Gt,e))&&e.length){n=Un(t,n);for(let n=0;n<e.length;n++)In(t.g,e[n]);Bn(t,n)}}),Vn),xr=hr((function(t,e,n){return 0===t.i&&(dr(e,n,0===(t=Ye(t.g))?void 0:t),!0)}),pr,Vn),Pr=hr((function(t,e,n){return 0===t.i&&(dr(e,n,Xe(t.g)),!0)}),mr,Fn),Ur=hr((function(t,e,n){return 0===t.i&&(dr(e,n,!1===(t=Xe(t.g))?void 0:t),!0)}),mr,Fn),Br=fr((function(t,e,n){return 2===t.i&&(t=cn(t),Pe(e,tt(e),n,!1).push(t),!0)}),(function(t,e,n){if(null!=(e=lr(Jt,e)))for(let s=0;s<e.length;s++){var r=t,i=n,o=e[s];null!=o&&On(r,i,u(o))}}),kn),Or=hr((function(t,e,n){return 2===t.i&&(dr(e,n,""===(t=cn(t))?void 0:t),!0)}),yr,kn),Lr=hr((function(t,e,n){return 2===t.i&&(dr(e,n,cn(t)),!0)}),yr,kn),Nr=function(t,e,n=Nn){return new Dn(t,e,n)}((function(t,e,n,r,i){return 2===t.i&&(r=se(void 0,r,!0),Pe(e,tt(e),n,!0).push(r),un(t,r,i),!0)}),(function(t,e,n,r,i){if(Array.isArray(e))for(let o=0;o<e.length;o++)br(t,e[o],n,r,i)})),Fr=$n((function(t,e,n,r,i,o){return 2===t.i&&(Oe(e,Z(e),o,n),un(t,e=Ne(e,r,n),i),!0)}),br),kr=hr((function(t,e,n){return 2===t.i&&(dr(e,n,ln(t)),!0)}),vr,Mn),Vr=hr((function(t,e,n){return 0===t.i&&(dr(e,n,0===(t=Ye(t.g)>>>0)?void 0:t),!0)}),(function(t,e,n){e=function(t){if(null==t)return t;if("string"==typeof t){if(!t)return;t=+t}return"number"==typeof t&&Number.isFinite(t)?t>>>0:void 0}(e),null!=e&&null!=e&&(Pn(t,n,0),En(t.g,e))}),Ln()),jr=hr((function(t,e,n){return 0===t.i&&(dr(e,n,Ye(t.g)),!0)}),(function(t,e,n){null!=(e=Gt(e))&&(e=parseInt(e,10),Pn(t,n,0),In(t.g,e))}),Gn);class Cr{constructor(t,e){this.i=t,this.g=e,this.j=Ce,this.defaultValue=void 0}}function Mr(t,e){return(n,r)=>{if(fn.length){const t=fn.pop();t.o(r),tn(t.g,n,r),n=t}else n=new class{constructor(t,e){if(on.length){const n=on.pop();tn(n,t,e),t=n}else t=new class{constructor(t,e){this.i=null,this.m=!1,this.g=this.j=this.v=0,tn(this,t,e)}clear(){this.i=null,this.m=!1,this.g=this.j=this.v=0,this.D=!1}}(t,e);this.g=t,this.j=this.g.g,this.i=this.m=-1,this.o(e)}o({F:t=!1}={}){this.F=t}}(n,r);try{const r=new t,o=r.l;rr(e)(o,n);var i=r}finally{n.g.clear(),n.m=-1,n.i=-1,fn.length<100&&fn.push(n)}return i}}var Gr=[0,Or,hr((function(t,e,n){return 2===t.i&&(dr(e,n,(t=ln(t))===k()?void 0:t),!0)}),(function(t,e,n){if(null!=e){if(e instanceof pn){const r=e.N;return void(r&&(e=r(e),null!=e&&On(t,n,Je(e).buffer)))}if(Array.isArray(e))return}vr(t,e,n)}),Mn)];let Dr,$r=globalThis.trustedTypes;function zr(t){void 0===Dr&&(Dr=function(){let t=null;if(!$r)return t;try{const e=t=>t;t=$r.createPolicy("goog#html",{createHTML:e,createScript:e,createScriptURL:e})}catch(t){}return t}());var e=Dr;return new class{constructor(t){this.g=t}toString(){return this.g+""}}(e?e.createScriptURL(t):t)}function Rr(t,...e){if(0===e.length)return zr(t[0]);let n=t[0];for(let r=0;r<e.length;r++)n+=encodeURIComponent(e[r])+t[r+1];return zr(n)}var Wr=[0,Ir,jr,Pr,-1,Tr,jr,-1],Hr=class extends pn{constructor(){super()}},qr=[0,Pr,Lr,Pr,jr,-1,fr((function(t,e,n){return(0===t.i||2===t.i)&&(e=Pe(e,tt(e),n,!1,!1),2==t.i?hn(t,Ze,e):e.push(Ye(t.g)),!0)}),(function(t,e,n){if(null!=(e=lr(Gt,e))&&e.length){n=Un(t,n);for(let n=0;n<e.length;n++)In(t.g,e[n]);Bn(t,n)}}),Gn),Lr,-1,[0,Pr,-1],jr,Pr,-1],Jr=[0,Lr,-2],Kr=class extends pn{constructor(){super()}},Xr=[0],Yr=[0,Ir,Pr,1,Pr,-3],Qr=class extends pn{constructor(t){super(t,2)}},Zr={};Zr[336783863]=[0,Lr,Pr,-1,Ir,[0,[1,2,3,4,5,6,7],Fr,Xr,Fr,qr,Fr,Jr,Fr,Yr,Fr,Wr,Fr,[0,Lr,-2],Fr,[0,Lr,jr]],[0,Lr],Pr,[0,[1,3],[2,4],Fr,[0,Tr],-1,Fr,[0,Br],-1,Nr,[0,Lr,-1]],Lr];var ti=[0,Ar,-1,Ur,-3,Ar,Tr,Or,xr,Ar,-1,Ur,xr,Ur,-2,Or];function ei(t){Re(t,3,"TEXT:text_in")}var ni=class extends pn{constructor(t){super(t,500)}o(t){return Ce(this,0,7,t)}},ri=[-1,{}],ii=[0,Lr,1,ri],oi=[0,Lr,Br,ri];function si(t){Re(t,10,"text_in")}var ai,ui=class extends pn{constructor(){super(void 0,500)}o(t){return Ce(this,0,1001,t)}};ui.prototype.g=(ai=[-500,Nr,[-500,Or,-1,Br,-3,[-2,Zr,Pr],Nr,Gr,xr,-1,ii,oi,Nr,[0,Or,Ur],Or,ti,xr,Br,987,Br],4,Nr,[-500,Lr,-1,[-1,{}],998,Lr],Nr,[-500,Lr,Br,-1,[-2,{},Pr],997,Br,-1],xr,Nr,[-500,Lr,Br,ri,998,Br],Br,xr,ii,oi,Nr,[0,Or,-1,ri],Br,-2,ti,Or,-1,Ur,[0,Ur,Vr],978,ri,Nr,Gr],function(){const t=new class{constructor(){this.j=[],this.i=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const t=this.g;return this.g=[],t}}}};ur(this.l,t,Qn(Hn,or,sr,ai)),xn(t,t.g.end());const e=new Uint8Array(t.i),n=t.j,r=n.length;let i=0;for(let t=0;t<r;t++){const r=n[t];e.set(r,i),i+=r.length}return t.j=[e],e});var ci=class extends pn{constructor(t){super(t)}},li=class extends pn{constructor(t){super(t)}g(){return je(this,ci)}},hi=class extends pn{constructor(t){super(t)}},fi=Mr(class extends pn{constructor(t){super(t)}},[0,Nr,[0,1,Ir,Lr,[0,Nr,[0,Ir,wr,Lr,-1]]],Sr]),di=class extends pn{constructor(t){super(t)}},gi=class extends pn{constructor(t){super(t)}I(){const t=_e(this);return null==t?k():t}},pi=class extends pn{constructor(t){super(t)}},mi=[1,2],yi=Mr(class extends pn{constructor(t){super(t)}},[0,Nr,[0,mi,Fr,[0,_r],Fr,[0,kr],Ir,Lr],Sr]),bi=class extends pn{constructor(t){super(t)}},vi=class extends pn{constructor(t){super(t)}},wi=[0,Pr,-1],_i=class extends pn{constructor(t){super(t)}},Si=[1,2,3,4,5],Ai=class extends pn{constructor(t){super(t)}g(){return null!=_e(this)}i(){return null!=Jt(me(this,2))}},Ei=class extends pn{constructor(t){super(t)}},Ii=[0,[0,kr,Lr,[0,Ir,Sr,-1],[0,Er,Sr]],Pr,[0,Si,Fr,Yr,Fr,qr,Fr,Wr,Fr,Xr,Fr,Jr],jr],Ti=class extends pn{constructor(t){super(t)}},xi=new Cr(462704549,Ti);Zr[462704549]=[0,Ii,[0,Lr,Ir,wr,Br,-1]];var Pi=class extends pn{constructor(t){super(t)}},Ui=new Cr(477589892,Pi);function Bi(t,e){if(e=e?fe(e):new bi,void 0!==t.displayNamesLocale?ve(e,1,qt(t.displayNamesLocale)):void 0===t.displayNamesLocale&&ve(e,1),void 0!==t.maxResults){var n=t.maxResults;if(null!=n){if("number"!=typeof n)throw z();if(!Number.isFinite(n))throw z();n|=0}ve(e,2,n)}else"maxResults"in t&&ve(e,2);if(void 0!==t.scoreThreshold){if(null!=(n=t.scoreThreshold)&&"number"!=typeof n)throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);ve(e,3,n)}else"scoreThreshold"in t&&ve(e,3);return void 0!==t.categoryAllowlist?Te(e,4,t.categoryAllowlist):"categoryAllowlist"in t&&ve(e,4),void 0!==t.categoryDenylist?Te(e,5,t.categoryDenylist):"categoryDenylist"in t&&ve(e,5),e}function Oi(t){const e={classifications:je(t,hi).map((t=>function(t,e=-1,n=""){return{categories:t.map((t=>{var e=ze(Gt(me(t,1)),0)??-1;const n=t.l;let r=tt(n);const i=be(n,r,2),o=Vt(i);return null!=o&&o!==i&&we(n,r,2,o),{index:e,score:o??0??0,categoryName:ze(Jt(me(t,3)),"")??"",displayName:ze(Jt(me(t,4)),"")??""}})),headIndex:e,headName:n}}(ke(t,li,4)?.g()??[],ze(Gt(me(t,2)),0),ze(Jt(me(t,3)),""))))};return null!=Rt(me(t,2))&&(e.timestampMs=ze(Rt(me(t,2)),0)),e}function Li(t){return Array.from(t,(t=>t>127?t-256:t))}function Ni(t,e){if(t.length!==e.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let n=0,r=0,i=0;for(let o=0;o<t.length;o++)n+=t[o]*e[o],r+=t[o]*t[o],i+=e[o]*e[o];if(r<=0||i<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*i)}let Fi;Zr[477589892]=[0,Ii,wi];const ki=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function Vi(){if(void 0===Fi)try{await WebAssembly.instantiate(ki),Fi=!0}catch{Fi=!1}return Fi}async function ji(t,e=Rr``){const n=await Vi()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${e}/${t}_${n}.js`,wasmBinaryPath:`${e}/${t}_${n}.wasm`}}var Ci=class{};function Mi(){var t=navigator;return"undefined"!=typeof OffscreenCanvas&&(!function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")}(t)||!!((t=t.userAgent.match(/Version\/([\d]+).*Safari/))&&t.length>=1&&Number(t[1])>=17))}async function Gi(t){if("function"!=typeof importScripts){const e=document.createElement("script");return e.src=t.toString(),e.crossOrigin="anonymous",new Promise(((t,n)=>{e.addEventListener("load",(()=>{t()}),!1),e.addEventListener("error",(t=>{n(t)}),!1),document.body.appendChild(e)}))}importScripts(t.toString())}Ci.forVisionTasks=function(t){return ji("vision",t)},Ci.forTextTasks=function(t){return ji("text",t)},Ci.forGenAiExperimentalTasks=function(t){return ji("genai_experimental",t)},Ci.forGenAiTasks=function(t){return ji("genai",t)},Ci.forAudioTasks=function(t){return ji("audio",t)},Ci.isSimdSupported=function(){return Vi()};function Di(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(e=t.h.stringToNewUTF8(e)),t.h._free(e)}function $i(t,e,n){t.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const r=new Uint32Array(e.length);for(let n=0;n<e.length;n++)r[n]=t.h.stringToNewUTF8(e[n]);e=t.h._malloc(4*r.length),t.h.HEAPU32.set(r,e>>2),n(e);for(const e of r)t.h._free(e);t.h._free(e)}function zi(t,e,n){t.h.simpleListeners=t.h.simpleListeners||{},t.h.simpleListeners[e]=n}function Ri(t,e,n){let r=[];t.h.simpleListeners=t.h.simpleListeners||{},t.h.simpleListeners[e]=(t,e,i)=>{e?(n(r,i),r=[]):r.push(t)}}const Wi=function(t){return class extends t{M(){this.h._registerModelResourcesGraphService()}}}(class{constructor(t,e){this.j=!0,this.h=t,this.g=null,this.i=0,this.m="function"==typeof this.h._addIntToInputStream,void 0!==e?this.h.canvas=e:Mi()?this.h.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.h.canvas=document.createElement("canvas"))}async initializeGraph(t){const e=await(await fetch(t)).arrayBuffer();t=!(t.endsWith(".pbtxt")||t.endsWith(".textproto")),this.setGraph(new Uint8Array(e),t)}setGraphFromString(t){this.setGraph((new TextEncoder).encode(t),!1)}setGraph(t,e){const n=t.length,r=this.h._malloc(n);this.h.HEAPU8.set(t,r),e?this.h._changeBinaryGraph(n,r):this.h._changeTextGraph(n,r),this.h._free(r)}configureAudio(t,e,n,r,i){this.h._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),Di(this,r||"input_audio",(r=>{Di(this,i=i||"audio_header",(i=>{this.h._configureAudio(r,i,t,e??0,n)}))}))}setAutoResizeCanvas(t){this.j=t}setAutoRenderToScreen(t){this.h._setAutoRenderToScreen(t)}setGpuBufferVerticalFlip(t){this.h.gpuOriginForWebTexturesIsBottomLeft=t}attachErrorListener(t){this.h.errorListener=t}attachEmptyPacketListener(t,e){this.h.emptyPacketListeners=this.h.emptyPacketListeners||{},this.h.emptyPacketListeners[t]=e}addAudioToStream(t,e,n){this.addAudioToStreamWithShape(t,0,0,e,n)}addAudioToStreamWithShape(t,e,n,r,i){const o=4*t.length;this.i!==o&&(this.g&&this.h._free(this.g),this.g=this.h._malloc(o),this.i=o),this.h.HEAPF32.set(t,this.g/4),Di(this,r,(t=>{this.h._addAudioToInputStream(this.g,e,n,t,i)}))}addGpuBufferToStream(t,e,n){Di(this,e,(e=>{if(!this.h.canvas)throw Error("No OpenGL canvas configured.");e?this.h._bindTextureToStream(e):this.h._bindTextureToCanvas();const r=this.h.canvas.getContext("webgl2")||this.h.canvas.getContext("webgl");if(!r)throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");this.h.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),this.h.gpuOriginForWebTexturesIsBottomLeft&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const[i,o]=void 0!==t.videoWidth?[t.videoWidth,t.videoHeight]:void 0!==t.naturalWidth?[t.naturalWidth,t.naturalHeight]:void 0!==t.displayWidth?[t.displayWidth,t.displayHeight]:[t.width,t.height];!this.j||i===this.h.canvas.width&&o===this.h.canvas.height||(this.h.canvas.width=i,this.h.canvas.height=o);const[s,a]=[i,o];this.h._addBoundTextureToStream(e,s,a,n)}))}addBoolToStream(t,e,n){Di(this,e,(e=>{this.h._addBoolToInputStream(t,e,n)}))}addDoubleToStream(t,e,n){Di(this,e,(e=>{this.h._addDoubleToInputStream(t,e,n)}))}addFloatToStream(t,e,n){Di(this,e,(e=>{this.h._addFloatToInputStream(t,e,n)}))}addIntToStream(t,e,n){Di(this,e,(e=>{this.h._addIntToInputStream(t,e,n)}))}addUintToStream(t,e,n){Di(this,e,(e=>{this.h._addUintToInputStream(t,e,n)}))}addStringToStream(t,e,n){Di(this,e,(e=>{Di(this,t,(t=>{this.h._addStringToInputStream(t,e,n)}))}))}addStringRecordToStream(t,e,n){Di(this,e,(e=>{$i(this,Object.keys(t),(r=>{$i(this,Object.values(t),(i=>{this.h._addFlatHashMapToInputStream(r,i,Object.keys(t).length,e,n)}))}))}))}addProtoToStream(t,e,n,r){Di(this,n,(n=>{Di(this,e,(e=>{const i=this.h._malloc(t.length);this.h.HEAPU8.set(t,i),this.h._addProtoToInputStream(i,t.length,e,n,r),this.h._free(i)}))}))}addEmptyPacketToStream(t,e){Di(this,t,(t=>{this.h._addEmptyPacketToInputStream(t,e)}))}addBoolVectorToStream(t,e,n){Di(this,e,(e=>{const r=this.h._allocateBoolVector(t.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const e of t)this.h._addBoolVectorEntry(r,e);this.h._addBoolVectorToInputStream(r,e,n)}))}addDoubleVectorToStream(t,e,n){Di(this,e,(e=>{const r=this.h._allocateDoubleVector(t.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const e of t)this.h._addDoubleVectorEntry(r,e);this.h._addDoubleVectorToInputStream(r,e,n)}))}addFloatVectorToStream(t,e,n){Di(this,e,(e=>{const r=this.h._allocateFloatVector(t.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const e of t)this.h._addFloatVectorEntry(r,e);this.h._addFloatVectorToInputStream(r,e,n)}))}addIntVectorToStream(t,e,n){Di(this,e,(e=>{const r=this.h._allocateIntVector(t.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const e of t)this.h._addIntVectorEntry(r,e);this.h._addIntVectorToInputStream(r,e,n)}))}addUintVectorToStream(t,e,n){Di(this,e,(e=>{const r=this.h._allocateUintVector(t.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const e of t)this.h._addUintVectorEntry(r,e);this.h._addUintVectorToInputStream(r,e,n)}))}addStringVectorToStream(t,e,n){Di(this,e,(e=>{const r=this.h._allocateStringVector(t.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const e of t)Di(this,e,(t=>{this.h._addStringVectorEntry(r,t)}));this.h._addStringVectorToInputStream(r,e,n)}))}addBoolToInputSidePacket(t,e){Di(this,e,(e=>{this.h._addBoolToInputSidePacket(t,e)}))}addDoubleToInputSidePacket(t,e){Di(this,e,(e=>{this.h._addDoubleToInputSidePacket(t,e)}))}addFloatToInputSidePacket(t,e){Di(this,e,(e=>{this.h._addFloatToInputSidePacket(t,e)}))}addIntToInputSidePacket(t,e){Di(this,e,(e=>{this.h._addIntToInputSidePacket(t,e)}))}addUintToInputSidePacket(t,e){Di(this,e,(e=>{this.h._addUintToInputSidePacket(t,e)}))}addStringToInputSidePacket(t,e){Di(this,e,(e=>{Di(this,t,(t=>{this.h._addStringToInputSidePacket(t,e)}))}))}addProtoToInputSidePacket(t,e,n){Di(this,n,(n=>{Di(this,e,(e=>{const r=this.h._malloc(t.length);this.h.HEAPU8.set(t,r),this.h._addProtoToInputSidePacket(r,t.length,e,n),this.h._free(r)}))}))}addBoolVectorToInputSidePacket(t,e){Di(this,e,(e=>{const n=this.h._allocateBoolVector(t.length);if(!n)throw Error("Unable to allocate new bool vector on heap.");for(const e of t)this.h._addBoolVectorEntry(n,e);this.h._addBoolVectorToInputSidePacket(n,e)}))}addDoubleVectorToInputSidePacket(t,e){Di(this,e,(e=>{const n=this.h._allocateDoubleVector(t.length);if(!n)throw Error("Unable to allocate new double vector on heap.");for(const e of t)this.h._addDoubleVectorEntry(n,e);this.h._addDoubleVectorToInputSidePacket(n,e)}))}addFloatVectorToInputSidePacket(t,e){Di(this,e,(e=>{const n=this.h._allocateFloatVector(t.length);if(!n)throw Error("Unable to allocate new float vector on heap.");for(const e of t)this.h._addFloatVectorEntry(n,e);this.h._addFloatVectorToInputSidePacket(n,e)}))}addIntVectorToInputSidePacket(t,e){Di(this,e,(e=>{const n=this.h._allocateIntVector(t.length);if(!n)throw Error("Unable to allocate new int vector on heap.");for(const e of t)this.h._addIntVectorEntry(n,e);this.h._addIntVectorToInputSidePacket(n,e)}))}addUintVectorToInputSidePacket(t,e){Di(this,e,(e=>{const n=this.h._allocateUintVector(t.length);if(!n)throw Error("Unable to allocate new unsigned int vector on heap.");for(const e of t)this.h._addUintVectorEntry(n,e);this.h._addUintVectorToInputSidePacket(n,e)}))}addStringVectorToInputSidePacket(t,e){Di(this,e,(e=>{const n=this.h._allocateStringVector(t.length);if(!n)throw Error("Unable to allocate new string vector on heap.");for(const e of t)Di(this,e,(t=>{this.h._addStringVectorEntry(n,t)}));this.h._addStringVectorToInputSidePacket(n,e)}))}attachBoolListener(t,e){zi(this,t,e),Di(this,t,(t=>{this.h._attachBoolListener(t)}))}attachBoolVectorListener(t,e){Ri(this,t,e),Di(this,t,(t=>{this.h._attachBoolVectorListener(t)}))}attachIntListener(t,e){zi(this,t,e),Di(this,t,(t=>{this.h._attachIntListener(t)}))}attachIntVectorListener(t,e){Ri(this,t,e),Di(this,t,(t=>{this.h._attachIntVectorListener(t)}))}attachUintListener(t,e){zi(this,t,e),Di(this,t,(t=>{this.h._attachUintListener(t)}))}attachUintVectorListener(t,e){Ri(this,t,e),Di(this,t,(t=>{this.h._attachUintVectorListener(t)}))}attachDoubleListener(t,e){zi(this,t,e),Di(this,t,(t=>{this.h._attachDoubleListener(t)}))}attachDoubleVectorListener(t,e){Ri(this,t,e),Di(this,t,(t=>{this.h._attachDoubleVectorListener(t)}))}attachFloatListener(t,e){zi(this,t,e),Di(this,t,(t=>{this.h._attachFloatListener(t)}))}attachFloatVectorListener(t,e){Ri(this,t,e),Di(this,t,(t=>{this.h._attachFloatVectorListener(t)}))}attachStringListener(t,e){zi(this,t,e),Di(this,t,(t=>{this.h._attachStringListener(t)}))}attachStringVectorListener(t,e){Ri(this,t,e),Di(this,t,(t=>{this.h._attachStringVectorListener(t)}))}attachProtoListener(t,e,n){zi(this,t,e),Di(this,t,(t=>{this.h._attachProtoListener(t,n||!1)}))}attachProtoVectorListener(t,e,n){Ri(this,t,e),Di(this,t,(t=>{this.h._attachProtoVectorListener(t,n||!1)}))}attachAudioListener(t,e,n){this.h._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),zi(this,t,((t,n)=>{t=new Float32Array(t.buffer,t.byteOffset,t.length/4),e(t,n)})),Di(this,t,(t=>{this.h._attachAudioListener(t,n||!1)}))}finishProcessing(){this.h._waitUntilIdle()}closeGraph(){this.h._closeGraph(),this.h.simpleListeners=void 0,this.h.emptyPacketListeners=void 0}});var Hi=class extends Wi{};async function qi(t,e,n){return t=await(async(t,e,n,r)=>{if(e&&await Gi(e),!self.ModuleFactory)throw Error("ModuleFactory not set.");if(n&&(await Gi(n),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&r&&((e=self.Module).locateFile=r.locateFile,r.mainScriptUrlOrBlob&&(e.mainScriptUrlOrBlob=r.mainScriptUrlOrBlob)),r=await self.ModuleFactory(self.Module||r),self.ModuleFactory=self.Module=void 0,new t(r,null)})(t,e.wasmLoaderPath,e.assetLoaderPath,{locateFile:t=>t.endsWith(".wasm")?e.wasmBinaryPath.toString():e.assetBinaryPath&&t.endsWith(".data")?e.assetBinaryPath.toString():t}),await t.o(n),t}async function Ji(t,e,n){return qi(t,e,n)}function Ki(t,e){const n=ke(t.baseOptions,Ai,1)||new Ai;"string"==typeof e?(ve(n,2,qt(e)),ve(n,1)):e instanceof Uint8Array&&(ve(n,1,ct(e,!1)),ve(n,2)),Ce(t.baseOptions,0,1,n)}function Xi(t,e){const n=e.baseOptions||{};if(e.baseOptions?.modelAssetBuffer&&e.baseOptions?.modelAssetPath)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(ke(t.baseOptions,Ai,1)?.g()||ke(t.baseOptions,Ai,1)?.i()||e.baseOptions?.modelAssetBuffer||e.baseOptions?.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if(function(t,e){let n=ke(t.baseOptions,_i,3);if(!n){var r=n=new _i;Me(r,4,new Kr)}"delegate"in e&&("GPU"===e.delegate?Me(e=n,2,r=new Hr):Me(e=n,4,r=new Kr)),Ce(t.baseOptions,0,3,n)}(t,n),n.modelAssetPath)return fetch(n.modelAssetPath.toString()).then((t=>{if(t.ok)return t.arrayBuffer();throw Error(`Failed to fetch model: ${n.modelAssetPath} (${t.status})`)})).then((e=>{try{t.g.h.FS_unlink("/model.dat")}catch{}t.g.h.FS_createDataFile("/","model.dat",new Uint8Array(e),!0,!1,!1),Ki(t,"/model.dat"),t.v()}));if(n.modelAssetBuffer instanceof Uint8Array)Ki(t,n.modelAssetBuffer);else if(n.modelAssetBuffer)return async function(t){const e=[];for(var n=0;;){const{done:r,value:i}=await t.read();if(r)break;e.push(i),n+=i.length}if(0===e.length)return new Uint8Array(0);if(1===e.length)return e[0];t=new Uint8Array(n),n=0;for(const r of e)t.set(r,n),n+=r.length;return t}(n.modelAssetBuffer).then((e=>{Ki(t,e),t.v()}));return t.v(),Promise.resolve()}function Yi(t){try{const e=t.m.length;if(1===e)throw Error(t.m[0].message);if(e>1)throw Error("Encountered multiple errors: "+t.m.map((t=>t.message)).join(", "))}finally{t.m=[]}}function Qi(t,e){t.j=Math.max(t.j,e)}var Zi=class{constructor(t){this.g=t,this.m=[],this.j=0,this.g.setAutoRenderToScreen(!1)}setGraph(t,e){this.g.attachErrorListener(((t,e)=>{this.m.push(Error(e))})),this.g.M(),this.g.setGraph(t,e),Yi(this)}finishProcessing(){this.g.finishProcessing(),Yi(this)}close(){this.g.closeGraph()}};Zi.prototype.close=Zi.prototype.close,function(e,n){e=e.split(".");var r,i=t;e[0]in i||void 0===i.execScript||i.execScript("var "+e[0]);for(;e.length&&(r=e.shift());)e.length||void 0===n?i=i[r]&&i[r]!==Object.prototype[r]?i[r]:i[r]={}:i[r]=n}("TaskRunner",Zi);var to=class extends Zi{constructor(t,e){super(new Hi(t,e)),this.u={languages:[]},Ce(t=this.i=new Ti,0,1,e=new Ei)}o(t){return Ce(this.i,0,2,Bi(t,ke(this.i,bi,2))),Xi(this,t)}get baseOptions(){return ke(this.i,Ei,1)}set baseOptions(t){Ce(this.i,0,1,t)}K(t){return this.u={languages:[]},this.g.addStringToStream(t,"text_in",this.j+1),this.finishProcessing(),this.u}v(){var t=new ui;si(t),Re(t,15,"classifications_out");const e=new Qr;gn(e,xi,this.i);const n=new ni;xe(n,qt("mediapipe.tasks.text.text_classifier.TextClassifierGraph")),ei(n),Re(n,4,"CLASSIFICATIONS:classifications_out"),n.o(e),$e(t,n),this.g.attachProtoListener("classifications_out",((t,e)=>{if(({classifications:t}=Oi(fi(t))),1!==t.length)throw Error(`Expected 1 classification head, got ${t.length}`);this.u.languages=t[0].categories.map((t=>({languageCode:t.categoryName,probability:t.score}))),Qi(this,e)})),this.g.attachEmptyPacketListener("classifications_out",(t=>{Qi(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};to.prototype.detect=to.prototype.K,to.prototype.setOptions=to.prototype.o,to.createFromModelPath=function(t,e){return Ji(to,t,{baseOptions:{modelAssetPath:e}})},to.createFromModelBuffer=function(t,e){return Ji(to,t,{baseOptions:{modelAssetBuffer:e}})},to.createFromOptions=function(t,e){return Ji(to,t,e)};var eo=class extends Zi{constructor(t,e){super(new Hi(t,e)),this.u={classifications:[]},Ce(t=this.i=new Ti,0,1,e=new Ei)}o(t){return Ce(this.i,0,2,Bi(t,ke(this.i,bi,2))),Xi(this,t)}get baseOptions(){return ke(this.i,Ei,1)}set baseOptions(t){Ce(this.i,0,1,t)}J(t){return this.u={classifications:[]},this.g.addStringToStream(t,"text_in",this.j+1),this.finishProcessing(),this.u}v(){var t=new ui;si(t),Re(t,15,"classifications_out");const e=new Qr;gn(e,xi,this.i);const n=new ni;xe(n,qt("mediapipe.tasks.text.text_classifier.TextClassifierGraph")),ei(n),Re(n,4,"CLASSIFICATIONS:classifications_out"),n.o(e),$e(t,n),this.g.attachProtoListener("classifications_out",((t,e)=>{this.u=Oi(fi(t)),Qi(this,e)})),this.g.attachEmptyPacketListener("classifications_out",(t=>{Qi(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};eo.prototype.classify=eo.prototype.J,eo.prototype.setOptions=eo.prototype.o,eo.createFromModelPath=function(t,e){return Ji(eo,t,{baseOptions:{modelAssetPath:e}})},eo.createFromModelBuffer=function(t,e){return Ji(eo,t,{baseOptions:{modelAssetBuffer:e}})},eo.createFromOptions=function(t,e){return Ji(eo,t,e)};var no=class extends Zi{constructor(t,e){super(new Hi(t,e)),this.u={embeddings:[]},Ce(t=this.i=new Pi,0,1,e=new Ei)}o(t){var e=this.i,n=ke(this.i,vi,2);return n=n?fe(n):new vi,void 0!==t.l2Normalize?ve(n,1,jt(t.l2Normalize)):"l2Normalize"in t&&ve(n,1),void 0!==t.quantize?ve(n,2,jt(t.quantize)):"quantize"in t&&ve(n,2),Ce(e,0,2,n),Xi(this,t)}get baseOptions(){return ke(this.i,Ei,1)}set baseOptions(t){Ce(this.i,0,1,t)}L(t){return this.g.addStringToStream(t,"text_in",this.j+1),this.finishProcessing(),this.u}v(){var t=new ui;si(t),Re(t,15,"embeddings_out");const e=new Qr;gn(e,Ui,this.i);const n=new ni;xe(n,qt("mediapipe.tasks.text.text_embedder.TextEmbedderGraph")),ei(n),Re(n,4,"EMBEDDINGS:embeddings_out"),n.o(e),$e(t,n),this.g.attachProtoListener("embeddings_out",((t,e)=>{t=yi(t),this.u=function(t){return{embeddings:je(t,pi).map((t=>{const e={headIndex:ze(Gt(me(t,3)),0)??-1,headName:ze(Jt(me(t,4)),"")??""};if(void 0!==Fe(t,di,Ue(t,1)))e.floatEmbedding=Se(ke(t,di,Ue(t,1)),1,Vt,void 0===pt?2:4).slice();else{const n=new Uint8Array(0);e.quantizedEmbedding=ke(t,gi,Ue(t,2))?.I()?.i()??n}return e})),timestampMs:ze(Rt(me(t,2)),0)}}(t),Qi(this,e)})),this.g.attachEmptyPacketListener("embeddings_out",(t=>{Qi(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};no.cosineSimilarity=function(t,e){if(t.floatEmbedding&&e.floatEmbedding)t=Ni(t.floatEmbedding,e.floatEmbedding);else{if(!t.quantizedEmbedding||!e.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");t=Ni(Li(t.quantizedEmbedding),Li(e.quantizedEmbedding))}return t},no.prototype.embed=no.prototype.L,no.prototype.setOptions=no.prototype.o,no.createFromModelPath=function(t,e){return Ji(no,t,{baseOptions:{modelAssetPath:e}})},no.createFromModelBuffer=function(t,e){return Ji(no,t,{baseOptions:{modelAssetBuffer:e}})},no.createFromOptions=function(t,e){return Ji(no,t,e)};export{Ci as FilesetResolver,to as LanguageDetector,eo as TextClassifier,no as TextEmbedder};
//# sourceMappingURL=text_bundle_mjs.js.map
