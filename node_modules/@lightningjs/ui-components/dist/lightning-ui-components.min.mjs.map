{"version":3,"file":"lightning-ui-components.min.mjs","sources":["../src/globals/context/logger.js","../src/utils/index.js","../src/globals/context/metrics.js","../src/globals/context/events.js","../../ui-components-theme-base/index.js","../src/globals/context/fonts.js","../src/globals/context/constants.js","../src/globals/context/theme-manager.js","../src/globals/context/index.js","../src/globals/global-update-manager/GlobalUpdateManager.js","../src/mixins/withUpdates/index.js","../src/mixins/withTags/index.js","../src/mixins/withHandleKey/index.js","../src/mixins/withLayout/index.js","../src/mixins/withThemeStyles/utils.js","../src/mixins/withThemeStyles/cache.js","../src/mixins/withThemeStyles/StyleManager.js","../src/mixins/withThemeStyles/index.js","../src/mixins/withExtensions/index.js","../src/components/Base/Base.js","../src/components/Gradient/Gradient.styles.js","../src/components/Gradient/Gradient.js","../src/components/Artwork/Artwork.styles.js","../src/textures/CustomImageTexture.js","../src/components/Artwork/Artwork.js","../src/components/Icon/Icon.styles.js","../src/components/Icon/Icon.js","../src/components/Badge/Badge.styles.js","../src/components/Badge/Badge.js","../src/components/Button/Button.styles.js","../src/components/FocusManager/FocusManager.js","../src/components/NavigationManager/NavigationManager.styles.js","../src/components/NavigationManager/NavigationManager.js","../src/components/Row/Row.styles.js","../src/components/Row/Row.js","../src/components/Surface/Surface.styles.js","../src/components/Surface/Surface.js","../src/components/TextBox/TextBox.styles.js","../src/components/InlineContent/InlineContent.styles.js","../src/components/InlineContent/InlineContent.js","../src/components/Marquee/Marquee.styles.js","../src/shaders/FadeShader.js","../src/components/Marquee/Marquee.js","../src/components/TextBox/TextBox.js","../src/components/Button/Button.js","../src/components/Button/ButtonSmall.styles.js","../src/components/Button/ButtonSmall.js","../src/components/Card/Card.styles.js","../src/components/Card/Card.js","../src/components/Card/CardTitle.styles.js","../src/components/Card/CardTitle.js","../src/components/Card/CardRadio.styles.js","../src/components/Radio/Radio.styles.js","../src/components/Radio/Radio.js","../src/components/Radio/RadioSmall.styles.js","../src/components/Radio/RadioSmall.js","../src/components/Card/CardRadio.js","../src/components/Card/CardSection.styles.js","../src/components/Card/CardSection.js","../src/components/Checkbox/Checkbox.styles.js","../src/components/Checkbox/Checkbox.js","../src/components/Label/Label.styles.js","../src/components/Label/Label.js","../src/mixins/withMarqueeSync/withMarqueeSync.js","../src/components/MetadataBase/MetadataBase.styles.js","../src/components/MetadataBase/MetadataBase.js","../src/components/MetadataTile/MetadataTile.styles.js","../src/components/MetadataTile/MetadataTile.js","../src/components/ProgressBar/ProgressBar.styles.js","../src/components/ProgressBar/ProgressBar.js","../src/components/Tile/Tile.styles.js","../src/components/Tile/Tile.js","../src/components/Provider/Provider.styles.js","../src/components/Provider/Provider.js","../src/components/MetadataCardContent/MetadataCardContent.styles.js","../src/components/MetadataCardContent/MetadataCardContent.js","../src/components/CardContent/CardContent.styles.js","../src/components/CardContent/CardContent.js","../src/components/CardContent/CardContentHorizontal.js","../src/components/CardContent/CardContentHorizontalLarge.styles.js","../src/components/CardContent/CardContentHorizontalLarge.js","../src/components/CardContent/CardContentVertical.styles.js","../src/components/CardContent/CardContentVertical.js","../src/components/CardContent/CardContentVerticalSmall.styles.js","../src/components/CardContent/CardContentVerticalSmall.js","../src/components/Checkbox/CheckboxSmall.styles.js","../src/components/Checkbox/CheckboxSmall.js","../src/components/Column/Column.styles.js","../src/components/Column/Column.js","../src/components/Control/Control.styles.js","../src/components/Control/Control.js","../src/components/Control/ControlSmall.styles.js","../src/components/Control/ControlSmall.js","../src/components/TitleRow/TitleRow.styles.js","../src/components/TitleRow/TitleRow.js","../src/components/ControlRow/ControlRow.styles.js","../src/components/ControlRow/ControlRow.js","../src/components/GridOverlay/GridOverlay.styles.js","../src/components/GridOverlay/GridOverlay.js","../src/components/Input/Input.styles.js","../src/components/Input/Input.js","../src/components/Key/Key.styles.js","../src/components/Key/Key.js","../src/components/Keyboard/Keyboard.styles.js","../src/components/Keyboard/Keyboard.js","../src/components/Keyboard/KeyboardEmail.js","../src/components/Keyboard/KeyboardFullscreen.js","../src/components/Keyboard/KeyboardNumbers.js","../src/components/Keyboard/KeyboardQwerty.js","../src/components/Keyboard/KeyboardInput.js","../src/components/Keyboard/KeyboardSearch.js","../src/components/Knob/Knob.styles.js","../src/components/Knob/Knob.js","../src/components/ListItem/ListItem.styles.js","../src/components/ListItem/ListItem.js","../src/components/ListItem/NestedSlider.styles.js","../src/components/Slider/Slider.styles.js","../src/components/Slider/Slider.js","../src/components/ListItem/NestedSlider.js","../src/components/ListItem/ListItemSlider.styles.js","../src/components/ListItem/ListItemSlider.js","../src/components/ListItem/ListItemPicker.styles.js","../src/components/ListItem/ListItemPicker.js","../src/components/MetadataCard/MetadataCard.js","../src/components/ScrollWrapper/ScrollWrapper.styles.js","../src/components/ScrollWrapper/ScrollSlider.styles.js","../src/components/ScrollWrapper/ScrollSlider.js","../src/components/ScrollWrapper/ScrollWrapper.js","../src/components/Shadow/Shadow.styles.js","../src/components/Shadow/Shadow.js","../src/components/Slider/SliderLarge.styles.js","../src/components/Slider/SliderLarge.js","../src/components/TabBar/ContentSwitcher.js","../src/components/TabBar/TabBar.styles.js","../src/components/TabBar/TabBar.js","../src/components/TabBar/Tab.styles.js","../src/components/TabBar/Tab.js","../src/components/Toggle/Toggle.styles.js","../src/components/Toggle/Toggle.js","../src/components/Toggle/ToggleSmall.styles.js","../src/components/Toggle/ToggleSmall.js","../src/textures/Bubble.js","../src/components/Tooltip/Tooltip.styles.js","../src/components/Tooltip/Tooltip.js","../src/globals/pool/index.js","../src/mixins/withAnnouncer/Speech.js","../src/mixins/withAnnouncer/abbreviations.js","../src/mixins/withAnnouncer/index.js","../src/mixins/withClassCache/index.js","../src/mixins/withSelections/index.js","../src/mixins/withEditItems/index.js","../src/textures/LinearGradient.js","../src/textures/Circle.js","../src/textures/Arrow.js","../src/textures/Line.js","../src/docs/story-components/SignalButton.js"],"sourcesContent":["﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nclass Logger {\n  constructor() {\n    this._logCallback = undefined;\n    this._prefix = 'LightningUI';\n    this._debug = false;\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  set debug(value) {\n    this._debug = Boolean(value);\n  }\n\n  get logCallback() {\n    return this._logCallback;\n  }\n\n  set logCallback(value) {\n    if ('function' !== typeof value) {\n      this.warn(\n        `logCallback value must be a function, instead received ${typeof value}`\n      );\n      return;\n    }\n    this._logCallback = value;\n  }\n\n  log(...args) {\n    if (this._logCallback) {\n      this._logCallback({ level: 'log', payload: args });\n    }\n    if (this.debug) {\n      // eslint-disable-next-line\n      console.log(this._prefix, ...args);\n    }\n  }\n\n  info(...args) {\n    if (this._logCallback) {\n      this._logCallback({ level: 'info', payload: args });\n    }\n    if (this.debug) {\n      // eslint-disable-next-line\n      console.info(this._prefix, ...args);\n    }\n  }\n\n  warn(...args) {\n    if (this._logCallback) {\n      this._logCallback({ level: 'warn', payload: args });\n    }\n    if (this.debug) {\n      console.warn(this._prefix, ...args);\n    }\n  }\n\n  error(...args) {\n    if (this._logCallback) {\n      this._logCallback({ level: 'error', payload: args });\n    }\n    if (this.debug) {\n      console.error(this._prefix, ...args);\n    }\n  }\n}\n\nconst loggerInstance = new Logger();\n\nexport { loggerInstance as default, Logger };\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport logger from '../globals/context/logger';\n\n/**\n *\n * Layout Utils\n *\n */\n\n/**\n * Copyright (c) 2009-2012 Jeremy Ashkenas, DocumentCloud\n * Licensed under the MIT License\n * Copyright (c) 2012-2018 The Debounce Contributors. See CONTRIBUTORS\n * Licensed under the MIT License\n */\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear'\n * that is a function which will clear the timer to prevent previously scheduled executions.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {function} function to wrap\n * @param {number} timeout in ms (`100`)\n * @param {boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nexport function debounce(func, wait, immediate) {\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  }\n\n  var debounced = function () {\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function () {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  debounced.flush = function () {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n}\n\nexport function getEuclideanDistance(xA, yA, xB, yB) {\n  const xDiff = xA - xB;\n  const yDiff = yA - yB;\n  return Math.sqrt(Math.pow(xDiff, 2) + Math.sqrt(Math.pow(yDiff, 2)));\n}\n\n/**\n * Returns the shortest distance between a coordinate and a corner or center of an element.\n * @param {[number, number]} coordinate\n * @param {Element} element\n *\n * @return {number} shortest distance between a coordinate and a corner or center of an element.\n */\nexport function getShortestDistance(coordinate, element) {\n  const [xA, yA] = coordinate;\n  const [xB, yB] = element.core ? element.core.getAbsoluteCoords(0, 0) : [0, 0];\n\n  const distanceToStart = getEuclideanDistance(xA, yA, xB, yB);\n  const distanceToMiddle = getEuclideanDistance(\n    xA,\n    yA,\n    xB + element.w / 2,\n    yB + element.h / 2\n  );\n  const distanceToEnd = getEuclideanDistance(\n    xA,\n    yA,\n    xB + element.w,\n    yB + element.h\n  );\n\n  return Math.min(distanceToStart, distanceToMiddle, distanceToEnd);\n}\n\nexport function isComponentOnScreen(component, offsets = {}) {\n  if (!component) return false;\n\n  const {\n    w,\n    h,\n    core: { renderContext: { px, py }, _scissor: scissor = [] } = {}\n  } = component;\n  const stageH = component.stage.h / component.stage.getRenderPrecision();\n  const stageW = component.stage.w / component.stage.getRenderPrecision();\n\n  let finalX = px;\n  let finalY = py;\n  // keep track of the different between the the absolute world position and relative position\n  const relativeOffsetX = px - component.x;\n  const relativeOffsetY = py - component.y;\n  const offsetX = offsets.offsetX - relativeOffsetX || 0;\n  const offsetY = offsets.offsetY - relativeOffsetY || 0;\n  // if the current component is animating, apply the relative offset to the transition value\n  if (component.transition('x')) {\n    finalX = px - component.x + component.transition('x').targetValue;\n  }\n  if (component.transition('y')) {\n    finalY = py - component.y + component.transition('y').targetValue;\n  }\n  // apply any offset passed into the function\n  // this is mainly used to parent components that are transitioning,\n  // like in the case of Rows nested inside of Columns where the Rows themselves do not animate,\n  // but their parent container does\n  finalX += offsetX;\n  finalY += offsetY;\n\n  const wVis = finalX >= 0 && finalX + w <= stageW;\n  const hVis = finalY >= 0 && finalY + h <= stageH;\n\n  if (!wVis || !hVis) return false;\n\n  if (scissor && scissor.length) {\n    const [\n      leftBounds = null,\n      topBounds = null,\n      clipWidth = null,\n      clipHeight = null\n    ] = scissor;\n\n    const withinLeftClippingBounds =\n      Math.round(finalX + w) >= Math.round(leftBounds);\n    const withinRightClippingBounds =\n      Math.round(finalX) <= Math.round(leftBounds + clipWidth);\n    const withinTopClippingBounds =\n      Math.round(finalY + h) >= Math.round(topBounds);\n    const withinBottomClippingBounds =\n      Math.round(finalY + h) <= Math.round(topBounds + clipHeight);\n\n    return (\n      withinLeftClippingBounds &&\n      withinRightClippingBounds &&\n      withinTopClippingBounds &&\n      withinBottomClippingBounds\n    );\n  }\n\n  return true;\n}\n\n/**\n * Returns the width of an item based on upCount.\n *\n * @param {number} upCount\n * @returns {number}\n */\nexport function getWidthByUpCount(theme, upCount = 1) {\n  const screenW = theme.layout.screenW;\n  const columnCount = theme.layout.columnCount;\n  const marginX = theme.layout.marginX;\n  const gutterX = theme.layout.gutterX;\n\n  if (upCount < 1 || upCount > columnCount) {\n    console.error(\n      `Column expects a number between 1 & ${columnCount}. Received ${upCount}`\n    );\n    return;\n  }\n\n  // the screen width, minus the margin x on each side\n  const columnWidth = screenW - marginX * 2;\n  // the total space of column gaps in between items\n  const columnGapTotal = (upCount - 1) * gutterX;\n  // the remaining amount of space left for all items\n  const totalColumnsWidth = columnWidth - columnGapTotal;\n  // the width of each item in that remaining width\n  return totalColumnsWidth / upCount;\n}\n\n/**\n * Returns the width of an item based on how many columns to span.\n *\n * @param {number} columnSpan\n * @returns {number}\n */\nexport function getWidthByColumnSpan(theme, columnSpan) {\n  const columnCount = theme.layout.columnCount;\n  const gutterX = theme.layout.gutterX;\n\n  return (\n    getWidthByUpCount(theme, columnCount) * columnSpan +\n    gutterX * (columnSpan - 1)\n  );\n}\n\n/**\n * Returns the x position of a specified column number based on the theme's columnCount.\n *\n * @param {number} column\n * @returns {number}\n */\nexport function getColumnX(theme, column = 1) {\n  const columnCount = theme.layout.columnCount;\n  const marginX = theme.layout.marginX;\n  const gutterX = theme.layout.gutterX;\n\n  return marginX + (getWidthByUpCount(theme, columnCount) + gutterX) * column;\n}\n\n/**\n * Determines the width and height of an item based off the data passed into the item\n * (either all necessary parameters to calculate the dimensions dynamically,\n * OR all the necessary parameters to hard set the dimensions).\n *\n * @param { object } obj\n * @param { object } fallback\n *\n * @return { { number, number } }\n */\nexport function getDimensions(theme, obj = {}, fallback = {}) {\n  const { w, h, ratioX, ratioY, upCount } = obj;\n  const fallbackW = fallback.w || 0;\n  const fallbackH = fallback.h || 0;\n  let dimensions = {};\n\n  // hard set width and height values were passed in and should override other params\n  if (w && h) {\n    dimensions = {\n      w,\n      h: h\n    };\n  } else if (h && ratioX && ratioY) {\n    // hard set height and ratio values were passed in, meaning the row has items with mixed ratios, so the width needs to be calculated\n    dimensions = {\n      w: Math.round((h * ratioX) / ratioY),\n      h: h\n    };\n    // calculate dynamic width and height based off item ratios\n  } else if (ratioX && ratioY && upCount) {\n    dimensions = getItemRatioDimensions(theme, ratioX, ratioY, upCount);\n  } else if (h && upCount) {\n    // calculate dynamic width based off a row upcount and a given height\n    dimensions = {\n      w: Math.round(getWidthByUpCount(theme, upCount)),\n      h: h\n    };\n  } else if (h) {\n    dimensions = {\n      w: fallbackW,\n      h: h\n    };\n  } else if (w) {\n    dimensions = {\n      w: w,\n      h: fallbackH\n    };\n  } else {\n    // not enough information was provided to properly size the component\n    dimensions = {\n      w: fallbackW,\n      h: fallbackH\n    };\n  }\n\n  dimensions = {\n    ...dimensions,\n    ratioX,\n    ratioY,\n    upCount\n  };\n\n  return dimensions;\n}\n\n/**\n * Calculates the width and height of an item based off the given ratios\n * and number of columns across the screen that should be visible before peaking\n *\n * @param { number } ratioX\n * @param { number } ratioY\n * @param { number } upCount\n *\n * @return { { number, number } }\n */\nexport function getItemRatioDimensions(theme, ratioX, ratioY, upCount) {\n  let w, h;\n\n  if (ratioX && ratioY && upCount) {\n    w = Math.round(getWidthByUpCount(theme, upCount));\n    h = Math.round((w / ratioX) * ratioY);\n  } else {\n    w = 0;\n    h = 0;\n  }\n  return { w, h };\n}\n\n/**\n * /Layout utils\n */\n\nexport function getAspectRatioW(h, ratio = '16:9', seperator = ':') {\n  const [ratioW, ratioH] = ratio.split(seperator);\n  return h * (ratioW / ratioH);\n}\n\nexport function getAspectRatioH(w, ratio = '16:9', seperator = ':') {\n  const [ratioW, ratioH] = ratio.split(seperator);\n  return w / (ratioW / ratioH);\n}\n\n/**\n * Combines rgb hex string and alpha into argb hexadecimal number\n * @param {string|number} hex - 6 alphanumeric characters between 0-f or argb hexadecimal number\n * @param {number} [alpha] - number between 0-1 (0 is invisible, 1 is opaque)\n */\nexport function getHexColor(hex, alpha = 1) {\n  if (!hex) {\n    return 0x00;\n  }\n\n  if (typeof hex === 'number') {\n    hex = hex.toString(16).slice(2);\n  }\n\n  hex = hex.replace('#', '');\n\n  const hexAlpha = Math.round(alpha * 255).toString(16);\n  const str = `0x${hexAlpha}${hex}`;\n  return Number(str);\n}\n\n/**\n * Returns valid string of HEX color\n *\n * @param {string} color\n * @param {boolean} fill\n */\nexport function getValidColor(color) {\n  if (typeof color === 'string' || typeof color === 'number') {\n    if (/^0x[0-9a-fA-F]{8}/g.test(color)) {\n      // User enters a valid 0x00000000 hex code\n      return Number(color);\n    } else if (/^#[0-9a-fA-F]{6}/g.test(color)) {\n      // User enters valid #000000 hex code\n      return getHexColor(color.substr(1, 6));\n    } else if (typeof color === 'string' && /^[0-9]{8,10}/g.test(color)) {\n      return parseInt(color);\n    } else if (\n      typeof color === 'number' &&\n      /^[0-9]{8,10}/g.test(color.toString())\n    ) {\n      return color;\n    } else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n      return rgba2argb(color);\n    } else if (typeof color === 'string' && color.indexOf('rgb') > -1) {\n      const rgba = [...color.replace(/rgb\\(|\\)/g, '').split(','), '255'];\n      return lng.StageUtils.getArgbNumber(rgba);\n    }\n  }\n  return null;\n}\n\nfunction simplifyFraction([numerator, denominator]) {\n  for (let i = numerator; i > 0; i--) {\n    if (!(numerator % i) && !(denominator % i)) {\n      return [numerator / i, denominator / i];\n    }\n  }\n}\n\n/**\n * Reduce a fraction represented as a string\n * @param {string} - a reprentation of a fraction in this format 16/9\n * @return {string} - a reduced representation of the fraction\n */\nexport function reduceFraction(string) {\n  return simplifyFraction(string.split('/').map(n => +n)).join('/');\n}\n\n/**\n * Gets the value at `path` of `object`.\n * @param {object} object\n * @param {string|Array} path\n * @return {*} value if exists else undefined\n */\nexport const getValFromObjPath = (object, path) => {\n  if (typeof path === 'string')\n    path = path.split('.').filter(key => key.length);\n  return path.reduce((dive, key) => dive && dive[key], object);\n};\n\n/**\n * Lightning uses ARGB values, use this function\n * to convert know color to Lightning value\n * https://ifpb.github.io/javascript-guide/ecma/expression-and-operator/argb.html\n */\nexport function rgba2argb(rgbaStr) {\n  const rgba = rgbaStr.replace(/rgba\\(|\\)/g, '').split(',');\n  // Multiple Alpha Value\n  rgba[3] = rgba[3] * 255;\n  return lng.StageUtils.getArgbNumber(rgba);\n}\n\nexport function capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport function lowercaseFirstLetter(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1);\n}\n\n/**\n * Helpers for lng.Tools.getRoundRect\n */\nexport const RoundRect = {\n  /**\n   * Returns a value that will render as the given width (w)\n   * when passed to lng.Tools.getRoundRect\n   * @param {number} w - px value for expected width\n   * @param {*} options\n   * @param {number} options.padding - px value for both left and right padding\n   * @param {number} options.paddingLeft - px value for left padding, overrides options.padding\n   * @param {number} options.paddingRight - px value for right padding, overrides options.padding\n   * @param {number} options.strokeWidth - px value for stroke width\n   */\n  getWidth(w, options = {}) {\n    const { padding, paddingLeft, paddingRight, strokeWidth } = {\n      padding: 0,\n      paddingLeft: 0,\n      paddingRight: 0,\n      strokeWidth: 0,\n      ...options\n    };\n\n    if (!w) return 0;\n\n    return (\n      w - (paddingLeft || padding) - (paddingRight || padding) - strokeWidth\n    );\n  },\n  /**\n   * Returns a value that will render as the given height (h)\n   * when passed to lng.Tools.getRoundRect\n   * @param {number} h - px value for expected width\n   * @param {*} options\n   * @param {number} options.padding - px value for both bottom and top padding\n   * @param {number} options.paddingBottom - px value for bottom padding, overrides options.padding\n   * @param {number} options.paddingTop - px value for top padding, overrides options.padding\n   * @param {number} options.strokeWidth - px value for stroke width\n   */\n  getHeight(h, options = {}) {\n    const { padding, paddingBottom, paddingTop, strokeWidth } = {\n      padding: 0,\n      paddingBottom: 0,\n      paddingTop: 0,\n      strokeWidth: 0,\n      ...options\n    };\n\n    if (!h) return 0;\n\n    return (\n      h - (paddingBottom || padding) - (paddingTop || padding) - strokeWidth\n    );\n  }\n};\n\n/**\n * Merges two objects together and returns the duplicate.\n *\n * @param {object} target - object to be cloned\n * @param {object} [object] - secondary object to merge into clone\n */\nexport function clone(target, object) {\n  // Make sure getters and setters are applied correctly\n  const _clone = Object.create(Object.getPrototypeOf(target));\n  Object.defineProperties(_clone, Object.getOwnPropertyDescriptors(target));\n  if (!object || target === object) return _clone;\n\n  for (const key in object) {\n    const value = object[key];\n    if (target.hasOwnProperty(key)) {\n      _clone[key] = getMergeValue(key, target, object);\n    } else {\n      _clone[key] = value;\n    }\n  }\n\n  return _clone;\n}\n\nfunction getMergeValue(key, target, object) {\n  const targetVal = target[key];\n  const objectVal = object[key];\n  const targetValType = typeof targetVal;\n  const objectValType = typeof objectVal;\n\n  if (\n    targetValType !== objectValType ||\n    objectValType === 'function' ||\n    Array.isArray(objectVal)\n  ) {\n    return objectVal;\n  }\n\n  if (objectVal && objectValType === 'object') {\n    return clone(targetVal, objectVal);\n  }\n\n  return objectVal;\n}\n\n/**\n * Returns the rendered width of a given text texture\n * @param {object} text - text texture properties\n * @param {string} text.text - text value\n * @param {string} text.fontStyle - css font-style property\n * @param {(string|number)} text.fontWeight - css font-weight property\n * @param {string} [fontSize=0] - css font-size property (in px)\n * @param {string} [text.fontFamily=sans-serif] - css font-weight property\n * @param {string} text.fontFace - alias for fontFamily\n *\n * @return {number} text width\n * */\nexport function measureTextWidth(text = {}) {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  const {\n    fontStyle,\n    fontWeight,\n    fontSize,\n    fontFamily = text.fontFace || 'sans-serif'\n  } = text;\n  const fontCss = [\n    fontStyle,\n    fontWeight,\n    fontSize ? `${fontSize}px` : '0',\n    `'${fontFamily}'`\n  ]\n    .filter(Boolean)\n    .join(' ');\n  ctx.font = fontCss;\n  const textMetrics = ctx.measureText(text.text || '');\n\n  return Math.round(textMetrics.width);\n}\n\n/**\n * Returns first argument that is a number. Useful for finding ARGB numbers. Does not convert strings to numbers\n * @param {...*} number - maybe a number\n **/\nexport function getFirstNumber(...numbers) {\n  return numbers.find(Number.isFinite);\n}\n\n/**\n * Naively looks for dimensional prop (i.e. w, h, x, y, etc.), first searching for\n * a transition target value then defaulting to the current set value\n * @param {string} prop - property key\n * @param {lng.Component} component - Lightning component to operate against\n */\nexport function getDimension(prop, component) {\n  if (!component) return 0;\n\n  const transition = component.transition(prop);\n  if (transition.isRunning()) return transition.targetValue;\n\n  let renderProp = prop;\n  if (prop === 'w') {\n    renderProp = 'renderWidth';\n  } else if (prop === 'h') {\n    renderProp = 'renderHeight';\n  }\n  return component[renderProp] || component[prop];\n}\n\nexport const getX = component => getDimension('x', component);\nexport const getY = component => getDimension('y', component);\nexport const getW = component => getDimension('w', component);\nexport const getH = component => getDimension('h', component);\n\n/**\n * Array.prototype.flat() is not supported in WPE Browser\n *\n * @param {array} arr\n *\n * @return {array}\n */\nexport function flatten(arr) {\n  return arr.reduce(\n    (flat, toFlatten) =>\n      flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten),\n    []\n  );\n}\n\nexport function objectPropertyOf(object, path) {\n  return path.reduce(\n    (obj, key) => (obj && obj[key] !== 'undefined' ? obj[key] : undefined),\n    object\n  );\n}\n\nexport function stringifyCompare(objA, objB) {\n  return JSON.stringify(objA) === JSON.stringify(objB);\n}\n\nexport function delayForAnimation(callback, delay = 16) {\n  setTimeout(callback, delay);\n}\n\nexport function downloadFile(content, fileName, contentType) {\n  const validContentTypes = ['plain', 'json'];\n  if (!validContentTypes.includes(contentType)) {\n    contentType = 'plain';\n  }\n  const dataStr =\n    `data:text/${contentType};charset=utf-8,` +\n    encodeURIComponent(JSON.stringify(content));\n  const dlAnchorElem = document.createElement('a');\n  dlAnchorElem.setAttribute('href', dataStr);\n  dlAnchorElem.setAttribute('download', fileName);\n  dlAnchorElem.click();\n}\n\nexport const degreesToRadians = deg => deg * (Math.PI / 180);\n\n/**\n *\n * Markup utils\n *\n */\n\nconst MARKUP_STRING_PATTERN = /({ICON.*?}|{BADGE:.*?}|{NEWLINE}|{TEXT:.*?})/g;\n\nexport function isMarkupString(str = '') {\n  if (typeof str !== 'string') {\n    return false;\n  }\n  return MARKUP_STRING_PATTERN.test(str);\n}\n\n/**\n * Returns an array of strings and icon, badge, newline, and text objects from a string using the syntax:\n * 'This is an {ICON:<title>|<url>} and {BADGE:<title>} badge test with a {NEWLINE} newline and {TEXT:<text>|<style>}.'\n *\n * i.e. 'This is an {ICON:settings|./assets/icons/settings.png} icon and {BADGE:HD} badge with a{NEWLINE} and {TEXT:red text|red}.'\n *  would create the array:\n *  [\n *    'This is an ',\n *    { icon: './assets/icons/settings.png', title: 'settings' },\n *    ' icon and ',\n *    { badge: 'HD' },\n *    ' badge with a',\n *    { newline: true },\n *    ' and ',\n *    { text: 'red text', style: 'red' },\n *    '.'\n *  ]\n *\n * @param {(string|object)} str\n *\n * @return {array}\n */\nexport function parseInlineContent(str = '') {\n  const content = [];\n  if ((str && typeof str === 'string') || str.text) {\n    const string = typeof str === 'string' ? str : str.text;\n    const iconRegEx = /^{ICON:(.*?)?\\|(.*?)?}$/g;\n    const badgeRegEx = /^{BADGE:(.*?)}$/g;\n    const newlineRegEx = /^{NEWLINE}$/g;\n    const textRegEx = /^{TEXT:(.*?)?\\|(.*?)?}$/g;\n\n    const splitStr = string.split(MARKUP_STRING_PATTERN);\n\n    if (splitStr && splitStr.length) {\n      splitStr.forEach(item => {\n        let formattedItem = item;\n        const badge = badgeRegEx.exec(item);\n        const icon = iconRegEx.exec(item);\n        const newline = newlineRegEx.exec(item);\n        const text = textRegEx.exec(item);\n\n        if (badge && badge[1]) {\n          formattedItem = { badge: badge[1] };\n        } else if (icon && icon[1]) {\n          formattedItem = { title: icon[1], icon: icon[2] || icon[1] };\n        } else if (newline) {\n          formattedItem = { newline: true };\n        } else if (text && text[1]) {\n          formattedItem = { text: text[1], style: text[2] };\n        }\n        content.push(formattedItem);\n      });\n    }\n  }\n  return content;\n}\n\n/**\n * Given any number of arguments, returns the greatest number passed to the function.\n * If no valid numbers are passed in (ex. NaN, undefined, null), `undefined` will be returned.\n * @param {...*} arguments Any number of arguments may be passed into the function.\n *\n * @return {number|undefined} The greatest number passed in as an argument or `undefined` if no valid number was passed in.\n */\nexport function max() {\n  if (!arguments) {\n    return;\n  }\n\n  const args = Array.from(arguments).filter(arg => !isNaN(arg) && arg != null);\n\n  if (!args.length) {\n    return;\n  }\n\n  return Math.max(...args);\n}\n\n/**\n * Abstracts logic for conditionally forcing a zIndex Context on a component so that\n * any child components with zIndex are relative to it, and not the global zIndex context.\n * @param {lng.Component} component\n * @param {number} zOffset\n */\nexport function createConditionalZContext(component, zOffset) {\n  if (!component.zIndex && typeof zOffset !== 'undefined' && zOffset !== 0) {\n    component.forceZIndexContext = true;\n    component.zIndex = 0;\n  }\n}\n\n/**\n * Runs a side effect function when any values of specified properties on an element change.\n * @param {object} options - defines the `element`, `watchProps`, and `sideEffect` options\n * @param {lng.Element} options.element - Lightning element on which property changes will watched\n * @param {String[]} options.watchProps - properties that when their value changes a side effect function is invoked\n * @param {function} options.sideEffect - function to be invoked when a watched property's value changes\n * @returns {lng.Element}\n */\nexport function watchForUpdates({\n  element,\n  watchProps = [],\n  sideEffect = () => {}\n}) {\n  if (!element?.isElement) {\n    logger.error(\n      `watchForUpdates: Expected a Lightning Element passed to element parameter, received ${typeof element}`\n    );\n  }\n\n  const initialOnAfterUpdate = element.__core?._onAfterUpdate;\n\n  element.onAfterUpdate = function (element) {\n    let hasChanged = false;\n\n    watchProps.forEach(prop => {\n      if (element.transition(prop) && element.transition(prop).isRunning()) {\n        return;\n      }\n\n      const prevValueKey = `__watchPrev${prop}`;\n      const nextValue = element[prop];\n\n      if (nextValue !== element[prevValueKey]) {\n        element[prevValueKey] = nextValue;\n        hasChanged = true;\n      }\n    });\n\n    if (hasChanged) {\n      sideEffect();\n    }\n\n    // if an element already has an onAfterUpdate function, preserve that behavior\n    if (initialOnAfterUpdate) {\n      initialOnAfterUpdate(element);\n    }\n  }.bind(this);\n\n  return element;\n}\n\n/**\n * Given a Lightning text alignment option (left, right, center),\n * return the Lightning flexbox equivalent.\n *\n * @param {string} align\n * @returns {string}\n */\nexport function convertTextAlignToFlexJustify(align) {\n  switch (align) {\n    case 'left':\n      return 'flex-start';\n    case 'center':\n      return 'center';\n    case 'right':\n      return 'flex-end';\n    default:\n      // if there is no alignment passed in, the Lightning Text default is \"left\"\n      console.warn(\n        `Expected \"textAlign\" values are \"left,\" \"center,\" and \"right,\" but instead, ${align} was received and will fall back to \"left.\"`\n      );\n      return 'flex-start';\n  }\n}\n\n/**\n * Prevents user input radius from inverting.\n *\n * @param {number} user input radius\n * @param {number} width\n * @param {number} height\n * @param {number} offset\n * @return {number} max radius for object before border begins to invert\n */\nexport function getMaxRoundRadius(radius, width, height, offset = 0) {\n  const maxRadius = r =>\n    Math.max(0, Math.min(r, Math.min(width, height) / 2) + offset);\n  return Array.isArray(radius)\n    ? radius.map(r => Number(maxRadius(r)) || 0)\n    : Number(maxRadius(radius)) || 0;\n}\n\nconst utils = {\n  isMarkupString,\n  capitalizeFirstLetter,\n  degreesToRadians,\n  downloadFile,\n  delayForAnimation,\n  stringifyCompare,\n  objectPropertyOf,\n  flatten,\n  getDimension,\n  getFirstNumber,\n  measureTextWidth,\n  clone,\n  getMergeValue,\n  RoundRect,\n  rgba2argb,\n  getValFromObjPath,\n  reduceFraction,\n  getValidColor,\n  getHexColor,\n  getAspectRatioH,\n  getAspectRatioW,\n  getWidthByUpCount,\n  getDimensions,\n  getWidthByColumnSpan,\n  createConditionalZContext,\n  watchForUpdates,\n  convertTextAlignToFlexJustify,\n  getMaxRoundRadius\n};\n\nexport default utils;\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport logger from './logger';\nclass Metrics {\n  constructor() {\n    this._keyMetricsCallback = undefined;\n  }\n\n  get keyMetricsCallback() {\n    return this._keyMetricsCallback;\n  }\n\n  set keyMetricsCallback(value) {\n    if (-1 < ['undefined', 'function'].indexOf(typeof value)) {\n      this._keyMetricsCallback = value;\n      return;\n    }\n    logger.warn(\n      `context keyMetricsCallback expected a function. Received ${typeof value}`\n    );\n  }\n}\n\nconst metricsInstance = new Metrics();\n\nexport { metricsInstance as default, Metrics };\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nconst eventEmitterInstance = new lng.EventEmitter();\n\nexport default eventEmitterInstance;\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport default {\n  name: 'Base Lightning TV',\n  alpha: {\n    primary: 1,\n    secondary: 0.7,\n    tertiary: 0.1,\n    inactive: 0.5,\n    full: 1,\n    none: 0,\n    alpha1: 0.1,\n    alpha2: 0.3,\n    alpha3: 0.5,\n    alpha4: 0.7,\n    alpha5: 0.9\n  },\n  animation: {\n    duration: {\n      none: 0,\n      xfast: 0.1,\n      fast: 0.25,\n      normal: 0.5,\n      slow: 0.75,\n      xslow: 0.9\n    },\n    delay: {\n      none: 0,\n      xfast: 0.01,\n      fast: 0.025,\n      normal: 0.05,\n      slow: 0.075,\n      xslow: 0.09\n    },\n    expressive: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    expressiveEntrance: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    expressiveExit: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    standard: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    standardEntrance: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    standardExit: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    utility: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    utilityEntrance: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    utilityExit: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    }\n  },\n  asset: {\n    arrowLeft:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==',\n    arrowRight:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=',\n    backspaceOutline:\n      'data:image/png;base64,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',\n    check:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=='\n  },\n  color: {\n    white: ['#ffffff', 1],\n    black: ['#000000', 1],\n    grey: ['#929096', 1],\n    red: ['#e74c3c', 1],\n    orange: ['#dc7633', 1],\n    yellow: ['#f7dc6f', 1],\n    green: ['#2Ecc71', 1],\n    blue: ['#93a9fd', 1],\n    purple: ['#663399', 1],\n    palette: {\n      'grey-05': ['#f8f7fa', 1],\n      'grey-40': ['#929096', 1],\n      'grey-70': ['#48474b', 1],\n      'grey-90': ['#181819', 1],\n      'blue-20': ['#becffe', 1],\n      'blue-40': ['#93a9fd', 1],\n      'blue-90': ['#000033', 1]\n    },\n    material: ['#181819', 1],\n    materialBrand: ['#000033', 1],\n    overlay: ['#181819', 0.7],\n    textNeutral: ['#f8f7fa', 1],\n    textNeutralSecondary: ['#f8f7fa', 0.7],\n    textNeutralTertiary: ['#f8f7fa', 0.1],\n    textNeutralDisabled: ['#f8f7fa', 0.5],\n    textInverse: ['#181819', 1],\n    textInverseSecondary: ['#181819', 0.7],\n    textInverseTertiary: ['#181819', 0.1],\n    textInverseDisabled: ['#181819', 0.5],\n    textBrand: ['#93a9fd', 1],\n    textBrandSecondary: ['#93a9fd', 0.7],\n    textBrandTertiary: ['#93a9fd', 0.1],\n    textBrandDisabled: ['#93a9fd', 0.5],\n    textPositive: ['#2Ecc71', 1],\n    textNegative: ['#e74c3c', 1],\n    textInfo: ['#93a9fd', 1],\n    textCaution: ['#dc7633', 1],\n    fillTransparent: ['#ffffff', 0],\n    fillNeutral: ['#f8f7fa', 1],\n    fillNeutralSecondary: ['#f8f7fa', 0.7],\n    fillNeutralTertiary: ['#f8f7fa', 0.1],\n    fillNeutralDisabled: ['#f8f7fa', 0.5],\n    fillInverse: ['#181819', 1],\n    fillInverseSecondary: ['#181819', 0.7],\n    fillInverseTertiary: ['#181819', 0.1],\n    fillInverseDisabled: ['#181819', 0.5],\n    fillBrand: ['#93a9fd', 1],\n    fillBrandSecondary: ['#93a9fd', 0.7],\n    fillBrandTertiary: ['#93a9fd', 0.1],\n    fillBrandDisabled: ['#93a9fd', 0.5],\n    fillPositive: ['#2Ecc71', 1],\n    fillNegative: ['#e74c3c', 1],\n    fillInfo: ['#93a9fd', 1],\n    fillCaution: ['#dc7633', 1],\n    strokeNeutral: ['#f8f7fa', 1],\n    strokeNeutralSecondary: ['#f8f7fa', 0.7],\n    strokeNeutralTertiary: ['#f8f7fa', 0.1],\n    strokeNeutralDisabled: ['#f8f7fa', 0.5],\n    strokeInverse: ['#181819', 1],\n    strokeInverseSecondary: ['#181819', 0.7],\n    strokeInverseTertiary: ['#181819', 0.1],\n    strokeInverseDisabled: ['#181819', 0.5],\n    strokeBrand: ['#93a9fd', 1],\n    strokeBrandSecondary: ['#93a9fd', 0.7],\n    strokeBrandTertiary: ['#93a9fd', 0.1],\n    strokeBrandDisabled: ['#93a9fd', 0.5],\n    strokePositive: ['#2Ecc71', 1],\n    strokeNegative: ['#e74c3c', 1],\n    strokeInfo: ['#93a9fd', 1],\n    strokeCaution: ['#dc7633', 1],\n    interactiveNeutral: ['#ffffff', 0.1],\n    interactiveNeutralFocus: ['#ffffff', 1],\n    interactiveNeutralFocusSoft: ['#ffffff', 0.1],\n    interactiveInverse: ['#48474b', undefined],\n    interactiveInverseFocus: ['#48474b', 1],\n    interactiveInverseFocusSoft: ['#48474b', 0.1],\n    interactiveBrand: ['#becffe', 0.1],\n    interactiveBrandFocus: ['#becffe', 1],\n    interactiveBrandFocusSoft: ['#becffe', 0.1],\n    shadowNeutral: ['#000000', 0.7],\n    shadowNeutralFocus: ['#000000', 0.7],\n    shadowNeutralFocusSoft: ['#000000', 0.7],\n    shadowNeutralText: ['#000000', 1],\n    shadowInverse: ['#000000', 0.7],\n    shadowInverseFocus: ['#000000', 0.7],\n    shadowInverseFocusSoft: ['#000000', 0.7],\n    shadowInverseText: ['#000000', 1],\n    shadowBrand: ['#000000', 0.7],\n    shadowBrandFocus: ['#000000', 0.7],\n    shadowBrandFocusSoft: ['#000000', 0.7],\n    shadowBrandText: ['#000000', 1]\n  },\n  componentConfig: {\n    Keyboard: {\n      style: {\n        keyProps: {\n          delete: {\n            title: null,\n            icon: 'data:image/png;base64,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'\n          }\n        }\n      }\n    }\n  },\n  font: [],\n  layout: {\n    columnCount: 10,\n    focusScale: 1.2,\n    gutterX: 20,\n    gutterY: 20,\n    marginX: 150,\n    marginY: 150,\n    safe: 50,\n    screenW: 1920,\n    screenH: 1080\n  },\n  radius: { none: 0, xs: 2, sm: 4, md: 8, lg: 16, xl: 24 },\n  spacer: {\n    none: 0,\n    xxs: 2,\n    xs: 4,\n    sm: 8,\n    md: 10,\n    lg: 20,\n    xl: 30,\n    xxl: 40,\n    xxxl: 50\n  },\n  stroke: { none: 0, sm: 2, md: 4, lg: 6, xl: 8 },\n  typography: {\n    display1: {\n      fontFamily: 'Arial',\n      fontSize: 75,\n      lineHeight: 85,\n      fontStyle: '500',\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    display2: {\n      fontFamily: 'Arial',\n      fontSize: 50,\n      lineHeight: 60,\n      fontStyle: '500',\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    headline1: {\n      fontFamily: 'Arial',\n      fontSize: 35,\n      fontStyle: '500',\n      lineHeight: 48,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    headline2: {\n      fontFamily: 'Arial',\n      fontSize: 30,\n      fontStyle: '500',\n      lineHeight: 40,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    headline3: {\n      fontFamily: 'Arial',\n      fontSize: 25,\n      fontStyle: '500',\n      lineHeight: 36,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    body1: {\n      fontFamily: 'Arial',\n      fontSize: 25,\n      fontStyle: '300',\n      lineHeight: 40,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    body2: {\n      fontFamily: 'Arial',\n      fontSize: 22,\n      fontStyle: '300',\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    body3: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontStyle: '300',\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    button1: {\n      fontFamily: 'Arial',\n      fontSize: 25,\n      fontStyle: '500',\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    button2: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontStyle: '500',\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    callout1: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontStyle: '500',\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    caption1: {\n      fontFamily: 'Arial',\n      fontSize: 15,\n      fontStyle: '500',\n      lineHeight: 24,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    tag1: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontStyle: '500',\n      lineHeight: 24,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    footnote1: {\n      fontFamily: 'Arial',\n      fontSize: 22,\n      fontStyle: '300',\n      lineHeight: 30,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    }\n  }\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport logger from './logger';\n\nlet customFontFaces = [];\n\n/**\n * Function to get a list of all custom fonts that have been loaded using the FontFace Web API from the theme\n * @return {Array}\n */\nexport function getCustomFontFaces() {\n  return customFontFaces;\n}\n\n/**\n * Function to load all the fonts from the theme\n */\nexport const fontLoader = fonts => {\n  const promises = [];\n  // Loop through all fonts in the array and attempt to load them using the FontFace Web API\n  for (let i = 0; i < fonts.length; i++) {\n    const { family, src, descriptors } = fonts[i];\n    // If url(s) are specified format them according to the spec https://developer.mozilla.org/en-US/docs/Web/API/FontFace\n    const fontSrc =\n      src && Array.isArray(src) && src.length\n        ? // loop through each string and format it in a way that's readable for the FontFace API\n          src\n            .map(url => {\n              // if the url is a local font then the src is just the string provided in the array\n              // otherwise, format the url string like url(<urlString>)\n              return url.substr(0, 5) === 'local' ? url : `url(${url})`; // Local system fonts are supported by passing a string starting with local. ex local(Impact)\n            })\n            .join(',')\n        : 'url(' + src + ')';\n    const fontFace = new FontFace(family, fontSrc, descriptors || {});\n    logger.info('Loading font', family);\n    document.fonts.add(fontFace);\n    // Push all pending promises into an array, theme manager will wait on everything to resolve before triggering another update cycle\n    promises.push(\n      new Promise(resolve => {\n        fontFace\n          .load()\n          .then(() => {\n            customFontFaces.push(fontFace);\n            resolve(family);\n          })\n          .catch(err => {\n            resolve(new Error(`${family}: ${err.message}`)); // Even if a font fails to load resolve it with an error so the theme doesn't fail to update all other values\n          });\n      })\n    );\n  }\n  return Promise.all(promises).then(fontsLoaded => {\n    // After the promise has resolved log the appropriate success and error messages\n    const loaded = fontsLoaded\n      .filter(font => !(font instanceof Error))\n      .join(', ');\n\n    if (loaded) {\n      logger.log(`Fonts loaded: ${loaded}`);\n    }\n\n    const failed = fontsLoaded\n      .filter(font => font instanceof Error)\n      .map(item => item.message)\n      .join(', ');\n\n    if (failed) {\n      logger.error(`Unable to load fonts: ${failed}`);\n    }\n  });\n};\n\n/**\n * Async function to remove all the fonts loaded by the theme. Useful if a theme is switched at runtime\n */\nexport const cleanupFonts = async fonts => {\n  if (document.fonts && 'delete' in document.fonts) {\n    if (!customFontFaces.length) return;\n    customFontFaces = customFontFaces.filter(fontFace => {\n      if (!fonts.find(font => font.family === fontFace.family)) {\n        logger.info('Removing font', fontFace.family);\n        document.fonts.delete(fontFace);\n        return false;\n      } else {\n        return fontFace;\n      }\n    });\n  } else {\n    logger.info('Unable to remove manually-added fonts');\n  }\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const THEME_KEY_REPLACER = {\n  fontFamily: 'fontFace'\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  clone,\n  getValFromObjPath,\n  getHexColor,\n  getValidColor\n} from '../../utils/index';\nimport baseTheme from '@lightningjs/ui-components-theme-base';\nimport logger from './logger';\nimport events from './events';\nimport { fontLoader, cleanupFonts } from './fonts';\nimport { THEME_KEY_REPLACER } from './constants';\n\nconst merge = {\n  all: objArray => {\n    let result = {};\n    for (let i = 0; i < objArray.length; i++) {\n      result = clone(result, objArray[i]);\n    }\n    return result;\n  }\n};\n\nconst base64Cache = [];\n\nconst isSubTheme = themeName => 'subTheme' === themeName.slice(0, 8);\n\n/**\n * Extracts the MIME type from a Data URI.\n *\n * @param {string} dataUri - The Data URI string.\n * @returns {string|null} The extracted MIME type, or null if not found.\n */\nfunction getMimeTypeFromDataUri(dataUri) {\n  const matches = dataUri.match(/^data:(.*?);base64,/);\n  if (matches && matches.length === 2) {\n    return matches[1];\n  }\n  return null;\n}\n\n/**\n * Checks if a string represents a Base64-encoded image and extracts the MIME type.\n *\n * @param {string} str - The string to check.\n * @returns {{ isImage: boolean, mimeType: string|null }} An object indicating whether the string is an image and the extracted MIME type.\n */\nfunction checkBase64EncodedImage(str) {\n  const regex = /^data:image\\/(jpeg|jpg|png|gif);base64,/;\n  const isImage = regex.test(str);\n  const mimeType = isImage ? getMimeTypeFromDataUri(str.match(regex)[0]) : null;\n\n  return {\n    isImage,\n    mimeType\n  };\n}\n\n/**\n * Converts a Base64-encoded image to a Blob URL.\n * Note: Make sure to handle potential memory leaks caused by the browser's image caching.\n *\n * @param {string} base64String - The Base64-encoded image string.\n * @param {string} mimeType - The MIME type of the image.\n * @returns {string|null} The Blob URL representing the converted image, or null if conversion fails.\n */\nfunction base64ToBlobURL(base64String, mimeType) {\n  const byteCharacters = atob(\n    base64String.substring(base64String.indexOf(',') + 1)\n  );\n  const byteArrays = [];\n\n  try {\n    for (let offset = 0; offset < byteCharacters.length; offset += 512) {\n      const slice = byteCharacters.slice(offset, offset + 512);\n      const byteNumbers = new Array(slice.length);\n\n      for (let i = 0; i < slice.length; i++) {\n        byteNumbers[i] = slice.charCodeAt(i);\n      }\n\n      const byteArray = new Uint8Array(byteNumbers);\n      byteArrays.push(byteArray);\n    }\n\n    const blob = new Blob(byteArrays, { type: mimeType });\n    const blobURL = URL.createObjectURL(blob);\n\n    return blobURL;\n  } catch (error) {\n    logger.info('Unable to convert base64 image to URL');\n    return null;\n  }\n}\n\nclass ThemeManager {\n  constructor() {\n    this._cache = new Map();\n    if (typeof window === 'undefined') return;\n    if (!window.LUI) {\n      window.LUI = {};\n    }\n    if (!window.LUI.themeManagerInstances) {\n      window.LUI.themeManagerInstances = [{ themeManager: this, events }];\n    } else {\n      window.LUI.themeManagerInstances.push({ themeManager: this, events });\n    }\n  }\n\n  // Handle separate instances of context across the application and keep them in sync\n  _setCache(key, payload) {\n    if (typeof window === 'undefined') return;\n    window.LUI.themeManagerInstances.forEach(({ themeManager }) => {\n      if (themeManager) themeManager._cache.set(key, payload);\n    });\n  }\n\n  _deleteCache(key) {\n    if (typeof window === 'undefined') return;\n    window.LUI.themeManagerInstances.forEach(({ themeManager }) => {\n      if (themeManager) themeManager._cache.delete(key);\n    });\n  }\n\n  _emit(key, payload) {\n    if (typeof window === 'undefined') return;\n    window.LUI.themeManagerInstances.forEach(({ events }) => {\n      events.emit(key, payload);\n    });\n  }\n\n  getTheme() {\n    if (this._cache.has('theme')) {\n      return this._cache.get('theme');\n    }\n\n    const theme = this._processTheme.call(this);\n    this._setCache('theme', theme);\n    return theme;\n  }\n\n  async setTheme(themeConfig) {\n    let value;\n    if (Array.isArray(themeConfig)) {\n      value = merge.all(themeConfig);\n    } else {\n      value = themeConfig;\n    }\n\n    if ('object' !== typeof value || null === value) {\n      logger.warn(`context theme expected an object. Received ${typeof value}`);\n      return;\n    }\n\n    this._clearCache();\n    const theme = this._processTheme.call(this, [value], value.extensions);\n    this._setCache('theme', theme);\n    await cleanupFonts(theme.font);\n    if (theme.font && theme.font.length) {\n      await this._loadFonts(theme.font);\n    }\n    this._refreshSubThemes();\n    this._emit('themeExtensionsUpdate');\n    this._emit('themeUpdate'); // Notify components that an update cycle is required\n    return theme;\n  }\n\n  getSubTheme(subThemeName) {\n    if (this._cache.has(`subTheme${subThemeName}`)) {\n      return this._cache.get(`subTheme${subThemeName}`).result;\n    }\n    return;\n  }\n\n  async setSubTheme(subThemeName, value, triggerUpdate = true) {\n    if (!subThemeName) {\n      logger.warn('Sub theme name not specified');\n      return;\n    }\n    if ('string' !== typeof subThemeName) {\n      logger.warn(\n        `Sub theme name must be a string. Received an ${typeof subThemeName}`\n      );\n      return;\n    }\n    if ('object' !== typeof value || !Object.keys(value).length) {\n      logger.warn(\n        `Could not set subTheme ${subThemeName}, value should be an object with properties. Received an ${typeof value}`\n      );\n      return;\n    }\n    const globalTheme = this.getTheme();\n    const subTheme = this._processTheme.call(this, [globalTheme, value]);\n    if (subTheme.font && subTheme.font.length) {\n      await this._loadFonts(subTheme.font);\n    }\n    this._setCache(`subTheme${subThemeName}`, {\n      original: value,\n      result: subTheme\n    });\n\n    if (triggerUpdate) this._emit(`themeUpdate${subThemeName}`);\n    return subTheme;\n  }\n\n  _refreshSubThemes() {\n    // Triggered when global theme is updated\n    [...this._cache.keys()].forEach(key => {\n      if ('string' === typeof key && isSubTheme(key)) {\n        const cache = this._cache.get(key);\n        if (cache.original)\n          this.updateSubTheme(key.replace(/^subTheme/, ''), cache.original);\n      }\n    });\n  }\n\n  async _loadFonts(fontArray) {\n    try {\n      await fontLoader(fontArray);\n    } catch (err) {\n      logger.error(`Unable to load font: ${err}`);\n    }\n  }\n\n  /**\n   * Merge values with current theme\n   */\n  async updateTheme(themeConfig) {\n    let value;\n    if (Array.isArray(themeConfig)) {\n      value = merge.all(themeConfig);\n    } else {\n      value = themeConfig;\n    }\n\n    let currentTheme = {};\n\n    if (this._cache.has('theme')) {\n      currentTheme = this._cache.get('theme');\n    }\n    this._clearCache();\n    const theme = this._processTheme.call(\n      this,\n      [currentTheme, value],\n      value.extensions || currentTheme.extensions\n    );\n    this._setCache('theme', theme);\n    if (theme.font && theme.font.length) {\n      await this._loadFonts(theme.font);\n    }\n    this._refreshSubThemes();\n    if (value.extensions) this._emit('themeExtensionsUpdate');\n    this._emit('themeUpdate'); // Notify components that an update cycle is required\n    return theme;\n  }\n\n  _clearCache() {\n    // Clean up any base64 image that were converted to blobs using createObjectURL\n    base64Cache.filter(image => {\n      if (window.URL && typeof window.URL.revokeObjectURL === 'function')\n        URL.revokeObjectURL(image);\n      return false;\n    });\n\n    this._cache.forEach((value, key) => {\n      if ('string' !== typeof key || !isSubTheme(key)) {\n        this._deleteCache(key);\n      }\n    });\n    // Regenerate sub themes\n    this._cache.forEach((value, key) => {\n      if ('string' === typeof key && isSubTheme(key)) {\n        this.setSubTheme(key.replace('subTheme', ''), value.original, false); // Dont trigger the update...the parent theme will trigger\n      }\n    });\n  }\n\n  async updateSubTheme(subThemeName, value, triggerUpdate = true) {\n    if (!subThemeName) {\n      logger.warn('Sub theme name not specified');\n      return;\n    }\n    if ('object' !== typeof value || !Object.keys(value).length) {\n      logger.warn(\n        `Could not update subTheme ${subThemeName} due to invalid value`\n      );\n      return;\n    }\n\n    const globalTheme = this.getTheme();\n    let currentTheme = {};\n\n    if (this._cache.has(`subTheme${subThemeName}`)) {\n      currentTheme = this._cache.get(`subTheme${subThemeName}`).original;\n    }\n\n    const subTheme = this._processTheme.call(this, [\n      globalTheme,\n      currentTheme,\n      value\n    ]);\n\n    if (subTheme.font && subTheme.font.length) {\n      await this._loadFonts(subTheme.font);\n    }\n\n    this._setCache(`subTheme${subThemeName}`, {\n      original: clone(currentTheme, value),\n      result: subTheme\n    });\n\n    if (triggerUpdate) this._emit(`themeUpdate${subThemeName}`);\n\n    return subTheme;\n  }\n\n  removeSubTheme(subThemeName) {\n    if (this._cache.has(`subTheme${subThemeName}`)) {\n      this._deleteCache(`subTheme${subThemeName}`);\n    }\n    this._emit(`themeUpdate${subThemeName}`);\n  }\n\n  _getComponentUUID(id) {\n    return `componentStyle${id}`;\n  }\n\n  _processTheme(themeArray = [], extensions) {\n    if (!Array.isArray(themeArray)) {\n      throw new Error(\n        `context processTheme expected an array. Received ${typeof themeArray}`\n      );\n    }\n\n    const theme = merge.all([baseTheme, ...themeArray]);\n\n    // Parse all colors in theme\n    const themeFunctions = {};\n    const themeString = JSON.stringify(theme, (key, originalValue) => {\n      let value = originalValue;\n      // Replacer\n      if (value && typeof value === 'object') {\n        const replacement = originalValue;\n        for (var k in value) {\n          if (Object.hasOwnProperty.call(value, k) && THEME_KEY_REPLACER[k]) {\n            replacement[k && THEME_KEY_REPLACER[k]] = value[k];\n            delete replacement[k]; // Removes the original key that was replaced. example: fontFamily is replaced by fontFace so fontFamily is removed from the theme\n          }\n        }\n\n        value = replacement;\n      }\n      // Base64 encoded values can cause memory leaks convert to an image\n      const { isImage, mimeType } = checkBase64EncodedImage(value);\n      if (\n        window.URL &&\n        typeof window.URL.createObjectURL === 'function' &&\n        isImage\n      ) {\n        // base64Cache\n        try {\n          const blobURL = base64ToBlobURL(value, mimeType);\n          base64Cache.push(blobURL);\n          return blobURL;\n        } catch (error) {\n          return value;\n        }\n      }\n\n      if (\n        Array.isArray(value) &&\n        2 === value.length &&\n        !value[0].targetComponent &&\n        value[0].length &&\n        typeof value[0] === 'string' &&\n        value[0].substr(0, 1) === '#' &&\n        typeof value[1] === 'number'\n      ) {\n        // Better check to filter out extensions?\n        return getHexColor(value[0], value[1]);\n      } else if (\n        'extensions' === key ||\n        'function' === typeof value ||\n        ('object' === typeof value &&\n          value !== null &&\n          'Object' !== value.constructor.name &&\n          !Array.isArray(value))\n      ) {\n        // Functions will not stringify, they will be merged after\n        themeFunctions[key] = value;\n        return;\n      } else if ('string' === typeof value && value.includes('theme.')) {\n        const themeValue = getValFromObjPath({ theme }, value);\n        if (themeValue) {\n          return themeValue;\n        } else {\n          return value;\n        }\n      } else {\n        const validColor = getValidColor(value);\n        if (validColor) {\n          return validColor;\n        }\n        return value;\n      }\n    });\n\n    return { ...JSON.parse(themeString), ...themeFunctions, extensions };\n  }\n}\n\nconst themeManagerInstance = new ThemeManager();\n\nexport { themeManagerInstance as default, ThemeManager };\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { capitalizeFirstLetter } from '../../utils';\nimport logger from './logger';\nimport metrics from './metrics';\nimport events from './events';\nimport themeManager from './theme-manager';\n\n/**\n * Class to create a context object. Context is a singleton that will hold settings and logic to be used across all Lightning UI components.\n */\n\n/**\n * @typedef ThemeObject\n * @type {any}\n */\nclass Context {\n  /**\n   * @type {ThemeObject}\n   */\n  get theme() {\n    return themeManager.getTheme();\n  }\n  /**\n   * theme cannot be set directly\n   */\n  set theme(value) {\n    logger.warn(\n      'Context.theme must be set using context.setTheme or context.updateTheme'\n    );\n  }\n  /**\n   * @type {object}\n   */\n  get keyMetricsCallback() {\n    return metrics.keyMetricsCallback;\n  }\n  /**\n   * keyMetricsCallback cannot be set directly\n   */\n  set keyMetricsCallback(value) {\n    logger.warn(\n      'Context.keyMetricsCallback must be set using context.setKeyMetricsCallback'\n    );\n  }\n  /**\n   * @type {boolean}\n   */\n  get debug() {\n    return logger.debug;\n  }\n\n  set debug(value) {\n    logger.debug = value;\n  }\n  /**\n   * @type {function}\n   * @param {string} name\n   * @param {function} callback\n   */\n  on() {\n    return events.on(...arguments);\n  }\n  /**\n   * @type {function}\n   */\n  off() {\n    return events.off(...arguments);\n  }\n  /**\n   * @type {function}\n   * @param {string} name\n   * @param {string|object|number|boolean} payload\n   */\n  emit() {\n    return events.emit(...arguments);\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  log(...args) {\n    logger.log(...args);\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  info(...args) {\n    logger.info(...args);\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  warn(...args) {\n    logger.warn(...args);\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  error(...args) {\n    logger.error(args);\n  }\n  /**\n   * @property {object|array}\n   * @return {object}\n   */\n  setTheme(value) {\n    return themeManager.setTheme(value);\n  }\n  /**\n   * @property {object|array}}\n   * @return {object}\n   */\n  updateTheme(value) {\n    return themeManager.updateTheme(value);\n  }\n  /**\n   * @property {string}\n   * @return {object}\n   */\n  getSubTheme(subThemeName) {\n    return themeManager.getSubTheme(subThemeName);\n  }\n  /**\n   * Expects an object where properties are child theme names. Values will be merged with the global themeManager.\n   * @property {object}\n   */\n  setSubThemes(subThemesObj) {\n    if ('object' !== typeof subThemesObj) {\n      logger.warn('subThemes must be an object');\n      return;\n    }\n    for (const subTheme in subThemesObj) {\n      themeManager.setSubTheme(subTheme, subThemesObj[subTheme]);\n    }\n  }\n  /**\n   * @property {string}\n   * @return {object}\n   */\n  setSubTheme(subThemeName, value) {\n    return themeManager.setSubTheme(subThemeName, value);\n  }\n  /**\n   * @property {string}\n   * @return {object}\n   */\n  updateSubTheme(subThemeName, value) {\n    return themeManager.updateSubTheme(subThemeName, value);\n  }\n  /**\n   * @property {string}\n   * @return {void}\n   */\n  removeSubTheme(subThemeName) {\n    themeManager.removeSubTheme(subThemeName);\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  setLogCallback(value) {\n    logger.logCallback = value;\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  setKeyMetricsCallback(value) {\n    metrics.keyMetricsCallback = value;\n  }\n  /**\n   * @property {function}\n   * @return {object}\n   */\n  config(config = {}) {\n    const configKeys = Object.keys(config);\n    for (let i = 0; i < configKeys.length; i++) {\n      const setMethod = this['set' + capitalizeFirstLetter(configKeys[i])];\n      if (setMethod) {\n        setMethod(config[configKeys[i]]);\n      }\n    }\n    return this;\n  }\n}\n\nconst contextInstance = new Context();\n\nexport { contextInstance as default, Context };\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../context';\n\nclass GlobalUpdateManager {\n  constructor() {\n    this._updateThemeSet = new Set();\n    this._requestUpdateSet = new Set();\n    this._timeout = null;\n    this._runUpdatesTimeoutHandler = this._runUpdatesTimeoutHandler.bind(this);\n  }\n\n  _runUpdatesTimeoutHandler() {\n    this._timeout = null;\n    this._updateThemeSet.forEach(component => {\n      try {\n        component._updateThemeComponent();\n      } catch (e) {\n        context.error('Error updating component themes', e);\n      }\n    });\n    this._updateThemeSet.clear();\n\n    this._requestUpdateSet.forEach(component => {\n      try {\n        component.requestUpdate();\n      } catch (e) {\n        context.error('Error updating component', e);\n      }\n    });\n    this._requestUpdateSet.clear();\n  }\n\n  /**\n   * Force all updates now\n   *\n   * @returns\n   */\n  flush() {\n    // If there is no timeout then there is definately nothing to update\n    if (!this._timeout) return;\n    clearTimeout(this._timeout);\n    this._runUpdatesTimeoutHandler();\n  }\n\n  addUpdateTheme(component) {\n    this._updateThemeSet.add(component);\n    if (!this._timeout) {\n      this._timeout = setTimeout(this._runUpdatesTimeoutHandler, 0);\n    }\n  }\n\n  deleteUpdateTheme(component) {\n    // Don't bother checking and clearing the timeout if one is active\n    // Not worth the overhead. More than likely it needs to run again anyway.\n    this._updateThemeSet.delete(component);\n  }\n\n  addRequestUpdate(component) {\n    this._requestUpdateSet.add(component);\n    if (!this._timeout) {\n      this._timeout = setTimeout(this._runUpdatesTimeoutHandler, 0);\n    }\n  }\n\n  deleteRequestUpdate(component) {\n    // See note in deleteRequestUpdate()\n    this._requestUpdateSet.delete(component);\n  }\n\n  hasQueuedRequestFor(component) {\n    return this._requestUpdateSet.has(component);\n  }\n}\n\nexport const updateManager = new GlobalUpdateManager();\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../../globals/context';\nimport { updateManager } from '../../globals/global-update-manager/GlobalUpdateManager';\nimport { clone } from '../../utils';\n\nfunction capital(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n// Merge the componentConfigProp with the prop value\nfunction mergeProps(componentConfigProp, prop) {\n  let result = prop;\n  if (\n    typeof componentConfigProp === 'object' &&\n    Object.keys(componentConfigProp).length &&\n    typeof prop === 'object'\n  ) {\n    result = clone(componentConfigProp, prop);\n  }\n\n  return result ?? componentConfigProp;\n}\n\nfunction getPropertyDescriptor(name, key) {\n  return {\n    get() {\n      const customGetter = this[`_get${capital(name)}`];\n      if (customGetter && typeof customGetter === 'function') {\n        const value = customGetter.call(this, this[key]);\n        this[key] = value || this.__componentConfigProps?.[name]; // Defaults can also be set from withThemeStyles if used\n        return mergeProps(this.__componentConfigProps?.[name], value);\n      }\n\n      return mergeProps(this.__componentConfigProps?.[name], this[key]); // Defaults can also be set from withThemeStyles if used\n    },\n    set(value) {\n      const oldValue = this[key];\n      if (value !== oldValue) {\n        const changeHandler = this[`_set${capital(name)}`];\n        if (changeHandler && typeof changeHandler === 'function') {\n          value = changeHandler.call(this, value);\n        }\n\n        const newValue = key === 'style' ? clone(this[key], value) : value;\n\n        if (\n          typeof this[key] === 'object' &&\n          this[key] !== null &&\n          this[key].style\n        ) {\n          // If the property is for a nested component, recursively combine it with the component's existing styles, ensuring that any styles defined in componentConfig are also applied.\n          const style = clone(this[key].style, value.style || {});\n          newValue.style = style;\n        }\n\n        this[key] = newValue;\n        this.queueRequestUpdate();\n      }\n    },\n    configurable: true,\n    enumerable: true\n  };\n}\n\nfunction getAliasPropertyDescriptor(prev, curr) {\n  const deprecationWarning = `The property \"${prev}\" is deprecated and will be removed in a future release. Please use \"${curr}\" instead.`;\n  return {\n    get() {\n      console.warn(deprecationWarning);\n      return this[curr];\n    },\n    set(value) {\n      console.warn(deprecationWarning);\n      this[curr] = value;\n    }\n  };\n}\n\nexport default function withUpdates(Base) {\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _construct() {\n      const prototype = Object.getPrototypeOf(this);\n      if (!prototype._withUpdatesInitialized) {\n        // create custom accessors and mutators for the props in the properties array\n        const props = this.constructor.properties || [];\n        props.forEach(name => {\n          const key = '_' + name;\n          const descriptor = getPropertyDescriptor(name, key);\n          if (descriptor !== undefined) {\n            Object.defineProperty(prototype, name, descriptor);\n          }\n        });\n\n        // create custom accessors and mutators that map the props in the alias array to\n        // the props in the properties array (and use the getters/setters defined above)\n        const aliasProps = this.constructor.aliasProperties || [];\n        aliasProps.forEach(alias => {\n          if (\n            alias &&\n            typeof alias.prev === 'string' &&\n            typeof alias.curr === 'string'\n          ) {\n            const descriptor = getAliasPropertyDescriptor(\n              alias.prev,\n              alias.curr\n            );\n            if (descriptor !== undefined) {\n              Object.defineProperty(prototype, alias.prev, descriptor);\n            }\n          }\n        });\n\n        prototype._withUpdatesInitialized = true;\n      }\n\n      this._whenEnabled = new Promise(resolve => {\n        this._whenEnabledResolver = resolve;\n      });\n\n      super._construct && super._construct();\n    }\n\n    queueRequestUpdate() {\n      if (!this._isAttached()) return;\n      updateManager.addRequestUpdate(this);\n    }\n\n    _firstEnable() {\n      this._readyForUpdates = true;\n      this._whenEnabledResolver();\n      updateManager.deleteRequestUpdate(this);\n      this.requestUpdate();\n      super._firstEnable && super._firstEnable();\n    }\n\n    requestEarlyUpdate() {\n      this._readyForUpdates = true;\n      if (updateManager.hasQueuedRequestFor(this)) {\n        updateManager.deleteRequestUpdate(this);\n        // method also triggers ready for updates\n        this._readyForUpdates = true;\n        this.requestUpdate();\n        return true;\n      }\n      return false;\n    }\n\n    _detach() {\n      super._detach();\n      updateManager.deleteRequestUpdate(this);\n    }\n\n    /**\n     * Request an immediate component update.\n     *\n     * @remarks\n     * Except for when calling `super._update()` from a `_update()`\n     * implementation, call this instead of calling `_update()` directly\n     *\n     * @param {boolean} force If set, bypasses the '_readyForUpdates' check\n     */\n    requestUpdate(force = false) {\n      if (this._readyForUpdates || force) {\n        const result = this._update();\n        if (typeof result === 'object' && result !== null && result.catch) {\n          // This is a promise, make sure to capture any errors\n          result.catch(e => {\n            context.error(\n              `asyncronous _update() error in '${this.constructor.__componentName}'`,\n              this,\n              e\n            );\n          });\n        }\n      }\n    }\n\n    logPropTable() {\n      console.table(this._propTable);\n    }\n\n    get _propTable() {\n      return this.constructor.properties.reduce((acc, prop) => {\n        acc[prop] = this[prop];\n        return acc;\n      }, {});\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nfunction getPropertyDescriptor(path) {\n  return {\n    get() {\n      return this.tag(path);\n    },\n    configurable: true,\n    enumerable: true\n  };\n}\n\nexport default function withTags(Base) {\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _construct() {\n      const prototype = Object.getPrototypeOf(this);\n      if (!prototype._withTagsInitialized) {\n        const tags = this.constructor.tags || [];\n        tags.forEach(tag => {\n          if (typeof tag === 'object') {\n            var { name, path } = tag;\n          } else {\n            var name = tag; // eslint-disable-line no-redeclare\n            var path = tag; // eslint-disable-line no-redeclare\n          }\n          const key = '_' + name;\n          const descriptor = getPropertyDescriptor(path);\n          Object.defineProperty(prototype, key, descriptor);\n        });\n        prototype._withTagsInitialized = true;\n      }\n      super._construct && super._construct();\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../../globals/context/index';\n\nexport default function withHandleKey(Base) {\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _handleKey(keyEvent) {\n      return this._processEvent(keyEvent);\n    }\n\n    _handleKeyRelease(keyEvent) {\n      return this._processEvent(keyEvent, 'Release');\n    }\n\n    _processEvent(keyEvent, suffix = '') {\n      const keyMap = this.stage.application.__keymap || {};\n      let key = keyMap[keyEvent.keyCode];\n      if (!key) {\n        key = keyEvent.key;\n      }\n      if (key && typeof this[`on${key}${suffix}`] === 'function') {\n        this._invokeKeyPayloadCallback(key + suffix);\n        return this[`on${key}${suffix}`].call(this, this, keyEvent);\n      }\n      return false;\n    }\n\n    _invokeKeyPayloadCallback(key) {\n      if (\n        this.metricsPayload &&\n        typeof context.keyMetricsCallback === 'function'\n      ) {\n        context.keyMetricsCallback(key, this.metricsPayload);\n      }\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../../globals/context/index';\nimport { stringifyCompare, getDimensions } from '../../utils';\n\nexport default function withLayout(Base) {\n  return class extends Base {\n    _construct() {\n      super._construct && super._construct();\n      this._previousDimensionData = null; // Store the previous dimension data to compare next time _updateItemLayout is called\n    }\n\n    get itemLayout() {\n      return this._itemLayout;\n    }\n\n    set itemLayout(v) {\n      const componentName =\n        this.constructor._componentName || this.constructor.name;\n      let itemLayout;\n      if (v) {\n        itemLayout = JSON.parse(\n          JSON.stringify(v, (k, v) => {\n            if (k !== 'circle' && v < 0) {\n              context.error(\n                `itemLayout for ${componentName} received an invalid value of ${v} for ${k}`\n              );\n              return;\n            } else if (k === 'circle') {\n              return Boolean(v);\n            }\n            return v;\n          })\n        );\n      }\n\n      if (!stringifyCompare(this._itemLayout, itemLayout)) {\n        if (itemLayout && !itemLayout.upCount) {\n          this._originalW = this.w;\n          this._originalH = this.h;\n          this._itemLayout = {\n            w: this._originalW,\n            h: this._originalH,\n            ...itemLayout\n          };\n        } else {\n          this._itemLayout = itemLayout;\n        }\n\n        this._updateItemLayout();\n      }\n    }\n\n    _allowUpdate() {\n      const {\n        w = '',\n        h = '',\n        circle = '',\n        ratioX = '',\n        ratioY = '',\n        upCount = ''\n      } = this._itemLayout || {};\n      // Store a string representation of all values from previous update to compare and decide if layout should change\n      const layoutString =\n        Object.values(context.theme.layout).join('') +\n        `${w}${h}${circle ? 1 : 0}${ratioX}${ratioY}${upCount}`;\n      if (layoutString !== this._previousDimensionData) {\n        this._previousDimensionData = layoutString;\n        return true;\n      }\n      return false;\n    }\n\n    _updateItemLayout() {\n      if (!this._allowUpdate()) return;\n      const { w, h } = getDimensions(this.theme, this._itemLayout);\n      if (h || w) {\n        // If there is not enough information passed in args to calculate item size\n        const width = context.theme.layout.screenW;\n        const height = context.theme.layout.screenH;\n        const calculatedWidth = w || h * (width / height);\n        const calculatedHeight = h || w * (height / width);\n        this.w =\n          this._itemLayout && this._itemLayout.circle\n            ? calculatedHeight\n            : calculatedWidth; // Width must be set first in order for Cards to be displayed properly\n        this.h = calculatedHeight;\n        if (this._itemLayout && this._itemLayout.circle && this.style.radius) {\n          this._circleSet = true;\n          this._originalRadius = this.style.radius;\n          this.style = {\n            ...this.style,\n            radius: calculatedHeight / 2\n          };\n        } else if (this._circleSet) {\n          // Restore to it's original state\n          this.style = {\n            ...this.style,\n            radius: this._originalRadius\n          };\n          this._originalRadius = undefined;\n          this._circleSet = false;\n        }\n        this.queueRequestUpdate && this.queueRequestUpdate();\n        this.fireAncestors('$itemChanged');\n      }\n    }\n  };\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { clone, getValFromObjPath, getHexColor } from '../../utils';\nimport log from '../../globals/context/logger';\n\n/**\nGiven a character, return its ASCII value multiplied by its position.\n *\n@param {string} char - The character to process.\n@param {number} index - The position of the character in the string.\n@returns {number} - The ASCII value of the character multiplied by its position.\n */\nexport const getCharacterValue = (char, index) => {\n  return char.charCodeAt(0) * (index + 1);\n};\n\n/**\n * Recursively sorts an object by its keys. If an object has nested objects as values,\n * it will sort those nested objects as well.\n *\n * @param {Object} obj - The object to be sorted.\n * @returns {Object} A new object that is a sorted version of the input object.\n */\nexport const sortObject = obj => {\n  const sortedObj = {};\n  Object.keys(obj)\n    .sort()\n    .forEach(key => {\n      if (\n        typeof obj[key] === 'object' &&\n        obj[key] !== null &&\n        !Array.isArray(obj[key])\n      ) {\n        sortedObj[key] = sortObject(obj[key]); // Recursive call for nested objects\n      } else {\n        sortedObj[key] = obj[key];\n      }\n    });\n  return sortedObj;\n};\n\n/**\nGiven an object, return a sum of the ASCII values of all characters in its\nJSON stringified representation, each multiplied by its position.\n*\n@param {object} obj - The object to process.\n@returns {number} - The sum of ASCII values, each multiplied by its position.\n*/\nexport const getCharacterSum = obj => {\n  const sortedObj = sortObject(obj);\n  const str = JSON.stringify(sortedObj).replace(/[{}:\",\\s]/g, ''); // Remove brackets, colons, and whitespace\n  let sum = 0;\n  for (let i = 0; i < str.length; i++) {\n    sum += getCharacterValue(str[i], i);\n  }\n  return sum;\n};\n\n/**\nGiven an object, return a \"hash\" of the object, which is a combination of\nthe length of its JSON stringified representation and the sum of the ASCII\nvalues of all characters in that string, each multiplied by its position.\n*\n@param {object} obj - The object to process.\n@returns {string} - The hash of the object.\n*/\nexport const getHash = obj => {\n  const str = JSON.stringify(obj);\n  return str.length + '-' + getCharacterSum(obj);\n};\n\n/**\n * Recursively executes functions within an object or array structure, passing them a given context.\n * @param {Function|Object|Array} objOrFunction - The object, array, or function to process.\n * @param {*} theme - The context to pass to any encountered functions.\n * @returns {*} The processed structure with functions executed.\n */\nexport function executeWithContextRecursive(objOrFunction, theme) {\n  if (typeof objOrFunction === 'function') {\n    // If the input is a function, execute it with the theme as a parameter\n    const result = objOrFunction(theme);\n    return executeWithContextRecursive(result, theme);\n  } else if (Array.isArray(objOrFunction)) {\n    // If the input is an array, iterate through its elements and apply the function recursively.\n    return objOrFunction.map(item => executeWithContextRecursive(item, theme));\n  } else if (typeof objOrFunction === 'object' && objOrFunction !== null) {\n    // If the input is an object (and not null), iterate through its properties and apply the function recursively.\n    const result = {};\n    for (const key in objOrFunction) {\n      if (objOrFunction.hasOwnProperty(key)) {\n        result[key] = executeWithContextRecursive(objOrFunction[key], theme);\n      }\n    }\n    return result;\n  } else {\n    // Return the value as is if it's neither a function, an object, nor an array.\n    return objOrFunction;\n  }\n}\n\n/**\n * Checks if a value is a plain object.\n *\n * @param {*} value - The value to check.\n * @returns {boolean} - True if the value is a plain object, false otherwise.\n */\nexport function isPlainObject(value) {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    !Array.isArray(value) &&\n    !(value instanceof Date) &&\n    !(value instanceof RegExp) &&\n    !(value instanceof Function) &&\n    !(value instanceof Error)\n  );\n}\n\n/**\n * Returns the subTheme property of the first parent object that has one, or undefined if none exist.\n *\n * @param {object} obj - The object to search for a subTheme property.\n * @returns {(String | Undefined)} - The value of the subTheme property, or undefined if none exists.\n */\nexport const getSubTheme = obj => {\n  while (obj && (!obj.subTheme || typeof obj.subTheme !== 'string')) {\n    obj = obj.p;\n  }\n  return obj ? obj.subTheme : undefined;\n};\n\n/**\n * Returns the component configuration object for the given object based on its prototype chain.\n *\n * @param {object} obj - The object to get the component configuration for.\n * @returns {object} - The component configuration object.\n */\nexport const getComponentConfig = obj => {\n  if (!isPlainObject(obj)) return {};\n  return obj?.theme?.componentConfig?.[obj.constructor.__componentName] || {};\n};\n\n/**\n * Returns an array of the names of all components in the prototype chain of the given object.\n * @param {object} obj - The object to get the prototype chain from.\n * @returns {string[]} - An array of component names.\n */\nexport const getPrototypeChain = obj => {\n  if (!isPlainObject(obj)) return [];\n  const prototypeChain = new Set();\n  let proto = obj;\n\n  if (obj.constructor && obj.constructor.__componentName) {\n    prototypeChain.add(obj.constructor.__componentName);\n  }\n\n  /**\n   * Traverse the prototype chain and add component names to the set\n   */\n  do {\n    proto = Object.getPrototypeOf(proto);\n    if (proto !== null && typeof proto === 'object') {\n      // Add only components that support theming\n      if (proto.constructor.__componentName) {\n        prototypeChain.add(proto.constructor.__componentName);\n      }\n    }\n  } while (proto);\n\n  // Convert the set to an array and return it\n  return Array.from(prototypeChain);\n};\n\n/**\n * Recursively removes properties from an object that are themselves empty objects.\n * Does not remove arrays, non-plain objects, or non-empty objects.\n *\n * @param {Object} obj - The object to clean of empty objects.\n * @returns {Object} The cleaned object.\n */\nexport function removeEmptyObjects(obj) {\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key) && isPlainObject(obj[key])) {\n      removeEmptyObjects(obj[key]); // Recurse into the object\n\n      // After recursion, if the object is empty, delete it from the parent\n      if (Object.keys(obj[key]).length === 0) {\n        delete obj[key];\n      }\n    }\n  }\n\n  return obj; // Always return obj, even if it's empty\n}\n\nexport function safeStringify(originalObj) {\n  const obj = { ...originalObj };\n\n  const seen = new WeakSet(); // WeakSet is used to store references to objects we've processed\n\n  return JSON.stringify(obj, (key, value) => {\n    if (typeof value === 'object' && value !== null) {\n      if (seen.has(value)) {\n        return '[Circular]'; // Replace circular references with a string\n      }\n      seen.add(value); // Mark this object as seen\n    }\n    return value; // Return the value as is\n  });\n}\n\nexport function createSharedReferences(obj = {}) {\n  const seenObjects = new Map(); // Store original reference -> shared reference\n\n  function process(currentObj) {\n    const queue = [currentObj]; // Use a queue for breadth-first traversal\n\n    while (queue.length > 0) {\n      const current = queue.shift();\n\n      for (const key in current) {\n        if (current.hasOwnProperty(key)) {\n          const value = current[key];\n          if (typeof value === 'object' && value !== null) {\n            const cacheKey = safeStringify(value);\n            if (seenObjects.has(cacheKey)) {\n              // Replace duplicate reference with the shared reference\n              current[key] = seenObjects.get(cacheKey);\n            } else {\n              // Add child objects to the queue for processing\n              seenObjects.set(cacheKey, value);\n              queue.push(value);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  process(obj);\n  return obj;\n}\n\n/**\n * Combines the provided properties and returns a list of unique properties.\n *\n * @param {string[]} defaultProps - Default property names.\n * @param {Object} additionalProps - Object whose keys are additional property names.\n * @param {string[]} subProps - Sub property names.\n * @returns {string[]} - Array of unique property names.\n */\nexport function getUniqueProperties(defaultProps = []) {\n  if (!Array.isArray(defaultProps)) {\n    throw new TypeError('Expected defaultProps to be an array of strings.');\n  }\n\n  return [...new Set(defaultProps)];\n}\n\n/**\n * Generate the payload by cloning and merging multiple objects.\n *\n * @param {Object} base - The base object to start with.\n * @param {Object} defaultStyle - Default styles provided by the user.\n * @param {string} toneItem - The current tone being processed.\n * @param {string} modeItem - The current mode being processed.\n * @param {Object} tone - Tone configurations.\n * @param {Object} mode - Mode configurations.\n * @returns {Object} - The merged payload.\n */\nexport function generatePayload(\n  base,\n  defaultStyle,\n  toneItem,\n  modeItem,\n  tone,\n  mode\n) {\n  let payload = clone(defaultStyle, base);\n  payload = clone(payload, tone?.[toneItem]);\n  payload = clone(payload, mode?.[modeItem]);\n  payload = clone(payload, tone?.[toneItem]?.mode?.[modeItem] || {});\n  payload = clone(payload, mode?.[modeItem]?.tone?.[toneItem] || {});\n  return payload;\n}\n\n/**\n * Recursively searches for and returns all the property keys nested within the specified key in the object.\n *\n * @param {Object} obj - The object to search through.\n * @param {string} keyToFind - The key whose nested keys are to be found.\n * @returns {string[]} An array containing all nested property keys under the specified key.\n */\nfunction findNestedKeys(obj, keyToFind) {\n  const nestedKeys = [];\n\n  /**\n   * Inner function to recursively search for nested keys.\n   *\n   * @param {Object} obj - The nested object to search through.\n   */\n  function searchNestedKeys(obj) {\n    if (typeof obj === 'object' && obj !== null) {\n      for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          nestedKeys.push(key); // Add the nested key to the array\n        }\n      }\n    }\n  }\n\n  /**\n   * Outer function to initiate search when the specified key is found.\n   *\n   * @param {Object} obj - The object to search through.\n   */\n  function searchForKey(obj) {\n    if (typeof obj === 'object' && obj !== null) {\n      for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          if (key === keyToFind) {\n            searchNestedKeys(obj[key]); // Start searching for nested keys\n            break; // Once the specified key is found, we don't need to look further at this level\n          }\n          searchForKey(obj[key]); // Continue searching for the specified key\n        }\n      }\n    }\n  }\n\n  searchForKey(obj); // Initialize the search with the object\n  return nestedKeys; // Return the array of nested keys\n}\n\n/**\n * Generates a solution based on the provided configurations.\n *\n * @param {Object} options - The configuration options for generating the solution.\n * @param {Object} [options.base={}] - Base object.\n * @param {Object} [options.tone={}] - Tone configurations.\n * @param {Object} [options.mode={}] - Mode configurations.\n * @param {Object} [options.defaultStyle={}] - Default styles provided by the user.\n * @returns {Object} - The generated solution with shared references and merged identical properties.\n */\nexport const generateSolution = (\n  { base = {}, tone = {}, mode = {}, defaultStyle = {} },\n  modeKeys = [],\n  toneKeys = []\n) => {\n  const solution = {};\n\n  const uniqueModes = getUniqueProperties([\n    'focused',\n    'disabled',\n    ...modeKeys,\n    'unfocused' // Unfocused must be at the end for proper fallback since base === 'unfocused' in many cases\n  ]);\n\n  const uniqueTones = getUniqueProperties([\n    'neutral',\n    'inverse',\n    'brand',\n    ...toneKeys\n  ]);\n\n  for (const modeItem of uniqueModes) {\n    for (const toneItem of uniqueTones) {\n      const payload = generatePayload(\n        base,\n        defaultStyle,\n        toneItem,\n        modeItem,\n        tone,\n        mode\n      );\n      solution[`${modeItem}_${toneItem}`] = payload;\n    }\n  }\n\n  return solution;\n};\n\nconst DEFAULT_KEYS = [\n  // ORDER MATTERS\n  'unfocused_neutral',\n  'unfocused_inverse',\n  'unfocused_brand',\n  'focused_neutral',\n  'focused_inverse',\n  'focused_brand',\n  'disabled_neutral',\n  'disabled_inverse',\n  'disabled_brand'\n];\n\n/**\n * Enforce a contract on an input object by ensuring that it contains a set of specified keys\n * and, if not, substituting them with values from fallback keys in a predefined order.\n *\n * @param {Object} inputObj - The input object to enforce the contract on.\n * @returns {Object} - An object that adheres to the contract, with missing keys replaced by fallback values.\n */\nexport function enforceContract(inputObj) {\n  const result = {};\n  for (const key of [...DEFAULT_KEYS, ...Object.keys(inputObj)]) {\n    if (!inputObj.hasOwnProperty(key)) {\n      // Find the first fallback property that exists in inputObj\n      const fallbackKey = DEFAULT_KEYS.find(fallback =>\n        inputObj.hasOwnProperty(fallback)\n      );\n      if (fallbackKey) {\n        const fallback = inputObj[fallbackKey];\n        result[key] = typeof fallback !== 'object' ? {} : fallback;\n      } else {\n        result[key] = {};\n      }\n    } else {\n      if (typeof inputObj[key] !== 'object') {\n        // If the value is not an object, replace it with an empty object\n        result[key] = {};\n      } else {\n        result[key] = inputObj[key];\n      }\n    }\n  }\n  return result;\n}\n\n/**\n * Generates the source style object for a given component by merging base, mode, and tone styles from the component's style chain\n * @param {object} component - The component for which to generate the style source\n * @returns {object} - The source style object for the component\n */\nexport const generateComponentStyleSource = ({\n  theme = {},\n  styleChain = [],\n  inlineStyle = {},\n  alias = []\n} = {}) => {\n  if (typeof theme !== 'object') {\n    throw new Error('Expected theme to be an object');\n  }\n\n  if (!Array.isArray(styleChain)) {\n    throw new Error('Expected styleChain to be an array');\n  }\n\n  if (typeof inlineStyle !== 'object') {\n    throw new Error('Expected inlineStyle to be an object');\n  }\n\n  if (!Array.isArray(alias)) {\n    throw new Error('Expected alias to be an array');\n  }\n\n  /**\n   * Component default styles\n   */\n  const componentDefault = styleChain.map(({ style }) => {\n    if (\n      typeof style === 'object' &&\n      !style.base &&\n      !style.mode &&\n      !style.tone &&\n      !style.default\n    ) {\n      return { base: style };\n    } else {\n      const { base = {}, mode = {}, tone = {} } = style;\n\n      let componentConfigDefaultStyle;\n      if (style) {\n        const defaultStyle = JSON.parse(JSON.stringify(style));\n        delete defaultStyle.base;\n        delete defaultStyle.tone;\n        delete defaultStyle.mode;\n        componentConfigDefaultStyle = defaultStyle; // Anything in the root level of style\n      }\n\n      return {\n        defaultStyle: componentConfigDefaultStyle || {},\n        base,\n        mode,\n        tone\n      };\n    }\n  });\n\n  /**\n   * Local / Instance level styles\n   * DefaultStyle will apply to the next level in the hierarchy\n   */\n  let localDefaultStyle;\n  if (inlineStyle) {\n    const defaultStyle = JSON.parse(JSON.stringify(inlineStyle));\n    delete defaultStyle.base;\n    delete defaultStyle.tone;\n    delete defaultStyle.mode;\n    localDefaultStyle = defaultStyle; // Anything in the root level of style\n  }\n\n  const local = {\n    defaultStyle: localDefaultStyle || {},\n    base: inlineStyle?.base || {},\n    mode: inlineStyle?.mode || {},\n    tone: inlineStyle?.tone || {}\n  };\n\n  // Merge all the styles together into one array to loop\n  const merged = [...componentDefault, local];\n\n  // Execute all style functions with the theme\n  const parsedStyles = merged.map(style => {\n    return executeWithContextRecursive(style, theme);\n  });\n\n  // Find all the keys that are in mode/tone as well as nested under mode and tone this will help generate the final solution\n  const modeKeys = findNestedKeys(parsedStyles, 'mode');\n  const toneKeys = findNestedKeys(parsedStyles, 'tone');\n\n  // Merge all the styles together into one object\n  const solution = parsedStyles.reduce((acc, style) => {\n    return clone(acc, generateSolution(style, modeKeys, toneKeys));\n  }, {});\n\n  const final = formatStyleObj(\n    removeEmptyObjects(colorParser({ theme }, solution)) || {},\n    alias\n  );\n\n  const cleanObj = createSharedReferences(final);\n\n  return enforceContract(cleanObj);\n};\n\n/**\n * Parse and process a style object to replace theme strings and process color arrays.\n * @param {object} targetObject - In most cases, this will be a theme object.\n * @param {object} styleObj - The input style object to be processed.\n * @returns {object} The processed style object with theme strings replaced and color arrays processed.\n */\nexport const colorParser = (targetObject, styleObj) => {\n  // Check if targetObject is an object\n  if (typeof targetObject !== 'object' || targetObject === null) {\n    throw new TypeError('targetObject must be an object.');\n  }\n\n  // Check if styleObj is an object\n  if (typeof styleObj !== 'object' || styleObj === null) {\n    throw new TypeError('styleObj must be an object.');\n  }\n\n  // Process style object and remove unnecessary properties\n  const processedStyle = JSON.stringify(styleObj, (_, value) => {\n    if (-1 < ['tone', 'mode'].indexOf(_)) return value; // Remove any tone/mode or mode/tone properties as they have already been processed\n\n    // Handle theme strings, e.g., 'theme.radius.md'\n    if (typeof value === 'string' && value.startsWith('theme.')) {\n      // Retrieve the value from the target object using the theme path\n      return getValFromObjPath(targetObject, value); // If no theme value exists, the property will be removed\n    }\n\n    function isValidColor(num) {\n      return num >= 0 && num <= 0xffffffff;\n    }\n\n    // Handle color arrays, e.g., ['#663399', 1] or [255, 0.5]\n    if (\n      Array.isArray(value) &&\n      value.length === 2 &&\n      ((typeof value[0] === 'string' && value[0].startsWith('#')) ||\n        (typeof value[0] === 'number' && isValidColor(value[0]))) &&\n      typeof value[1] === 'number'\n    ) {\n      // Return processed hex color or the original value if processing fails\n      return getHexColor(value[0], value[1]) || value;\n    }\n\n    // Return all other values as-is\n    return value;\n  });\n\n  return JSON.parse(processedStyle || {});\n};\n\n/**\n * Generates the final style object for a component using its style source.\n * @param {object} component - The component for which to generate a style object.\n * @param {object} componentStyleSource - The style source object for the component.\n * @returns {object} - The generated style object.\n */\nexport const generateStyle = (component, componentStyleSource = {}) => {\n  if (!isPlainObject(component)) return {};\n  const { mode = 'unfocused', tone = 'neutral' } = component;\n  return (\n    componentStyleSource[`${mode}_${tone}`] ||\n    componentStyleSource['unfocused_neutral'] ||\n    {}\n  );\n};\n\n/**\n * Generates a name by concatenating the names of constructors in the prototype chain.\n * @param {object} obj - The object for which to generate the name.\n * @returns {string} - The generated name.\n */\nexport function generateNameFromPrototypeChain(obj, name = '') {\n  if (!obj) return name;\n  const proto = Object.getPrototypeOf(obj);\n  if (!proto || !proto.constructor) return name;\n  const componentName = `${name ? name + '.' : ''}${\n    proto?.constructor?.__componentName || ''\n  }`\n    .replace(/\\.*$/, '')\n    .trim();\n  const result = generateNameFromPrototypeChain(proto, componentName);\n  return result;\n}\n/**\n * Creates a cache object to store the results of getStyleChainMemoized function calls.\n * @type {object}\n */\nconst styleChainCache = {};\n\n/**\n * Flush the memoization cache for styleChain\n *\n */\nexport const clearStyleChainCache = () => {\n  for (const key in styleChainCache) {\n    if (styleChainCache.hasOwnProperty(key)) {\n      delete styleChainCache[key];\n    }\n  }\n};\n\n/**\n * Memoized version of getStyleChain function. Retrieves the style chain for a component by traversing its prototype chain.\n * @param {object} componentObj - The component object to get the style chain from.\n * @returns {{ style: (object | function) }[]} - An array of style objects containing either an object of styles or a function to return an object of styles.\n */\nexport const getStyleChainMemoized = componentObj => {\n  /**\n   * Create a cache key based on the stringified component object.\n   * @type {string}\n   */\n\n  const cacheKey = generateNameFromPrototypeChain(componentObj);\n\n  // Check if the result is already in the cache\n  if (styleChainCache[cacheKey]) {\n    return styleChainCache[cacheKey];\n  }\n\n  /**\n   * Compute the style chain using the getStyleChain function.\n   * @type {{ style: (object | function) }[]}\n   */\n  const styleChain = getStyleChain(componentObj);\n\n  // Cache the result for future use\n  styleChainCache[cacheKey] = styleChain;\n\n  // Return the style chain\n  return styleChain;\n};\n\n/**\n * Traverse up the prototype chain to create an array of all the styles that are present in the Components ancestors\n * @param {object} componentObj - The component object to get the style chain from.\n * @returns {{ style: (object | function) }[]} - An array of style objects containing either an object of styles or a function to return an object of styles.\n */\nexport const getStyleChain = componentObj => {\n  const styleMap = new Map(); // Use a Map to store styles as JSON strings\n  let proto;\n\n  do {\n    proto = !proto ? componentObj : Object.getPrototypeOf(proto);\n    if (proto?.constructor === Object) break; // Stop traversing the prototype chain if we reach the Object prototype\n    if (\n      proto &&\n      typeof proto === 'object' &&\n      proto.hasOwnProperty('constructor')\n    ) {\n      // ComponentConfig Level\n      const { style: componentConfigStyle } = getComponentConfig(proto);\n      if (Object.keys(componentConfigStyle || {}).length) {\n        if (!styleMap.has(componentConfigStyle)) {\n          styleMap.set(componentConfigStyle, { style: componentConfigStyle });\n        }\n      }\n\n      // Access the __themeStyle property from the current prototype's constructor\n      const themeStyle =\n        proto.constructor.hasOwnProperty('__themeStyle') &&\n        proto.constructor.__themeStyle;\n\n      if (Object.keys(themeStyle || {}).length) {\n        if (!styleMap.has(themeStyle)) {\n          styleMap.set(themeStyle, { style: { ...themeStyle } });\n        }\n      } else if (typeof themeStyle === 'function') {\n        // If the style is a function, add it to the styleMap\n        if (!styleMap.has(themeStyle)) {\n          styleMap.set(themeStyle, { style: themeStyle });\n        }\n      }\n\n      // Access the __mixinStyle property from the current prototype's constructor\n      const mixinStyle =\n        proto.constructor.hasOwnProperty('__mixinStyle') &&\n        proto.constructor.__mixinStyle;\n\n      if (Object.keys(mixinStyle || {}).length) {\n        if (!styleMap.has(mixinStyle)) {\n          styleMap.set(mixinStyle, { style: mixinStyle });\n        }\n      }\n    }\n  } while (proto);\n\n  // Convert the values of the Map (unique styles) back to an array\n  const uniqueStyles = Array.from(styleMap.values());\n\n  // Return an array of unique style objects with a \"style\" property\n  return uniqueStyles.map(style => style).reverse();\n};\n\n/**\n * Formats a style object by applying a series of formatter functions.\n *\n * @param {object} originalObj - The original style object to be formatted.\n * @param {array} [aliasStyles=[]] - An array of alias styles to be used during formatting.\n * @returns {object} The formatted style object after applying all formatter functions.\n */\nexport const formatStyleObj = (originalObj, aliasStyles = []) => {\n  if (typeof originalObj !== 'object' || originalObj === null) {\n    throw new Error('The originalObj parameter must be an object.');\n  }\n\n  const formatters = new Set();\n\n  // Adding a key-value pair to the 'formatters' Set.\n  // This pattern is used so more formatters can be easily added if required at a later time\n  formatters.add([replaceAliasValues, [aliasStyles]]);\n\n  // Generating an array from the 'formatters' Set\n  const formattersArray = Array.from(formatters);\n\n  // Using reduce to apply functions from 'formattersArray' to 'finalStyle'\n  // Each function takes 'obj' (initially 'finalStyle') as input and applies transformations\n  // The result of the previous function is passed as input to the next function\n  // The final transformed style is assigned to 'this._style'\n  return formattersArray.reduce(\n    (obj, [func, args]) => func(obj, ...args),\n    originalObj\n  );\n};\n\n/**\n * Replaces alias values in the provided style object with their corresponding aliases.\n * @param {object} value - The style object to process.\n * @param {Array<Object>} [aliasStyles=[]] - Optional array of alias styles to apply.\n * @returns {object} The style object with alias values replaced.\n */\nexport const replaceAliasValues = (value, aliasStyles = []) => {\n  if (typeof value !== 'object' || value === null) {\n    throw new Error('Value must be an object');\n  }\n\n  if (!Array.isArray(aliasStyles)) {\n    throw new Error('Alias styles must be an array');\n  }\n\n  let str = JSON.stringify(value);\n  const aliasProps = [\n    { prev: 'height', curr: 'h', skipWarn: true },\n    { prev: 'width', curr: 'w', skipWarn: true },\n    ...(aliasStyles || [])\n  ];\n\n  aliasProps.forEach(alias => {\n    if (\n      alias &&\n      typeof alias.prev === 'string' &&\n      typeof alias.curr === 'string'\n    ) {\n      !alias.skipWarn &&\n        str.search(`\"${alias.prev}\":`) >= 0 &&\n        log.warn(\n          `The style property \"${alias.prev}\" is deprecated and will be removed in a future release. Please use \"${alias.curr}\" instead.`\n        );\n      str = str.replace(\n        new RegExp(`\"${alias.prev}\":`, 'gi'),\n        `\"${alias.curr}\":`\n      );\n    }\n  });\n  return JSON.parse(str);\n};\n","import context from '../../globals/context/index';\n\nconst themeStyleCache = new Map();\n\ncontext.on('themeUpdate', () => {\n  themeStyleCache.clear();\n});\n\nexport default themeStyleCache;\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  generateComponentStyleSource,\n  getStyleChainMemoized,\n  clearStyleChainCache,\n  generateStyle,\n  getHash\n} from './utils';\nimport context from '../../globals/context/index';\nimport { clone } from '../../utils/index';\nimport cache from './cache';\nimport lng from '@lightningjs/core';\n\nexport default class StyleManager extends lng.EventEmitter {\n  /**\n   * Create a Style Manager instance.\n   * @param {object} options - The options object.\n   * @param {object} options.component - The LightningJS component instance.\n   */\n  constructor({ component = {} } = {}) {\n    super(...arguments);\n    this.init(component);\n  }\n\n  init(component) {\n    this.isActive = true;\n    this.component = component;\n    this.setupListeners();\n    this._style = {}; // This will be the source of truth for the style manager\n    // Initial update is not debounced\n    this.update();\n  }\n\n  setupListeners() {\n    // Bind the _onThemeUpdate method to the current instance of the StyleManager class.\n    this._boundThemeUpdate = this._onThemeUpdate.bind(this);\n    this._hasSubTheme = Boolean(this.component._targetSubTheme);\n    if (!this.component._targetSubTheme) {\n      context.on('themeUpdate', this._boundThemeUpdate);\n    } else {\n      context.on(\n        `themeUpdate${this.component._targetSubTheme}`,\n        this._boundThemeUpdate\n      );\n    }\n  }\n\n  clearListeners() {\n    // Bind the _onThemeUpdate method to the current instance of the StyleManager class.\n    if (!this._boundThemeUpdate) return;\n    if (!this.component._targetSubTheme) {\n      context.off('themeUpdate', this._boundThemeUpdate);\n    } else {\n      context.off(\n        `themeUpdate${this.component._targetSubTheme}`,\n        this._boundThemeUpdate\n      );\n    }\n  }\n\n  /**\n   * Destroy the Style Manager instance and remove the themeUpdate event listener.\n   */\n  destroy() {\n    this.isActive = false;\n    this._cleanupCache();\n    // Remove event listeners and subscriptions\n    this.clearListeners();\n    // Set references to null\n    this._styleCache = null;\n    this._boundThemeUpdate = null;\n    this.component = null;\n  }\n\n  /**\n   * Handler for the themeUpdate event. Clears the cache and updates the component's style.\n   * @private\n   */\n  _onThemeUpdate() {\n    clearStyleChainCache();\n    this.clearSourceCache();\n    this.clearStyleCache();\n    this.update();\n  }\n\n  /**\n   * Clears the style chain cache.\n   */\n  clearStyleChainCache() {\n    clearStyleChainCache();\n  }\n\n  /**\n   * Clears the source cache.\n   */\n  clearSourceCache() {\n    if (!this.component) return;\n    const sourceKey = this._generateCacheKey('styleSource');\n    this._removeCache(sourceKey);\n  }\n\n  /**\n   * Clears the style cache.\n   */\n  clearStyleCache() {\n    if (!this.component) return;\n    const { tone, mode } = this.component;\n    const styleKey = this._generateCacheKey(`style_${mode}_${tone}`);\n    cache.delete(styleKey);\n  }\n\n  /**\n   * Generates a cache key.\n   * @param {string} name - The name of the cache.\n   * @returns {string} - The generated cache key.\n   */\n  _generateCacheKey(name) {\n    const cacheKey = [\n      name,\n      this.component._targetSubTheme,\n      this.component.constructor.__componentName,\n      this._customStyleHash\n    ]\n      .filter(Boolean)\n      .join('_');\n    return cacheKey;\n  }\n\n  /**\n   * Adds a cache.\n   * @param {string} name - The name of the cache.\n   * @param {object} payload - The payload of the cache.\n   */\n  _addCache(name, payload) {\n    const key = this._generateCacheKey(name);\n    const existing = cache.get(key);\n    cache.set(key, {\n      ids: [...new Set([...(existing?.ids || []), this.component.__id])], // Add current id and remove duplicates\n      payload\n    });\n  }\n\n  /**\n   * Called when component is destroyed\n   */\n  _cleanupCache() {\n    if (!this.component) return;\n    cache.forEach(({ ids, payload }, name) => {\n      const removeIndex = ids && ids.length && ids.indexOf(this.component.__id);\n      if (removeIndex > -1 && ids.length > 1) {\n        cache.set(name, {\n          ids: ids.slice(0, removeIndex).concat(ids.slice(removeIndex + 1)),\n          payload\n        });\n      } else if (removeIndex > -1) {\n        cache.delete(name);\n      }\n    });\n  }\n\n  /**\n   * Removes a cache.\n   * @param {string} name - The name of the cache.\n   */\n  _removeCache(name) {\n    cache.delete(name);\n  }\n\n  /**\n   * Gets a cache.\n   * @param {string} name - The name of the cache.\n   * @returns {object|boolean} - The cache or false if the component has inline styles.\n   */\n  _getCache(name) {\n    const key = this._generateCacheKey(name);\n    return cache.get(key);\n  }\n\n  /**\n   * Updates the component's style based on changes in tone, mode, theme, and `_componentLevelStyle`.\n   * Clears the style cache if tone or mode have changed, and clears the source cache if `_componentLevelStyle` has changed.\n   * Generates the component's style source and style objects, saves them to the cache, and emits a `styleUpdate` event with the updated style.\n   * @returns {Promise<void>}\n   */\n  update() {\n    if (!this.component) return;\n\n    const { mode, tone } = this.component;\n\n    try {\n      // Attempt to fetch style source from cache\n      let styleSource = this._getCache('styleSource')?.payload;\n\n      if (!styleSource) {\n        // Style source does not exist so it will need to be generated. We attempt to run this function only when necessary for optimal performance\n        styleSource = generateComponentStyleSource({\n          alias: this.component.constructor.aliasStyles,\n          inlineStyle: this.component._componentLevelStyle,\n          styleChain: getStyleChainMemoized(this.component),\n          theme: this.component.theme\n        });\n\n        this._addCache('styleSource', styleSource);\n      }\n\n      // Attempt to fetch style from cache\n      let style = this._getCache(`style_${mode}_${tone}`)?.payload;\n\n      if (!style) {\n        // Style does not exist so will also need to be generated\n        style = generateStyle(this.component, styleSource);\n        this._addCache(`style_${mode}_${tone}`, style);\n      }\n\n      this._style = style;\n      this.emit('styleUpdate', this.style);\n    } catch (error) {\n      context.error('styleManager: ', error.message);\n    }\n  }\n\n  /**\n   * Accessors\n   */\n  set style(v) {\n    context.warn('styleManager: Cannot mutate style directly');\n  }\n\n  get style() {\n    return this._style;\n  }\n\n  set props(v) {\n    context.warn('styleManager: Cannot mutate props directly');\n  }\n\n  get props() {\n    return Object.keys(this.component._componentConfig).reduce((acc, key) => {\n      if (!['base', 'tone', 'mode', 'style', 'styleConfig'].includes(key)) {\n        acc[key] = this.component._componentConfig[key];\n      }\n\n      return acc;\n    }, {});\n  }\n\n  /**\n   * Simple check to see if this component can leverage caching. Components using .style cannot use the cache at this time\n   */\n  get _customStyleHash() {\n    const hasCustomStyle =\n      Boolean(\n        Object.keys(this.component.constructor.__mixinStyle || {}).length\n      ) ||\n      Boolean(Object.keys(this.component._componentLevelStyle || {}).length);\n\n    if (hasCustomStyle) {\n      return getHash(\n        clone(\n          this.component.constructor.__mixinStyle || {},\n          this.component._componentLevelStyle || {}\n        )\n      );\n    }\n\n    return undefined;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport StyleManager from './StyleManager';\nimport { updateManager } from '../../globals/global-update-manager/GlobalUpdateManager';\nimport context from '../../globals/context';\nimport { getComponentConfig, getSubTheme } from './utils';\nimport { capitalizeFirstLetter } from '../../utils';\n\n/**\n * Merges two objects based on the following rules:\n * 1. If a key exists in both objects, use the value from the second object.\n * 2. If a key exists in the first object but not in the second, set the value to undefined.\n * 3. If a key exists in the second object but not in the first, include it in the result.\n * 4. Maintain the structure of the first object and augment it with extra keys from the second object.\n *\n * @param {Object|Array} firstObj - The first object, providing the structure to match.\n * @param {Object|Array} secondObj - The second object, whose values take precedence.\n * @returns {Object|Array} A new object with a merged structure and values.\n */\nfunction mergeObjectsWithSecondDominant(firstObj, secondObj) {\n  if (firstObj !== null && typeof firstObj === 'object') {\n    if (Array.isArray(firstObj)) {\n      return firstObj.map((item, index) =>\n        mergeObjectsWithSecondDominant(\n          item,\n          Array.isArray(secondObj) ? secondObj[index] : undefined\n        )\n      );\n    } else {\n      const result = {};\n      // Combine keys from both objects to ensure all keys are covered\n      const allKeys = new Set([\n        ...Object.keys(firstObj),\n        ...Object.keys(secondObj)\n      ]);\n      allKeys.forEach(key => {\n        // Recurse for nested objects or arrays\n        if (typeof firstObj[key] === 'object' && firstObj[key] !== null) {\n          result[key] = mergeObjectsWithSecondDominant(\n            firstObj[key],\n            secondObj[key] || {}\n          );\n        } else if (\n          typeof secondObj[key] === 'object' &&\n          secondObj[key] !== null\n        ) {\n          result[key] = mergeObjectsWithSecondDominant(\n            firstObj[key] || {},\n            secondObj[key]\n          );\n        } else {\n          // Use value from the second object if available, else set to undefined\n          result[key] = secondObj.hasOwnProperty(key)\n            ? secondObj[key]\n            : undefined;\n        }\n      });\n      return result;\n    }\n  } else {\n    // Return non-object values directly\n    return firstObj;\n  }\n}\n\n/**\n * A higher-order function that returns a class with theme styles.\n * @param {function} Base - The base class to extend.\n * @param {object} mixinStyle - The mixin style to add to the component.\n * @returns {function} A class that extends the base class with theme styles.\n */\nexport default function withThemeStyles(Base, mixinStyle = {}) {\n  return class extends Base {\n    _construct() {\n      if (this._withThemeStylesSetupComplete) {\n        // Make sure this runs ony once if being used on a component that extends another component that is utilizing withThemeStyles\n        super._construct();\n        return;\n      }\n\n      this._hSetByUser = false;\n      this._wSetByUser = false;\n\n      this._styleManager = new StyleManager({ component: this });\n      this._style = this._styleManager.style; // Set the style for the first time. After this is will be updated by events\n      this._updatePropDefaults();\n      this._styleManager.on('styleUpdate', () => {\n        this._style = this._styleManager.style;\n        this._updatePropDefaults();\n        this.queueThemeUpdate();\n      });\n      this._withThemeStylesSetupComplete = true;\n      super._construct(); // Important that this is called at the bottom to ensure that withThemeStyles is only initialized once per component to prevent potential memory leaks\n    }\n\n    /**\n     * Checks for subThemes on _setup lifecycle event to allow the component to traverse the tree to find child theme properties.\n     * @private\n     * @returns {void}\n     */\n    _setup() {\n      super._setup && super._setup();\n      this._targetSubTheme = getSubTheme(this);\n      if (this._targetSubTheme) {\n        this._styleManager.clearListeners();\n        this._styleManager.setupListeners();\n        this._styleManager.clearStyleChainCache();\n        this._styleManager.clearStyleCache();\n        this._styleManager.clearSourceCache();\n        this._styleManager.update();\n      }\n    }\n\n    /**\n     * Updates the default properties of the component based on the current theme.\n     * It compares the previous component configuration properties with the current style manager properties,\n     * and updates the component's properties accordingly. If the properties are unchanged, no action is taken.\n     * This method is crucial for ensuring the component's properties are synchronized with the theme.\n     */\n    _updatePropDefaults() {\n      // If the current properties are the same as the previous configuration, no update is needed\n\n      if (\n        !Object.keys(this._styleManager.props).length ||\n        JSON.stringify(this._styleManager.props) ===\n          JSON.stringify(this._prevComponentConfigProps)\n      ) {\n        return;\n      }\n\n      // Compare current properties with previous configuration and get the payload\n      const payload = this._prevComponentConfigProps\n        ? mergeObjectsWithSecondDominant(\n            this._prevComponentConfigProps || {},\n            this._styleManager.props || {}\n          )\n        : this._styleManager.props || {};\n\n      // Store a deep copy of the current properties for future comparison\n      this._prevComponentConfigProps =\n        this._styleManager.props &&\n        JSON.parse(JSON.stringify(this._styleManager.props));\n\n      // This will be used by withUpdates to set defaults\n      this.__componentConfigProps = payload;\n    }\n\n    /**\n     * On component attach, ensures the StyleManager has been reinitialized if it was previously destroyed in detach.\n     * @private\n     * @returns {void}\n     */\n    _attach() {\n      super._attach();\n      if (!this._styleManager.isActive) {\n        this._styleManager.init(this);\n      }\n    }\n\n    /**\n     * Detaches the component and destroys the style manager.\n     * @private\n     * @returns {void}\n     */\n    _detach() {\n      super._detach();\n      this._styleManager.destroy();\n    }\n\n    /**\n     * Updates the mode to 'unfocused' when the component is unfocused.\n     * @private\n     * @internal\n     * @returns {void}\n     */\n    _unfocus() {\n      if (this._isFocusedMode) this.mode = 'unfocused';\n      super._unfocus();\n    }\n\n    /**\n     * Updates the mode to 'focused' when the component is focused.\n     * @private\n     * @returns {void}\n     */\n    _focus() {\n      if (!this._isDisabledMode) this.mode = 'focused';\n      super._focus();\n    }\n\n    /**\n     * Checks if dimensions need updating, and updates if necessary.\n     * Fixes mount issues if height is controlled by a component's style alone.\n     * Setters for w/h will set the wSetByUser and hSetByUser flag to block this functionality and allow customization.\n     * @private\n     * @returns {void}\n     */\n    _checkDimensionUpdates() {\n      let dimensionUpdateRequired = false;\n\n      if (!this._wSetByUser && this.style.w && this._w !== this.style.w) {\n        this._w = this.style.w;\n        dimensionUpdateRequired = true;\n      }\n\n      if (!this._hSetByUser && this.style.h && this._h !== this.style.h) {\n        this._h = this.style.h;\n        dimensionUpdateRequired = true;\n      }\n\n      if (dimensionUpdateRequired) {\n        this._updateDimensions();\n      }\n    }\n\n    /**\n     * Called by the update manager to trigger the _update lifecycle.\n     * If `queueRequestUpdate` is undefined, then it's OK to call `_update()` directly because\n     * the component does not have the `withUpdates` mixin, and hence `requestUpdate()` will not be defined either.\n     * This check allows this mixin to work without `withUpdates`.\n     * @private\n     * @returns {void}\n     */\n    _updateThemeComponent() {\n      if (!this.style) return;\n      if (!this._isAttached()) return;\n      this._checkDimensionUpdates();\n      this.queueRequestUpdate\n        ? this.queueRequestUpdate()\n        : this._update && this._update();\n      this._updateItemLayout && this._updateItemLayout();\n    }\n\n    /**\n     * Queues component for update by the Global Update Manager.\n     * @returns {void}\n     */\n    queueThemeUpdate() {\n      updateManager.addUpdateTheme(this);\n    }\n\n    static get name() {\n      return Base.name;\n    }\n\n    static get __componentName() {\n      if (!super.__componentName) {\n        throw new Error(\n          `A valid static __componentName property is required for theming to work properly. Please add this to the ${this.constructor.name} class.`\n        );\n      }\n      return super.__componentName;\n    }\n\n    static get __mixinStyle() {\n      return mixinStyle;\n    }\n\n    /**\n     * Reference to the global theme\n     * @return {object}\n     */\n    get theme() {\n      const subTheme =\n        this._targetSubTheme && context.getSubTheme(this._targetSubTheme);\n      return subTheme || context.theme;\n    }\n\n    /**\n     * Set component level styles\n     * @param {object} v - The styles to set, mode, and tone are not allowed\n     */\n    set style(v) {\n      if (Object.prototype.toString.call(v) !== '[object Object]') {\n        context.error('style must be an object');\n        return;\n      }\n      this._componentLevelStyle = v;\n      this._styleManager.clearStyleCache();\n      this._styleManager.update();\n    }\n\n    /**\n     * Get component level styles\n     * @return {object}\n     */\n    get style() {\n      return this._style;\n    }\n\n    /**\n     * Get component level styles\n     * @return {object}\n     */\n    get _componentStyle() {\n      /** No longer supported */\n      context.info(\n        '_componentStyle will soon be deprecated. Please use Component.style'\n      );\n      return this._style;\n    }\n\n    /**\n     * Set component styleConfig\n     * @param {object} v - Special configuration rules to override styles\n     */\n    set styleConfig(v) {\n      context.info(\n        'style config is deprecated. Please use style = { base: {}, tone: {}, mode: {} }'\n      );\n      this._styleConfig = v;\n      this._styleManager.update();\n    }\n\n    /**\n     * Get component styleConfig\n     * @return {object}\n     */\n    get styleConfig() {\n      return this._styleConfig;\n    }\n\n    /**\n     * Theme configuration for overrides and defaults\n     * @return {object}\n     */\n    get _componentConfig() {\n      return getComponentConfig(this);\n    }\n\n    /**\n     * Get the mode property\n     * @return {string}\n     */\n    get mode() {\n      return this._mode || this._componentConfig?.mode || 'unfocused';\n    }\n\n    /**\n     * Set the mode property\n     * @param {string} v - The mode value to set\n     */\n    set mode(v) {\n      if (typeof v !== 'string' || this._mode === v) return;\n      this._mode = v;\n      const event = this[`on${capitalizeFirstLetter(v)}`];\n      if (event && typeof event === 'function') event.call(this);\n      this._styleManager.update();\n    }\n\n    /**\n     * Get the tone property\n     * @return {string}\n     */\n    get tone() {\n      return this._tone || this._componentConfig.tone || 'neutral';\n    }\n\n    /**\n     * Set the tone property\n     * @param {string} value - The tone value to set\n     */\n    set tone(v) {\n      if (typeof v !== 'string' || this._tone === v) return;\n      this._tone = v;\n      this._styleManager.update();\n    }\n\n    /**\n     * Allow for w to be overwritten by user if also in component's style file\n     * @return {number}\n     */\n    get w() {\n      return (this._wSetByUser && this._w) || this.style?.w || 0;\n    }\n\n    /**\n     * Set the w property\n     * @param {number} v - The w value to set\n     */\n    set w(v) {\n      if (this._w === v) return;\n      super.w = v;\n      this._wSetByUser = true;\n      this._updateThemeComponent();\n    }\n\n    /**\n     * Get the h property\n     * @return {number}\n     */\n    get h() {\n      return (this._hSetByUser && this._h) || this.style?.h || this._h || 0;\n    }\n\n    /**\n     * Set the h property\n     * @param {number} v - The h value to set\n     */\n    set h(v) {\n      if (this._h === v) return;\n      super.h = v;\n      this._hSetByUser = true;\n      this._updateThemeComponent();\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../../globals/context/index';\n\nconst SUFFIX = '__original';\n\nexport default function withExtensions(Base) {\n  if (Base.prototype.constructor._withExtensionsApplied) {\n    return Base;\n  }\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    static get __componentName() {\n      if (!super.__componentName) {\n        throw new Error(\n          `A valid static __componentName property is required for theming to work properly. Please add this to the ${this.constructor.name} class.`\n        );\n      }\n      return super.__componentName;\n    }\n\n    static get _withExtensionsApplied() {\n      // Extensions should only be applied once per class. This prevents it running multiple times. Ex. Surface -> Tile\n      return true;\n    }\n\n    /**\n     * Climb the prototype chain to establish what component's extension rules this component should also inherit\n     * @returns {set} // set of strings\n     */\n    get _prototypeChain() {\n      if (this.__prototypeChain) return this.__prototypeChain;\n      const prototypeChain = new Set();\n      let proto = this;\n      do {\n        proto = Object.getPrototypeOf(proto);\n        if (null !== proto && typeof proto === 'object') {\n          try {\n            if (proto.constructor.__componentName)\n              prototypeChain.add(proto.constructor.__componentName);\n          } catch (error) {\n            // Catch error when __componentName is not set in Base component\n          }\n        }\n      } while (proto);\n      this.__prototypeChain = prototypeChain;\n      return prototypeChain;\n    }\n\n    /**\n     * Get all valid extensions from the current theme\n     * @returns {object[]} // Array of objects\n     */\n    get _extensions() {\n      const extensions = context && context.theme && context.theme.extensions;\n      if (\n        !extensions ||\n        !Array.isArray(extensions) ||\n        (Array.isArray(extensions) && !extensions.length)\n      )\n        return [];\n      return (\n        extensions\n          .filter(\n            ({ targetComponent, extension }) =>\n              (typeof targetComponent === 'string' ||\n                Array.isArray(targetComponent)) &&\n              typeof extension === 'function'\n          )\n          .slice()\n          .reverse() || [] // Array is reversed to ensure extensions are executed in the proper order top -> bottom\n      );\n    }\n\n    /**\n     * Get all extensions to apply to this component\n     * @return {class[]} // Array of classes\n     */\n    get _componentExtensions() {\n      return this._extensions\n        .filter(({ targetComponent }) => {\n          // check to see if extension should be applied to this component\n          if (typeof targetComponent === 'string') {\n            return (\n              targetComponent === this.constructor.__componentName ||\n              this._prototypeChain.has(targetComponent)\n            );\n          } else if (Array.isArray(targetComponent)) {\n            return targetComponent.find(pattern => {\n              if (pattern.startsWith('/') && pattern.endsWith('/')) {\n                const ComponentRegExp = new RegExp(pattern.slice(1, -1));\n                return Array.from(this._prototypeChain).some(name =>\n                  ComponentRegExp.test(name)\n                );\n              } else {\n                return this._prototypeChain.has(pattern);\n              }\n            });\n          }\n          return false;\n        })\n        .reduce((acc, { extension }) => {\n          acc.push(extension);\n          return acc;\n        }, []);\n    }\n\n    /**\n     * Check if theme extension mixins have already been applied\n     * @return {boolean}\n     */\n    get _extensionApplied() {\n      return (\n        this._currentComponentExtensionLength === this._appliedExtensionLength\n      );\n    }\n\n    _construct() {\n      this._appliedExtensionLength = 0; // After the extensions are applied we store the length of all to determine later on if they have been applied before\n      this._extendedList = {};\n      this._extensionInstance = {}; // This will hold the extension instance once created\n      this._setupExtensionBound = this._setupExtension.bind(this);\n      context.on('themeUpdate', this._setupExtensionBound);\n      this._currentComponentExtensionLength =\n        this._calculateComponentExtensionLength();\n      this._createExtension();\n      super._construct();\n    }\n\n    _detach() {\n      super._detach();\n      context.off('themeUpdate', this._setupExtensionBound);\n    }\n\n    _setupExtension() {\n      this._currentComponentExtensionLength =\n        this._calculateComponentExtensionLength();\n      this._createExtension.call(this);\n    }\n\n    _resetComponent() {\n      this._extensionInstance._extensionCleanup &&\n        this._extensionInstance._extensionCleanup.call(this);\n\n      (Object.keys(this._extendedList) || []).forEach(prop => {\n        delete this[prop];\n        delete this[prop + SUFFIX];\n      });\n\n      this._extensionInstance = {};\n      this._extendedList = {};\n    }\n\n    _calculateComponentExtensionLength() {\n      const extensionLength = this._componentExtensions.reduce(\n        (acc, extensionMixin) => {\n          acc += extensionMixin.toString().length;\n          return acc;\n        },\n        0\n      );\n      return extensionLength;\n    }\n\n    _createExtension() {\n      if (this._extensionApplied) return;\n      this._resetComponent();\n      const ExtendedClass = this._createExtensionClass();\n      const instance = new ExtendedClass();\n      this._extendedList = this._createExtensionAliases(instance);\n      this._extensionInstance = instance;\n      this._setComponentAliases(this._extendedList);\n    }\n\n    /**\n     * Create the extension class\n     * @return {class}\n     */\n    _createExtensionClass() {\n      /**\n       *\n       * This class will sit at the bottom of the prototype stack and redirect all calls to the original to prevent an infinite loop\n       *\n       */\n      function ExtensionBase() {}\n\n      /** Create a new class the represents the extensions */\n      const ExtendedClass = this._componentExtensions.reduce(\n        (acc, extension) => {\n          // Get the length of the extension and store the value. This will be used to determine if the mixin has been changed and needs to be re-applied\n          return extension(acc);\n        },\n        ExtensionBase\n      );\n\n      // Store the length of the extension to be applied\n      this._appliedExtensionLength = this._calculateComponentExtensionLength();\n\n      return ExtendedClass;\n    }\n\n    _createExtensionAliases(obj) {\n      // Find the prototype to be replaced\n      let baseProto = obj;\n      for (let i = 0; i < this._componentExtensions.length + 1; i++) {\n        baseProto = Object.getPrototypeOf(baseProto);\n      }\n\n      /**\n       * We will create alias for all the methods, getters, setters that will be overwritten by the extension layer\n       * Create a list of properties to alias\n       */\n\n      const extended = {};\n\n      const extensionOverrides = this._componentExtensions.reduce(\n        (acc, extension) => {\n          const extensionClass = new extension(class FakeClass {});\n          const instance = new extensionClass();\n          // Get the descriptors\n          const originalComponentDescriptors = Object.getOwnPropertyDescriptors(\n            Object.getPrototypeOf(instance)\n          );\n          Object.keys(originalComponentDescriptors).forEach(prop => {\n            if (['constructor'].includes(prop)) return;\n            if (\n              originalComponentDescriptors[prop].get ||\n              originalComponentDescriptors[prop].set\n            ) {\n              extended[prop] = { type: 'accessor' };\n              acc[prop] = {\n                get: function () {\n                  return this[prop + SUFFIX];\n                },\n                set: function (v) {\n                  this[prop + SUFFIX] = v;\n                }\n              };\n              return;\n            }\n            extended[prop] = { type: 'method' };\n            acc[prop] = {\n              value: function () {\n                this[prop + SUFFIX] && this[prop + SUFFIX]();\n              }\n            };\n          });\n          return acc;\n        },\n        {}\n      );\n\n      Object.defineProperties(baseProto, extensionOverrides);\n      Object.setPrototypeOf(baseProto, this); // Set the bottom level prototype === the component\n\n      return extended;\n    }\n\n    _setComponentAliases(aliasObj) {\n      Object.keys(aliasObj).forEach(prop => {\n        // Create an alias for the existing component property to save the original value\n        this[prop + SUFFIX] = this[prop];\n        if (aliasObj[prop].type === 'method') {\n          this[prop] = this._extensionInstance[prop];\n        } else if (aliasObj[prop].type === 'accessor') {\n          Object.defineProperty(this, prop, {\n            configurable: true, // Allow accessors to be updated on theme change\n            get() {\n              return this._extensionInstance[prop];\n            },\n            set(v) {\n              this._extensionInstance[prop] = v;\n            }\n          });\n        }\n      });\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport context from '../../globals/context/index';\nimport withUpdates from '../../mixins/withUpdates';\nimport withTags from '../../mixins/withTags';\nimport withHandleKey from '../../mixins/withHandleKey';\nimport withLayout from '../../mixins/withLayout';\nimport withThemeStyles from '../../mixins/withThemeStyles';\nimport withExtensions from '../../mixins/withExtensions';\nimport { isComponentOnScreen } from '../../utils';\n\nclass Base extends lng.Component {\n  static get __componentName() {\n    return 'Base';\n  }\n\n  _construct() {\n    this.constructor.__componentName; // Check that __componentName is set\n    this.skipPlinko = false;\n    this.centerInParent = false;\n    if (!this.loaded) this.loaded = Promise.resolve(); // By default this is a resolved promise. Components can use _resetLoadedPromise if they require the functionality\n  }\n\n  _init() {\n    this.queueRequestUpdate();\n  }\n\n  _resetLoadedPromise() {\n    this.loaded = new Promise((resolve, reject) => {\n      this._resolveLoadedPromise = resolve;\n      this._rejectLoadedPromise = reject;\n    });\n  }\n\n  _update() {}\n\n  _focus() {\n    this._updateShouldSmooth();\n    this.queueRequestUpdate();\n  }\n\n  _unfocus() {\n    this.queueRequestUpdate();\n  }\n\n  _updateShouldSmooth() {\n    if (this.shouldSmooth === undefined) this.shouldSmooth = true;\n  }\n\n  /**\n   * This method accepts a target component, patch object, and optional smooth object.\n   * If the component is visible, it will smooth in the smooth object, or fall back to\n   * the patch object, if not it will apply the patch.\n   *\n   * @param {component reference} ref tag ref of target component\n   * @param {object} patch object of properties to patch to target\n   * @param {object} smooth object of properties to smooth to target\n   */\n  applySmooth(ref, patch, smooth) {\n    if (this.shouldSmooth) {\n      ref.smooth = smooth || patch;\n    } else {\n      ref.patch(patch);\n    }\n  }\n\n  // keep announce methods out of the update lifecycle (do not put in properties array)\n  // announce methods do not need to re-render component\n  get announce() {\n    return this._announce;\n  }\n\n  set announce(announce) {\n    this._announce = announce;\n  }\n\n  get announceContext() {\n    return this._announceContext;\n  }\n\n  set announceContext(announce) {\n    this._announceContext = announce;\n  }\n\n  get shouldSmooth() {\n    return this._shouldSmooth;\n  }\n\n  set shouldSmooth(shouldSmooth) {\n    this._shouldSmooth = shouldSmooth;\n  }\n\n  get _isDisabledMode() {\n    return this.mode === 'disabled';\n  }\n\n  get _isUnfocusedMode() {\n    return this.mode === 'unfocused';\n  }\n\n  get _isFocusedMode() {\n    return this.mode === 'focused';\n  }\n\n  isFullyOnScreen(offsets) {\n    return isComponentOnScreen(this, offsets);\n  }\n\n  getFocusScale() {\n    return context.theme.layout.focusScale;\n  }\n\n  getUnfocusScale() {\n    return 1;\n  }\n}\n\nfunction withMixins(baseComponent) {\n  return withExtensions(\n    withLayout(\n      withThemeStyles(withUpdates(withTags(withHandleKey(baseComponent))))\n    )\n  );\n}\n\nexport default withMixins(Base);\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  gradientTop: theme.color.fillTransparent,\n  radius: theme.radius.none\n});\n\nexport const tone = theme => ({\n  neutral: { gradientColor: theme.color.material },\n  inverse: { gradientColor: theme.color.fillNeutral },\n  brand: { gradientColor: theme.color.fillBrand }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './Gradient.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Gradient extends Base {\n  static get __componentName() {\n    return 'Gradient';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _update() {\n    this.patch({\n      rect: true,\n      rtt: true,\n      colorTop: this.style.gradientTop,\n      colorBottom: this.style.gradientColor,\n      texture: lng.Tools.getRoundRect(\n        this.w,\n        this.h,\n        getMaxRoundRadius(this.style.radius, this.w, this.h)\n      )\n    });\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  animationBlurEntrance: theme.animation.utilityEntrance,\n  animationBlurExit: theme.animation.utilityExit,\n  animationComponentEntrance: theme.animation.utilityEntrance,\n  animationGradientEntrance: theme.animation.utilityEntrance,\n  animationGradientExit: theme.animation.utilityExit,\n  animationImageScaleEntrance: theme.animation.standardEntrance,\n  animationImageScaleExit: theme.animation.standardEntrance,\n  blur: 4,\n  centerImageRadius: theme.radius.md,\n  fallbackSrc: undefined,\n  fillColor: theme.color.overlay,\n  gradientColor: theme.color.material,\n  imageScale: 1,\n  imageScalePivotX: 0.5,\n  imageScalePivotY: 0.5,\n  padding: theme.spacer.md,\n  radius: 0,\n  zIndexSet: {\n    image: 1,\n    blur: 2,\n    centerImage: 3,\n    fill: 4,\n    gradient: 5,\n    foreground: 6\n  }\n});\n","import lng from '@lightningjs/core';\n\n/**\n * Represents an image texture that supports loading blob images and SVG strings without using web workers.\n */\n\n/**\n * Checks the file type based on the given string.\n * @param {string} str - The input string to check.\n * @returns {string} The file type.\n */\nfunction checkFileType(str) {\n  if (str.startsWith('<svg')) {\n    return 'SVG';\n  } else if (str.startsWith('blob:')) {\n    return 'Blob';\n  } else if (/\\.(jpeg|jpg|gif|png|svg)$/i.test(str)) {\n    return 'Image';\n  } else {\n    return 'Unknown';\n  }\n}\n\n/**\n * Creates an SVG canvas.\n * @param {function} cb - The callback function.\n * @param {object} stage - The stage object.\n * @param {string} url - The URL of the SVG.\n * @param {number} w - The width of the canvas.\n * @param {number} h - The height of the canvas.\n */\nfunction createSvg(cb, stage, url, w, h) {\n  const canvas = stage.platform.getDrawingCanvas();\n  const ctx = canvas.getContext('2d');\n  ctx.imageSmoothingEnabled = true;\n\n  const img = new Image();\n  img.onload = () => {\n    canvas.width = w;\n    canvas.height = h;\n    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n    cb(null, { source: canvas, w, h });\n  };\n  img.onerror = err => {\n    cb(err);\n  };\n\n  // On the PS4 platform setting the `crossOrigin` attribute on images\n  // can cause CORS failures.\n  if (!lng.Utils.isPS4) {\n    img.crossOrigin = 'Anonymous';\n  }\n\n  img.src = url;\n}\n\n/**\n * Loads an image from the given source.\n * @param {object} params - The parameters object.\n * @param {string} params.src - The source URL of the image.\n * @param {function} cb - The callback function.\n * @returns {function} A cancel callback function.\n */\nfunction imageLoader({ src }, cb) {\n  const image = new Image();\n\n  // On the PS4 platform setting the `crossOrigin` attribute on\n  // images can cause CORS failures.\n  if (!(src.substr(0, 5) == 'data:') && !lng.Utils.isPS4) {\n    image.crossOrigin = 'Anonymous';\n  }\n  image.onerror = function () {\n    // Ignore error message when cancelled.\n    if (image.src) {\n      return cb('Image load error');\n    }\n  };\n  image.onload = function () {\n    cb(null, {\n      source: image,\n      renderInfo: { src: src, compressed: false },\n      hasAlpha: true\n    });\n  };\n\n  image.src = src;\n\n  return function () {\n    // Cancel Callback\n    image.onerror = null;\n    image.onload = null;\n    image.removeAttribute('src');\n  };\n}\n\n/**\n * Represents an image texture.\n */\nexport default class CustomImageTexture extends lng.Texture {\n  /**\n   * Creates a new ImageTexture instance.\n   * @param {object} stage - The stage object.\n   */\n  constructor(stage) {\n    super(stage);\n\n    this._src = undefined;\n    this._hasAlpha = false;\n  }\n\n  /**\n   * Gets the source URL of the image.\n   * @returns {string} The source URL.\n   */\n  get src() {\n    return this._src;\n  }\n\n  /**\n   * Sets the source URL of the image.\n   * @param {string} v - The source URL.\n   */\n  set src(v) {\n    if (this._src !== v) {\n      this._src = v;\n      this._changed();\n    }\n  }\n\n  /**\n   * Gets the flag indicating whether the image has an alpha channel.\n   * @returns {boolean} The flag value.\n   */\n  get hasAlpha() {\n    return this._hasAlpha;\n  }\n\n  /**\n   * Sets the flag indicating whether the image has an alpha channel.\n   * @param {boolean} v - The flag value.\n   */\n  set hasAlpha(v) {\n    if (this._hasAlpha !== v) {\n      this._hasAlpha = v;\n      this._changed();\n    }\n  }\n\n  /**\n   * Gets the width of the image.\n   * @returns {number} The width value.\n   */\n  get w() {\n    return this._w;\n  }\n\n  /**\n   * Sets the width of the image.\n   * @param {number} l - The width value.\n   */\n  set w(l) {\n    this._w = l;\n    this._changed();\n  }\n\n  /**\n   * Gets the height of the image.\n   * @returns {number} The height value.\n   */\n  get h() {\n    return this._h;\n  }\n\n  /**\n   * Sets the height of the image.\n   * @param {number} l - The height value.\n   */\n  set h(l) {\n    this._h = l;\n    this._changed();\n  }\n\n  /**\n   * Checks if the image texture is valid.\n   * @returns {boolean} True if valid, otherwise false.\n   */\n  _getIsValid() {\n    return !!this._src;\n  }\n\n  /**\n   * Gets the lookup ID of the image texture.\n   * @returns {string} The lookup ID.\n   */\n  _getLookupId() {\n    return this._src;\n  }\n\n  /**\n   * Gets the source loader function for the image texture.\n   * @returns {function} The source loader function.\n   */\n  _getSourceLoader() {\n    const w = this._w;\n    const h = this._h;\n    let src = this._src;\n    const hasAlpha = this._hasAlpha;\n    if (this.stage.getOption('srcBasePath')) {\n      const fc = src.charCodeAt(0);\n      if (\n        src.indexOf('//') === -1 &&\n        ((fc >= 65 && fc <= 90) || (fc >= 97 && fc <= 122) || fc == 46)\n      ) {\n        // Alphabetical or dot: prepend base path.\n        src = this.stage.getOption('srcBasePath') + src;\n      }\n    }\n\n    return cb => {\n      const fileType = checkFileType(src);\n      switch (fileType) {\n        case 'SVG':\n          return createSvg(\n            cb,\n            this.stage,\n            `data:image/svg+xml,${encodeURIComponent(src)}`,\n            w,\n            h\n          );\n\n        case 'Blob':\n          return imageLoader({ src }, cb);\n        default:\n          return this.stage.platform.loadSrcTexture(\n            { src: src, hasAlpha: hasAlpha },\n            cb\n          );\n      }\n    };\n  }\n\n  /**\n   * Gets the non-default properties of the image texture.\n   * @returns {object} The non-default properties.\n   */\n  getNonDefaults() {\n    const obj = super.getNonDefaults();\n    if (this._src) {\n      obj.src = this._src;\n    }\n    return obj;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport { getMaxRoundRadius, getValidColor, reduceFraction } from '../../utils';\nimport Base from '../Base';\nimport Gradient from '../Gradient';\nimport * as styles from './Artwork.styles';\nimport context from '../../globals/context/index';\nimport CustomImageTexture from '../../textures/CustomImageTexture';\n\nexport default class Artwork extends Base {\n  static get __componentName() {\n    return 'Artwork';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [\n      'blur',\n      'fallbackSrc',\n      'foregroundHeight',\n      'foregroundSrc',\n      'foregroundWidth',\n      'gradient',\n      'format',\n      'src',\n      'fill',\n      'shouldScale',\n      'srcCallback',\n      'srcCallbackAspectRatios'\n    ];\n  }\n\n  static get tags() {\n    return [\n      'Blur',\n      'CenterImage',\n      'FillColor',\n      'ForegroundImage',\n      'Gradient',\n      'Image',\n      'Item'\n    ];\n  }\n\n  static get aliasProperties() {\n    return [\n      { prev: 'foregroundH', curr: 'foregroundHeight' },\n      { prev: 'foregroundW', curr: 'foregroundWidth' }\n    ];\n  }\n\n  static _template() {\n    return {\n      rtt: true,\n      Image: {}\n    };\n  }\n\n  get _shouldBlur() {\n    const shouldBur = this._blur || this._hasCenterImage;\n    this._Image.rtt = shouldBur; // rtt can cause a performance hit. Remove if not needed on Image\n    return shouldBur; // Artwork should always use blur when circleImage is set to true\n  }\n\n  get _hasCenterImage() {\n    return (\n      -1 < ['circle', 'square'].indexOf(this.format) ||\n      ('contain' === this.format && !this._aspectRatioEqual)\n    );\n  }\n\n  set w(v) {\n    if (v === super.w) return;\n    super.w = v;\n    this._componentSrc = this._generatePromise();\n  }\n\n  get w() {\n    return super.w;\n  }\n\n  set h(v) {\n    if (v === super.h) return;\n    super.h = v;\n    this._componentSrc = this._generatePromise();\n  }\n\n  get h() {\n    return super.h;\n  }\n\n  get _actualAspectRatio() {\n    if (!this.w || !this.h) return null;\n    return reduceFraction(`${this.w}/${this.h}`).replace('/', 'x');\n  }\n\n  get _supportedAspectRatioHeights() {\n    return this.srcCallbackAspectRatios.map(ratio => {\n      const [rw, rh] = ratio.split('x').map(v => parseInt(v));\n      const calcHeight = (this.w / rw) * rh;\n      return calcHeight;\n    });\n  }\n\n  get _closestSupportedAspectRatio() {\n    const closest = this._supportedAspectRatioHeights.reduce((prev, curr) =>\n      Math.abs(curr - this.h) < Math.abs(prev - this.h) ? curr : prev\n    );\n    return this.srcCallbackAspectRatios[\n      this._supportedAspectRatioHeights.indexOf(closest)\n    ];\n  }\n\n  get _processedImageSrc() {\n    let src = this.src || this.fallbackSrc;\n    if (\n      src !== this.fallbackSrc &&\n      this.srcCallback &&\n      typeof this.srcCallback === 'function'\n    ) {\n      src = this.srcCallback({\n        closestAspectRatio: this._closestSupportedAspectRatio,\n        aspectRatio: this._actualAspectRatio,\n        src: this.src,\n        w: this.w,\n        h: this.h\n      });\n    }\n\n    return src && src.then ? src : Promise.resolve(src);\n  }\n\n  get _gradientPatch() {\n    return {\n      alpha: !this._Gradient && this.shouldSmooth ? 0.001 : 1,\n      style: {\n        gradientColor: getValidColor(this.style.gradientColor)\n      },\n      h: this.h + 4,\n      type: Gradient,\n      w: this.w + 4,\n      x: -2,\n      y: -2,\n      zIndex: this.core.findZContext().zIndex + this.style.zIndexSet.gradient\n    };\n  }\n\n  _construct() {\n    super._construct();\n    this._srcCallbackAspectRatios = ['16x9', '3x4', '4x3', '2x1', '1x1'];\n  }\n\n  _setSrc(v) {\n    this._componentSrc = this._generatePromise();\n    return v;\n  }\n\n  _getFallbackSrc() {\n    return this._fallbackSrc || (this.style && this.style.fallbackSrc);\n  }\n\n  _generatePromise() {\n    // When a new src, w, or h value is added promises need to be reset\n    let resolvePromise, rejectPromise;\n    const complete = new Promise(function (resolve, reject) {\n      resolvePromise = resolve;\n      rejectPromise = reject;\n    });\n    return {\n      complete,\n      resolve: resolvePromise,\n      reject: rejectPromise\n    };\n  }\n\n  _setup() {\n    this.alpha = 0.001; // Hide on first load to stop flash of un-styled content on first creation\n    this._componentSrc = this._generatePromise(); // Initialize loading promises\n    this._aspectRatioEqual = false;\n    // Wait for _Image to be added to the tree to set listeners\n    this._Image.on('txLoaded', this._resolveLoading.bind(this));\n    this._Image.on('txError', this._rejectLoading.bind(this));\n  }\n\n  _resolveLoading() {\n    this._aspectRatioEqual = this._Image.texture.source\n      ? parseFloat(this.finalW / this.finalH).toFixed(2) ===\n        parseFloat(\n          this._Image.texture.source.w / this._Image.texture.source.h\n        ).toFixed(2)\n      : false;\n    this._componentSrc.resolve && this._componentSrc.resolve();\n    this.signal('imageLoaded');\n  }\n\n  _rejectLoading(error) {\n    this._componentSrc.reject && this._componentSrc.reject(error);\n    this.signal('imageLoadFailed');\n  }\n\n  async _update() {\n    this._updateRadius();\n    this._updateGradient();\n\n    await this._updateImage();\n    this._updateFillColor();\n    this._updateForegroundImage();\n    if (!this.src) {\n      this._showComponent(); // Ensure that component displays even in the case that src is not set\n      return;\n    }\n    try {\n      // These actions are dependent on the image loading so we wait for the process to complete\n      await this._componentSrc.complete;\n      await this._updateCenterImage();\n      this._updateBlur();\n      // After everything is setup fade in the Artwork component for the first time\n      this._showComponent();\n      this._updateScale();\n    } catch (e) {\n      this._handleImageLoadError();\n    }\n    if (this.shouldSmooth === undefined) this.shouldSmooth = true;\n  }\n\n  _updateScale() {\n    if (this.shouldScale) {\n      let imageScale;\n      switch (typeof this.style.imageScale) {\n        case 'function':\n          imageScale = this.style.imageScale(this.w);\n          break;\n        case 'number':\n          imageScale = this.style.imageScale;\n          break;\n        default:\n          imageScale = 1;\n      }\n\n      this._Image.smooth = {\n        pivotX: this.style.imageScalePivotX,\n        pivotY: this.style.imageScalePivotY,\n        scale: [\n          imageScale,\n          this._Image.scale < imageScale\n            ? this.style.animationImageScaleEntrance\n            : this.style.animationImageScaleExit\n        ]\n      };\n    } else {\n      const scale = 1;\n      this._Image.smooth = {\n        scale: [scale, this.style.animationImageScaleExit]\n      };\n    }\n  }\n\n  _handleImageLoadError() {\n    if (this.src === this.fallbackSrc) return;\n    context.error(`Image ${this._src} failed to load`);\n    if (this.fallbackSrc && this.fallbackSrc !== this.src) {\n      this.src = this.fallbackSrc;\n    }\n  }\n\n  _showComponent() {\n    this.smooth = {\n      alpha: [1, this.style.animationComponentEntrance]\n    };\n  }\n\n  async _updateForegroundImage() {\n    if (!this._foregroundSrc) {\n      if (this._ForegroundImage) {\n        this.patch({\n          ForegroundImage: undefined\n        });\n      }\n      return;\n    }\n\n    const foregroundImagePatch = {\n      mount: 0.5,\n      x: this.w / 2,\n      y: this.h / 2,\n      zIndex: this.core.findZContext().zIndex + this.style.zIndexSet.foreground,\n      texture: {\n        type: CustomImageTexture,\n        src: this._foregroundSrc,\n        hasAlpha: true\n      }\n    };\n\n    if (this.foregroundWidth && this.foregroundHeight) {\n      // The image size is already known so we can just patch it\n      foregroundImagePatch.h = this.foregroundHeight;\n      foregroundImagePatch.w = this.foregroundWidth;\n\n      this.patch({\n        ForegroundImage: foregroundImagePatch\n      });\n    } else if (this.foregroundWidth || this.foregroundHeight) {\n      // Load the image to get the aspect ratio before showing\n      this.patch({\n        ForegroundImage: { ...foregroundImagePatch, alpha: 0.001 }\n      });\n\n      this._ForegroundImage.once('txLoaded', () => {\n        const imageW = this._ForegroundImage.texture.getRenderWidth();\n        const imageH = this._ForegroundImage.texture.getRenderHeight();\n        this._ForegroundImage.patch({\n          alpha: 1,\n          w: this.foregroundHeight\n            ? this.foregroundHeight * (imageW / imageH)\n            : this.foregroundWidth,\n          h: this.foregroundWidth\n            ? this.foregroundWidth * (imageH / imageW)\n            : this.foregroundHeight\n        });\n      });\n    }\n\n    this.patch({\n      ForegroundImage: foregroundImagePatch\n    });\n  }\n\n  _updateBlur() {\n    if (\n      (!this._shouldBlur ||\n        (this._Image &&\n          this._Image.texture &&\n          this._Image.texture.src === this.fallbackSrc)) &&\n      this._Blur\n    ) {\n      // Remove Blur element as it is not longer required\n      if (this.shouldSmooth) {\n        this._Blur._getTransition('alpha').once('finish', () => {\n          // Clean up gradient after animation is complete\n          this.patch({ Blur: undefined });\n        });\n        this._Blur.smooth = {\n          alpha: [0, this.style.animationBlurExit]\n        };\n      } else {\n        this.patch({\n          Blur: undefined\n        });\n      }\n      return;\n    }\n    // Create/update the Blur element\n    if (!this._srcFailed && this._shouldBlur) {\n      this.patch({\n        Blur: {\n          alpha: !this._Blur && this.shouldSmooth ? 0.001 : 1, // If the Blur element already exists there is no need to fade it in again\n          amount: this.style.blur,\n          zIndex: this.core.findZContext().zIndex + this.style.zIndexSet.blur,\n          content: {\n            Image: {\n              h: this.h,\n              texture: this._Image.getTexture(),\n              w: this.w\n            }\n          },\n          h: this.h,\n          rtt: true,\n          type: lng.components.FastBlurComponent,\n          w: this.w\n        }\n      });\n\n      if (this._Blur.alpha < 1) {\n        this._Blur.smooth = {\n          alpha: [1, this.style.animationBlurEntrance]\n        };\n      }\n    }\n  }\n\n  _updateCenterImage() {\n    if (this.format === 'contain') {\n      this._updateFormatContain();\n    } else if (this.format === 'circle' || this.format === 'square') {\n      this._updateFormatSquareCircle();\n    } else if (this._CenterImage) {\n      // Remove the center image element if no longer required\n      this.patch({\n        CenterImage: undefined\n      });\n    }\n  }\n\n  async _updateFormatContain() {\n    if (\n      (this._CenterImage && this._CenterImage.mode !== this.format) ||\n      this.src === this.fallbackSrc ||\n      this._aspectRatioEqual\n    ) {\n      // Make sure previous mode is propertly cleaned up\n      this.patch({\n        CenterImage: undefined\n      });\n\n      if (this.src === this.fallbackSrc || this._aspectRatioEqual) {\n        this._Image.alpha = 1;\n        return; // If is fallback image or the aspect ratio already fits the space there is no need to proceed\n      }\n    }\n\n    let imageW;\n    let imageH;\n\n    const ratioW = Math.abs(\n      this._Image.texture.source.w / this._Image.texture.source.h\n    );\n\n    const ratioH = Math.abs(\n      this._Image.texture.source.h / this._Image.texture.source.w\n    );\n\n    if (this._Image.texture.source.w < this._Image.texture.source.h) {\n      // portrait\n      if (this.h * ratioW < this.w) {\n        // make sure it is set to show 100% height\n        imageW = this.h * ratioW;\n        imageH = this.h;\n      } else {\n        // make 100% width\n\n        imageW = this.w;\n        imageH = this.w * ratioH;\n      }\n    } else if (this._Image.texture.source.w > this._Image.texture.source.h) {\n      // landscape\n      if (this.w * ratioH < this.h) {\n        // make sure it is set to show 100% w\n        imageW = this.w;\n        imageH = this.w * ratioH;\n      } else {\n        // make 100% width\n        imageW = this.h * ratioW;\n        imageH = this.h;\n      }\n    } else {\n      // render a square\n      imageW = Math.min(this.w, this.h);\n      imageH = imageW;\n    }\n\n    const src = await this._processedImageSrc;\n\n    this.patch({\n      CenterImage: {\n        format: this.format,\n        mount: 0.5,\n        w: imageW,\n        h: imageH,\n        x: this.w / 2,\n        y: this.h / 2,\n        zIndex:\n          this.core.findZContext().zIndex + this.style.zIndexSet.centerImage,\n        texture: {\n          src,\n          resizeMode: {\n            h: imageH,\n            type: 'cover',\n            w: imageW\n          },\n          type: CustomImageTexture\n        }\n      }\n    });\n  }\n\n  _updateFormatSquareCircle() {\n    if (\n      (this._CenterImage && this._CenterImage.mode !== this.format) ||\n      this.src === this.fallbackSrc\n    ) {\n      // Make sure previous mode is properly cleaned up\n      this.patch({\n        CenterImage: undefined\n      });\n      if (this.src === this.fallbackSrc) return;\n    }\n    const imageSize = Math.min(this.w, this.h) - this.style.padding * 2;\n    this.patch({\n      CenterImage: {\n        format: this.format,\n        h: imageSize,\n        shader: {\n          radius:\n            'circle' === this.format\n              ? imageSize / 2\n              : this.style.centerImageRadius,\n          type: lng.shaders.RoundedRectangle\n        },\n        w: imageSize,\n        zIndex:\n          this.core.findZContext().zIndex + this.style.zIndexSet.centerImage,\n        Image: {\n          h: imageSize,\n          mount: 0.5,\n          rtt: true, // Required for shader to work\n          w: imageSize,\n          x: this.w / 2,\n          y: this.h / 2,\n          texture: {\n            src: this._Image.texture.src,\n            resizeMode: {\n              h: imageSize,\n              type: 'cover',\n              w: imageSize\n            },\n            type: CustomImageTexture\n          }\n        }\n      }\n    });\n  }\n\n  _updateGradient() {\n    if (!this.gradient) {\n      if (this._Gradient) {\n        // Cleanup previous gradient\n        if (this.shouldSmooth) {\n          this._Gradient._getTransition('alpha').once('finish', () => {\n            // Remove gradient if no longer required\n            const transition =\n              this._Gradient && this._Gradient._getTransition('alpha');\n            if (!this.gradient && transition && transition.p === 1)\n              this.patch({ Gradient: undefined });\n          });\n          this._Gradient.patch(this._gradientPatch); // Make sure any mode updates are patched ex.radius changes when focused/unfocused\n          this._Gradient.smooth = {\n            alpha: [0, this.style.animationGradientExit]\n          };\n        } else {\n          this.patch({ Gradient: undefined });\n        }\n      }\n      return;\n    }\n\n    this._createGradient();\n  }\n\n  _createGradient() {\n    this.patch({\n      Gradient: this._gradientPatch // Allows for an easier way to extend and replace the gradient\n    });\n    if (this.shouldSmooth) {\n      this.applySmooth(this._Gradient, {\n        alpha: [1, this.style.animationGradientEntrance]\n      });\n    }\n  }\n\n  async _updateImage() {\n    this._aspectRatioEqual = false; // Set this back to false since we will not know the aspect ratio until after the image has loaded\n\n    if (!this._processedImageSrc) {\n      if (this._Image) {\n        this._Image.texture = undefined;\n      }\n      return;\n    }\n\n    const src = await this._processedImageSrc;\n\n    this._Image.patch({\n      alpha:\n        this.src !== this.fallbackSrc && (this._blur || this._hasCenterImage)\n          ? 0.001\n          : 1, // Prevent image from flashing on first load if mode requires a center image or blur is true\n      h: this.h,\n      texture: {\n        type: CustomImageTexture,\n        src,\n        resizeMode: { type: 'cover', w: this.w, h: this.h }\n      },\n      w: this.w,\n      zIndex: this.core.findZContext().zIndex + this.style.zIndexSet.image\n    });\n  }\n\n  _updateFillColor() {\n    if (!this.fill) {\n      this.patch({\n        FillColor: undefined\n      });\n    } else {\n      this.patch({\n        FillColor: {\n          rect: true,\n          w: this.w,\n          h: this.h,\n          color: this.style.fillColor,\n          zIndex: 5\n        }\n      });\n    }\n  }\n\n  _updateRadius() {\n    // Add shader to all items in component if greater than 0, remove shader otherwise.\n    this.patch(\n      this.style.radius\n        ? {\n            shader: {\n              type: lng.shaders.RoundedRectangle,\n              radius: getMaxRoundRadius(this.style.radius, this.w, this.h)\n            }\n          }\n        : { shader: undefined }\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const tone = theme => ({\n  neutral: { color: theme.color.fillNeutral },\n  inverse: { color: theme.color.fillInverse },\n  brand: { color: theme.color.fillBrand }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './Icon.styles';\nimport context from '../../globals/context/index';\nimport { getValidColor } from '../../utils';\nimport CustomImageTexture from '../../textures/CustomImageTexture';\n\n/**\n * Icon component that displays different types of icons, supporting SVGs and images.\n * @extends Base\n */\nexport default class Icon extends Base {\n  /**\n   * Returns the name of the component for theming support.\n   * @returns {string} The name of the component.\n   */\n  static get __componentName() {\n    return 'Icon';\n  }\n\n  /**\n   * Returns the theme styles for the Icon component.\n   * @returns {object} The theme styles object.\n   */\n  static get __themeStyle() {\n    return styles;\n  }\n\n  /**\n   * Returns the list of properties that can be set on the Icon component. Used by withUpdates\n   * @returns {Array} An array of property names.\n   */\n  static get properties() {\n    return ['icon', 'fixed', 'color'];\n  }\n\n  _init() {\n    /**\n     * Event listener for the 'txLoaded' event to handle icon texture loading.\n     *\n     * @listens 'txLoaded'\n     */\n    this.on('txLoaded', () => {\n      if (!this.fixed) {\n        this._notify.bind(this)(); // Notify parent component of the item change if not fixed.\n      }\n    });\n\n    /**\n     * Event listener for the 'txError' event to handle icon texture loading errors.\n     *\n     * @listens 'txError'\n     * @param {Error} error - The error object containing information about the loading error.\n     */\n    this.on('txError', this._handleTxtError.bind(this));\n  }\n\n  /**\n   * Returns the color to be used for the icon.\n   *\n   * @private\n   * @returns {string} The color value.\n   */\n  _getColor() {\n    return this._color || this.style.color;\n  }\n\n  /**\n   * Notifies the parent and ancestors of item changes in the Icon component.\n   *\n   * @private\n   */\n  _notify() {\n    this.w = this.finalW;\n    this.h = this.finalH;\n    this.signal('itemChanged', this); // Emit 'itemChanged' signal to notify parent.\n    this.fireAncestors('$itemChanged'); // Emit '$itemChanged' signal to notify ancestors.\n  }\n\n  /**\n   * Handles the error when loading the icon texture.\n   *\n   * @private\n   * @param {Error} error - The error object containing information about the loading error.\n   */\n  _handleTxtError() {\n    context.error(`Unable to load icon ${this._icon}`);\n    this._icon = null;\n    this.texture = null;\n  }\n\n  /**\n   * Updates the Icon component based on the provided icon.\n   *\n   * @private\n   */\n  _update() {\n    if (!this._icon) {\n      this.texture = null; // If there's no icon, clear the texture.\n      return;\n    }\n    this.patch(this._iconPatch); // Apply the icon patch.\n  }\n\n  /**\n   * Generates the patch based on the icon type (SVG, image, etc.) and other properties.\n   *\n   * @private\n   * @returns {object} The patch object to update the Icon component.\n   */\n  get _iconPatch() {\n    const [isSvgTag, isSvgURI] = [/^<svg.*<\\/svg>$/, /\\.svg$/].map(regex =>\n      RegExp.prototype.test.bind(regex)\n    );\n    let texture;\n    const svgTag = isSvgTag(this.icon);\n    const svgURI = isSvgURI(this.icon);\n\n    if (svgTag) {\n      texture = lng.Tools.getSvgTexture(\n        `data:image/svg+xml,${encodeURIComponent(this.icon)}`,\n        this.w,\n        this.h\n      );\n    } else if (svgURI) {\n      texture = lng.Tools.getSvgTexture(this.icon, this.w, this.h);\n    } else {\n      texture = {\n        type: CustomImageTexture,\n        w: this.w,\n        h: this.h,\n        src: this.icon\n      };\n    }\n\n    const color = getValidColor(this._color || this.style.color);\n    const shader =\n      this.radius || this.style.radius\n        ? {\n            radius: this.radius || this.style.radius,\n            type: lng.shaders.RoundedRectangle\n          }\n        : undefined;\n\n    return {\n      texture,\n      shader,\n      ...(color\n        ? { colorUl: color, colorUr: color, colorBl: color, colorBr: color }\n        : {})\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  return {\n    contentSpacing: theme.spacer.xs,\n    offsetY: 1,\n    paddingX: theme.spacer.md,\n    paddingY: theme.spacer.xs,\n    radius: theme.radius.sm,\n    strokeWidth: theme.stroke.sm,\n    textStyle: {\n      ...theme.typography.tag1,\n      textAlign: 'center'\n    }\n  };\n};\n\nexport const tone = theme => ({\n  neutral: {\n    backgroundColor: theme.color.fillInverseSecondary,\n    iconColor: theme.color.textNeutral,\n    textStyle: { textColor: theme.color.textNeutral },\n    strokeColor: theme.color.strokeNeutralSecondary\n  },\n  inverse: {\n    backgroundColor: theme.color.fillNeutralSecondary,\n    iconColor: theme.color.textInverse,\n    textStyle: { textColor: theme.color.textInverse },\n    strokeColor: theme.color.strokeInverseSecondary\n  },\n  brand: {\n    backgroundColor: theme.color.fillBrand,\n    iconColor: theme.color.textNeutral,\n    textStyle: { textColor: theme.color.textNeutral },\n    strokeColor: theme.color.strokeInverseSecondary\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport Icon from '../Icon';\nimport { getHexColor, getMaxRoundRadius } from '../../utils';\nimport * as styles from './Badge.styles';\nimport lng from '@lightningjs/core';\n\nexport default class Badge extends Base {\n  static _template() {\n    return {\n      Text: {\n        mountY: 0.5\n      },\n      Icon: {\n        type: Icon,\n        mountY: 0.5,\n        signals: {\n          itemChanged: '_updateLayout'\n        }\n      }\n    };\n  }\n\n  static get __componentName() {\n    return 'Badge';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return ['title', 'icon', 'iconAlign', 'iconWidth', 'iconHeight'];\n  }\n\n  static get tags() {\n    return ['Background', 'Text', 'Icon'];\n  }\n\n  _init() {\n    this._Text.on('txLoaded', this._updateLayout.bind(this));\n    super._init();\n  }\n\n  _update() {\n    this._updateText();\n    this._updateIcon();\n    this._updateLayout();\n    this._updateVisibility();\n  }\n\n  _updateVisibility() {\n    this.alpha = this.title || this.icon ? 1 : 0;\n  }\n\n  _updateLayout() {\n    this._updateWidth();\n    this._updateBackground();\n    this._updatePositions();\n    this.signal('loadedBadge', this);\n  }\n\n  _updateBackground() {\n    const height =\n      Math.max(this._Text.renderHeight, this._Icon.h) + this.style.paddingY * 2;\n\n    this.patch({\n      h: height,\n      texture: lng.Tools.getRoundRect(\n        this.w,\n        height,\n        getMaxRoundRadius(this.style.radius, this.w, height),\n        this.style.strokeWidth,\n        this.style.strokeColor,\n        true,\n        this.style.backgroundColor\n      )\n    });\n  }\n\n  _updateText() {\n    if (this._Text) {\n      this._Text.patch({\n        text: {\n          ...this.style.textStyle,\n          text: this.title || ''\n        }\n      });\n    }\n  }\n\n  _updateIcon() {\n    this._Icon.patch({\n      icon: this.icon,\n      w: this.iconWidth,\n      h: this.iconHeight,\n      style: {\n        color: getHexColor(this.style.iconColor)\n      }\n    });\n  }\n\n  _updateWidth() {\n    let width = 0;\n    if (this.title && this.icon) {\n      width =\n        this._Text.renderWidth +\n        this._Icon.finalW +\n        this.style.contentSpacing +\n        this.style.paddingX * 2;\n    } else if (this.title) {\n      width = this._Text.renderWidth + this.style.paddingX * 2;\n    } else if (this.icon) {\n      width = this._Icon.finalW + this.style.paddingX * 2;\n    }\n\n    this.w = width;\n  }\n\n  _updatePositions() {\n    this._Icon.y = this.h / 2;\n\n    if (this.iconAlign === 'left' && this.title && this.icon) {\n      this._Icon.x = this.style.paddingX;\n      this._Text.x =\n        this._Icon.x + this._Icon.finalW + this.style.contentSpacing;\n    } else if (this.iconAlign === 'right' && this.title && this.icon) {\n      this._Text.x = this.style.paddingX;\n      this._Icon.x =\n        this._Text.x + this._Text.renderWidth + this.style.contentSpacing;\n    } else {\n      this._Text.x = this.style.paddingX;\n      this._Icon.x = this.style.paddingX;\n    }\n\n    this._Text.y = this._h / 2 + this.style.offsetY;\n  }\n\n  _getIconHeight() {\n    if (this.icon) {\n      return !this._Icon.finalH && this._Text\n        ? this._Text.text.lineHeight\n        : this._Icon.finalH;\n    }\n    return 0;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || this.title;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getWidthByColumnSpan } from '../../utils';\n\nexport const base = theme => ({\n  width: 0,\n  justify: 'center',\n  minWidth: getWidthByColumnSpan(theme, 3),\n  paddingX: theme.spacer.xxxl,\n  paddingXNoTitle: theme.spacer.xl,\n  paddingY: theme.spacer.xl,\n  radius: theme.radius.sm,\n  contentSpacing: theme.spacer.md,\n  itemSpacing: theme.spacer.md,\n  textStyle: {\n    ...theme.typography.button1,\n    maxLines: 1,\n    textColor: theme.color.textNeutral\n  },\n  contentColor: theme.color.fillNeutral\n});\n\nexport const mode = theme => ({\n  focused: {\n    textStyle: { textColor: theme.color.textInverse },\n    contentColor: theme.color.fillInverse,\n    tone: {\n      inverse: {\n        textStyle: { textColor: theme.color.textNeutral },\n        contentColor: theme.color.fillNeutral\n      },\n      brand: {\n        contentColor: theme.color.fillNeutral\n      }\n    }\n  },\n  disabled: {\n    textStyle: { textColor: theme.color.textNeutralDisabled },\n    contentColor: theme.color.fillNeutralDisabled\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * FocusManager Component\n *\n * Container to set focus on elements with key[Up/Down] or key[Left/Right]\n */\nimport Base from '../Base';\nimport {\n  getX,\n  getY,\n  isComponentOnScreen,\n  getShortestDistance\n} from '../../utils';\n\nexport default class FocusManager extends Base {\n  static get __componentName() {\n    return 'FocusManager';\n  }\n\n  static get tags() {\n    return ['Items'];\n  }\n\n  static get properties() {\n    return ['direction', 'wrapSelected'];\n  }\n\n  _construct() {\n    super._construct();\n    this._selectedIndex = 0;\n    this._itemPosX = 0;\n    this._itemPosY = 0;\n    this.direction = this.direction || 'row';\n  }\n\n  _init() {\n    this._checkSkipFocus();\n  }\n\n  get Items() {\n    if (!this.tag('Items')) {\n      this.patch({ Items: {} });\n    }\n    return this._Items;\n  }\n\n  _setDirection(direction) {\n    const state = {\n      none: 'None',\n      column: 'Column',\n      row: 'Row'\n    }[direction];\n\n    if (state) {\n      this._setState(state);\n    }\n    return direction;\n  }\n\n  _getItems() {\n    return this._Items.children;\n  }\n\n  get items() {\n    return this.Items.children;\n  }\n\n  set items(items) {\n    this._resetItems();\n    this._selectedIndex = 0;\n    this.appendItems(items);\n    this._checkSkipFocus();\n  }\n\n  set itemPosX(x) {\n    this.Items.x = this._itemPosX = x;\n  }\n\n  get itemPosX() {\n    return this._itemPosX;\n  }\n\n  set itemPosY(y) {\n    this.Items.y = this._itemPosY = y;\n  }\n\n  get itemPosY() {\n    return this._itemPosY;\n  }\n\n  _resetItems() {\n    this.Items.childList.clear();\n    this.Items.patch({\n      w: 0,\n      h: 0,\n      x: this.itemPosX,\n      y: this.itemPosY\n    });\n\n    // This fixes an issue when trying to call set items if there are already items held in _lazyItems.\n    // Going to follow up on a review of this feature.\n    if (this._lazyItems) {\n      this._lazyItems = null;\n    }\n  }\n\n  _appendLazyItem(item) {\n    this.appendItems([item]);\n  }\n\n  appendItems(items = []) {\n    this.Items.childList.a(items);\n    this._refocus();\n  }\n\n  appendItemsAt(items = [], idx) {\n    const addIndex = Number.isInteger(idx) ? idx : this.Items.children.length;\n    this.shouldSmooth = false;\n    this._lastAppendedIdx = addIndex;\n\n    items.forEach((item, itemIdx) => {\n      this.Items.childList.addAt(\n        {\n          ...item,\n          parentFocus: this.hasFocus()\n        },\n        addIndex + itemIdx\n      );\n    });\n\n    if (this.selectedIndex >= this._lastAppendedIdx) {\n      this._selectedIndex += items.length;\n    }\n\n    this.requestUpdate();\n    this._refocus();\n  }\n\n  prependItems(items) {\n    this.appendItemsAt(items, 0);\n  }\n\n  removeItemAt(index) {\n    this.shouldSmooth = false;\n    this.Items.childList.removeAt(index);\n\n    if (\n      this.selectedIndex > index ||\n      this.selectedIndex === this.Items.children.length\n    ) {\n      this._selectedIndex--;\n    }\n\n    this.requestUpdate();\n    this._refocus();\n  }\n\n  _checkSkipFocus() {\n    // If the first item has skip focus when appended get the next focusable item\n    const initialSelection = this.Items.children[this.selectedIndex];\n    if (initialSelection && initialSelection.skipFocus) {\n      this.selectNext(false);\n    }\n  }\n\n  get selected() {\n    return this.Items.children[this.selectedIndex];\n  }\n\n  get selectedIndex() {\n    return this._selectedIndex;\n  }\n\n  set selectedIndex(index) {\n    this.prevSelected = this.selected;\n    if (\n      !this.Items.children.length ||\n      !this.Items.children[index] ||\n      !this.Items.children[index].skipFocus\n    ) {\n      if (index !== this._selectedIndex) {\n        this._selectedIndex = index;\n      }\n      if (this.selected) {\n        this._selectedChange(this.selected, this.prevSelected);\n      }\n      // Don't call refocus until after a new render in case of a situation like Plinko nav\n      // where we don't want to focus the previously selected item and need to get the new one first\n      this._refocus();\n    }\n  }\n\n  _selectedChange(selected, prevSelected) {\n    this._render(selected, prevSelected);\n    this.signal('selectedChange', selected, prevSelected);\n  }\n\n  // Override\n  _render() {}\n\n  _firstFocusableIndex() {\n    if (!this.items.length) return 0;\n    const firstItem = this.items\n      .reduce((acc, item, idx) => {\n        if (!item.skipFocus) {\n          acc.push({ ...item, originalIdx: idx });\n        }\n        return acc;\n      }, [])\n      .shift();\n\n    return firstItem.originalIdx;\n  }\n\n  _lastFocusableIndex() {\n    if (!this.items.length) return 0;\n    const lastItem = this.items\n      .reduce((acc, item, idx) => {\n        if (!item.skipFocus) {\n          acc.push({ ...item, originalIdx: idx });\n        }\n        return acc;\n      }, [])\n      .pop();\n\n    return lastItem.originalIdx;\n  }\n\n  selectPrevious() {\n    this.shouldSmooth = true;\n    const hasFocusable = !!(this.items || []).filter(i => !i.skipFocus).length;\n    if ((this.selectedIndex === 0 && !this.wrapSelected) || !hasFocusable) {\n      return false;\n    }\n\n    const previousItemIndex = this.items\n      .map(item => !!item.skipFocus)\n      .lastIndexOf(false, this._selectedIndex - 1);\n\n    if (previousItemIndex > -1) {\n      this.selectedIndex = previousItemIndex;\n      return true;\n    } else if (this.wrapSelected) {\n      this.selectedIndex = this._lastFocusableIndex();\n      return true;\n    }\n    return false;\n  }\n\n  selectNext(shouldSmoothOverride) {\n    if (this._lazyItems && this._lazyItems.length) {\n      this._appendLazyItem(this._lazyItems.splice(0, 1)[0]);\n    }\n    this.shouldSmooth = shouldSmoothOverride ?? true;\n\n    const hasFocusable = !!(this.items || []).filter(i => !i.skipFocus).length;\n    if (\n      (this.selectedIndex === this.Items.children.length - 1 &&\n        !this.wrapSelected) ||\n      !hasFocusable\n    ) {\n      return false;\n    }\n\n    const nextIndex = this.items.findIndex(\n      (item, idx) => !item.skipFocus && idx > this._selectedIndex\n    );\n\n    if (nextIndex > -1) {\n      this.selectedIndex = nextIndex;\n      return true;\n    } else if (this.wrapSelected) {\n      this.selectedIndex = this._firstFocusableIndex();\n      return true;\n    }\n    return false;\n  }\n\n  _getIndexOfItemNear(selected, prev) {\n    const prevItem = prev.selected;\n\n    if (!selected || !selected.items || !selected.items.length || !prevItem) {\n      return 0;\n    }\n\n    const [itemX, itemY] = prevItem.core.getAbsoluteCoords(0, 0);\n    const prevMiddle = [itemX + prevItem.w / 2, itemY + prevItem.h / 2];\n\n    // Get all item center points from selected\n    const selectedCoordArray = selected.items\n      .map((item, index) => {\n        return {\n          index,\n          distance: !item.skipFocus\n            ? getShortestDistance(prevMiddle, item)\n            : null\n        };\n      })\n      .filter(item => {\n        // Remove all indexes that don't have a distance (skipFocus)\n        return null !== item.distance;\n      })\n      .sort(function (a, b) {\n        return a.distance - b.distance;\n      });\n    return selectedCoordArray[0].index;\n  }\n\n  /**\n   * TODO: Update Base to remove the focus/unfocus calls and add a second \"BaseComponent\" that does have them\n   *\n   * Layout Components (Column, Row, BoardRows, etc.) would extend only Base,\n   *    need to confirm this applies to InlineContnet and ScrollWrapper??\n   * Element/Pattern Components (Tile, Badge, etc.) would extend \"BaseComponent\" that does have focus/unfocus overrides\n   */\n  _focus() {\n    super._focus();\n    this.items.forEach(item => (item.parentFocus = true));\n  }\n  _unfocus() {\n    super._unfocus();\n    this.items.forEach(item => (item.parentFocus = false));\n  }\n\n  _updateShouldSmooth() {}\n\n  _getFocused() {\n    const { selected } = this;\n    // Make sure we're focused on a component\n    if (selected) {\n      if (selected.focusRef) {\n        return selected.tag(selected.focusRef);\n      } else if (selected.cparent) {\n        return selected;\n      }\n    }\n    return this;\n  }\n\n  _updateTransitionTarget(element, property, newValue) {\n    if (\n      element &&\n      element.transition(property) &&\n      !element.transition(property).isRunning() &&\n      element.transition(property).targetValue !== newValue\n    ) {\n      element.transition(property).updateTargetValue(newValue);\n    }\n  }\n\n  /**\n   * Return list of items that are currently fully and partially on screen\n   * @returns {Array} Array of matching lng.Component objects or empty array\n   */\n  get onScreenItems() {\n    return this.Items.children.filter(child => this._isOnScreen(child));\n  }\n\n  _isOnScreenCompletely(child) {\n    // 'isFullyOnScreen' method has been added to the Base class.\n    // in case child does _not_ extend Base, 'isComponentOnScreen'\n    // from the 'util' module will be invoked. The same method is\n    // invoked by Base class\n    return child.isFullyOnScreen\n      ? child.isFullyOnScreen()\n      : isComponentOnScreen(child);\n  }\n\n  get fullyOnScreenItems() {\n    return this.Items.children.reduce((rv, item) => {\n      if (item instanceof FocusManager) {\n        return [\n          ...rv,\n          ...item.Items.children.filter(this._isOnScreenCompletely)\n        ];\n      } else if (this._isOnScreenCompletely(item)) {\n        return [...rv, item];\n      } else {\n        return rv;\n      }\n    }, []);\n  }\n\n  _isOnScreen() {\n    throw new Error(\"'_isOnScreen' must be implemented by 'row'/'column'\");\n  }\n\n  _isComponentHorizontallyVisible(child) {\n    // get child's destination X; If child is moving to a destination,\n    // get the value of where child will end up\n    const x = getX(child);\n    if (!Number.isFinite(x)) return false;\n\n    // to calculate the target absolute X position of the item, we need to use\n    // 1) the entire component's absolute position,\n    // 2) the target animation value of the items container, and\n    // 3) the target value of the item itself\n    const transitionX = this.getTransitionXTargetValue();\n    // get absolute position of FocusManager on screen\n    const px = this.core.renderContext.px;\n    const itemX = px + transitionX + x;\n\n    // _scissor consists of [ left position (x), top position (y), width, height ]\n    const [leftBounds = null, , clipWidth = null] = this.core._scissor || [];\n    const stageW = this.stage.w / this.stage.getRenderPrecision();\n    const { w } = child;\n\n    const withinLeftStageBounds = itemX >= 0;\n    const withinRightStageBounds = itemX + w <= stageW;\n    // short circuit\n    if (!withinLeftStageBounds || !withinRightStageBounds) return false;\n\n    let withinLeftClippingBounds = true;\n    let withinRightClippingBounds = true;\n    if (Number.isFinite(leftBounds)) {\n      withinLeftClippingBounds =\n        Math.round(itemX + w) >= Math.round(leftBounds);\n      withinRightClippingBounds =\n        Math.round(itemX) <= Math.round(leftBounds + clipWidth);\n    }\n\n    return withinLeftClippingBounds && withinRightClippingBounds;\n  }\n\n  _isComponentVerticallyVisible(child) {\n    // get child's destination Y; If child is moving to a destination,\n    // get the value of where child will end up\n    const y = getY(child);\n    if (!Number.isFinite(y)) return false;\n\n    // to calculate the target absolute Y position of the item, we need to use\n    // 1) the entire component's absolute position,\n    // 2) the target animation value of the items container, and\n    // 3) the target value of the item itself\n    const transitionY = this.getTransitionYTargetValue();\n\n    // get absolute position of FocusManager on screen\n    const py = this.core.renderContext.py;\n\n    // _scissor consists of [ left position (x), top position (y), width, height ]\n    const [, topBounds = null, , clipHeight = null] = this.core._scissor || [];\n    const { h } = child;\n\n    const itemY = py + transitionY + y;\n    const stageH = this.stage.h / this.stage.getRenderPrecision();\n    const withinTopStageBounds = itemY + h >= 0;\n    const withingBottomStageBounds = itemY <= stageH;\n\n    // short circuit\n    if (!withinTopStageBounds || !withingBottomStageBounds) return false;\n\n    let withinTopClippingBounds = true;\n    let withinBottomClippingBounds = true;\n    if (Number.isFinite(topBounds)) {\n      withinTopClippingBounds = Math.round(itemY + h) > Math.round(topBounds);\n      withinBottomClippingBounds =\n        Math.round(itemY) < Math.round(topBounds + clipHeight);\n    }\n\n    return withinTopClippingBounds && withinBottomClippingBounds;\n  }\n\n  getTransitionXTargetValue() {\n    return this.Items.transition('x').targetValue;\n  }\n\n  getTransitionYTargetValue() {\n    return this.Items.transition('y').targetValue;\n  }\n\n  static _states() {\n    return [\n      class None extends this {},\n      class Row extends this {\n        _handleLeft() {\n          return typeof this.onLeft === 'function'\n            ? this.onLeft(this)\n            : this.selectPrevious();\n        }\n\n        _handleRight() {\n          return typeof this.onRight === 'function'\n            ? this.onRight(this)\n            : this.selectNext();\n        }\n      },\n\n      class Column extends this {\n        _handleUp() {\n          return typeof this.onUp === 'function'\n            ? this.onUp(this)\n            : this.selectPrevious();\n        }\n\n        _handleDown() {\n          return typeof this.onDown === 'function'\n            ? this.onDown(this)\n            : this.selectNext();\n        }\n      }\n    ];\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  alwaysScroll: false,\n  itemSpacing: theme.layout.gutterX,\n  itemTransition: theme.animation.utility,\n  neverScroll: false,\n  scrollIndex: 0\n});\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport FocusManager from '../FocusManager';\nimport { getX, getY, getH, getW, max, watchForUpdates } from '../../utils';\nimport * as styles from './NavigationManager.styles';\n\nconst directionPropNames = {\n  row: {\n    axis: 'x',\n    crossAxis: 'y',\n    lengthDimension: 'w',\n    crossDimension: 'h',\n    innerLengthDimension: 'innerW',\n    innerCrossDimension: 'innerH'\n  },\n  column: {\n    axis: 'y',\n    crossAxis: 'x',\n    lengthDimension: 'h',\n    crossDimension: 'w',\n    innerLengthDimension: 'innerH',\n    innerCrossDimension: 'innerW'\n  }\n};\n\nexport default class NavigationManager extends FocusManager {\n  static get __componentName() {\n    return 'NavigationManager';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [\n      ...super.properties,\n      'alwaysScroll',\n      'neverScroll',\n      'scrollIndex',\n      'autoResizeWidth',\n      'autoResizeHeight',\n      'lazyUpCount',\n      'lazyUpCountBuffer',\n      'waitForDimensions'\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this.shouldSmooth = false;\n    this._lazyUpCountBuffer = 2;\n  }\n\n  _init() {\n    const { lengthDimension, axis } = this._directionPropNames;\n\n    if (!this[lengthDimension]) {\n      this._initComponentSize();\n    }\n\n    this.Items.transition(axis).on(\n      'finish',\n      this._transitionListener.bind(this)\n    );\n\n    super._init();\n  }\n\n  _initComponentSize() {\n    const { lengthDimension } = this._directionPropNames;\n    if (\n      this?.parent.parent instanceof NavigationManager &&\n      this?.parent.parent[lengthDimension]\n    ) {\n      // component is a child item in a NavigationManager (or subclass of NavigationManager)\n      this[lengthDimension] = this.parent.parent[lengthDimension];\n    } else {\n      // find closest parent in render tree with lengthDimension property set(w for Row, h for Column)\n      let parent = this.parent;\n      while (parent && !parent[lengthDimension]) {\n        parent = parent.parent;\n      }\n      this[lengthDimension] =\n        (parent && parent[lengthDimension]) ||\n        this.stage.h / this.stage.getRenderPrecision();\n    }\n  }\n\n  _update() {\n    this._updateLayout();\n  }\n\n  _updateLayout() {\n    const { lengthDimension, crossDimension, crossAxis, innerCrossDimension } =\n      this._directionPropNames;\n    let nextPosition = 0;\n    let maxCrossDimensionSize = 0;\n    let maxInnerCrossDimensionSize = 0;\n    const childrenToCenter = [];\n    const loadingChildren = [];\n\n    for (let i = 0; i < this.Items.children.length; i++) {\n      const child = this.Items.children[i];\n\n      if (child.requestEarlyUpdate) {\n        const updateDidRun = child.requestEarlyUpdate();\n        if (!updateDidRun && (child.w === 0 || child.h === 0)) {\n          child._updateLayout && child._updateLayout();\n        }\n      }\n      const childCrossDimensionSize = this._calcCrossDimensionSize(child);\n\n      if (\n        this.waitForDimensions &&\n        (!childCrossDimensionSize || !child[lengthDimension])\n      ) {\n        loadingChildren.push(child);\n      }\n\n      maxCrossDimensionSize = max(\n        maxCrossDimensionSize,\n        childCrossDimensionSize\n      );\n      maxInnerCrossDimensionSize = max(\n        maxInnerCrossDimensionSize,\n        child[innerCrossDimension] || 0\n      );\n\n      this.updatePositionOnAxis(child, nextPosition);\n\n      nextPosition += child[lengthDimension];\n\n      if (i < this.Items.children.length - 1) {\n        const extraItemSpacing = child.extraItemSpacing || 0;\n        nextPosition += this.style.itemSpacing + extraItemSpacing;\n      }\n\n      if (child.centerInParent) {\n        // if the child is another NavigationManager, check the cross dimension size of the item container\n        const childCrossDimensionSize =\n          (child.Items && child.Items[crossDimension]) || child[crossDimension];\n        // only center the child if it is within the bounds of this NavigationManager\n        // center based off innerCrossDimension in cases where elements with\n        // innerCrossDimension exist in Items (ex. Tile with metadata)\n        if (\n          childCrossDimensionSize < this[crossDimension] ||\n          !this.Items[innerCrossDimension]\n        ) {\n          childrenToCenter.push({ childIdx: i, childCrossDimensionSize });\n        }\n      } else {\n        child[crossAxis] = 0;\n      }\n    }\n\n    const itemChanged =\n      this.Items[crossDimension] !== maxCrossDimensionSize ||\n      this.Items[lengthDimension] !== nextPosition;\n\n    if (this.waitForDimensions) {\n      this.Items.alpha = loadingChildren.length ? 0.001 : 1;\n    }\n\n    this.Items.patch({\n      [crossDimension]: maxCrossDimensionSize,\n      [innerCrossDimension]:\n        maxInnerCrossDimensionSize || maxCrossDimensionSize,\n      [lengthDimension]: nextPosition + (this._totalAddedWidth || 0)\n    });\n\n    this._autoResize();\n    this._centerItemsInParent(childrenToCenter);\n    this._updateLastScrollIndex();\n\n    if (itemChanged) {\n      this._performRender();\n      this.fireAncestors('$itemChanged');\n    }\n  }\n\n  _centerItemsInParent(items) {\n    const { crossDimension, crossAxis, innerCrossDimension } =\n      this._directionPropNames;\n    if (items.length) {\n      const sizes = [\n        this.Items[crossDimension],\n        this.Items[innerCrossDimension]\n      ];\n      // If a subclass of NavigationManager only contains a row or column of items:\n      // then also consider the h or w of that component when centering items .\n      // Subclasses that add other components outside of the Items array (ex. TitleRow)\n      // likely increase the h or w of the component and centering should be with respect to only the Items element.\n      if (this.children.length === 1) {\n        sizes.push(this[crossDimension]);\n      }\n\n      const crossDimensionSize = Math.max(...sizes);\n      items.forEach(({ childIdx, childCrossDimensionSize }) => {\n        this.Items.children[childIdx][crossAxis] =\n          (crossDimensionSize - childCrossDimensionSize) / 2;\n      });\n    }\n  }\n\n  _autoResize() {\n    if (this.autoResizeWidth) {\n      this.w = this.Items.w;\n    }\n    if (this.autoResizeHeight) {\n      this.h = this.Items.h;\n    }\n  }\n\n  _updateLastScrollIndex() {\n    const { axis, lengthDimension } = this._directionPropNames;\n    if (this.alwaysScroll) {\n      this._lastScrollIndex = this.Items.children.length - 1;\n      return;\n    }\n\n    const itemPos = this._isRow ? this.itemPosX : this.itemPosY;\n    const scrollOffset =\n      (this.Items.children[this.scrollIndex] || {\n        [axis]: 0\n      })[axis] + itemPos;\n    const lastChild = this.Items.childList.last;\n    const endOfLastChild = lastChild\n      ? this._calcAxisPosition(lastChild) + lastChild[lengthDimension]\n      : 0;\n    if (endOfLastChild > this[lengthDimension]) {\n      let lastScrollIndex;\n      for (let i = this.Items.children.length - 1; i >= 0; i--) {\n        const childPosition = this._calcAxisPosition(this.Items.children[i]);\n        const canScrollToChild =\n          childPosition + this[lengthDimension] - scrollOffset > endOfLastChild;\n        if (canScrollToChild) {\n          lastScrollIndex = i;\n        } else {\n          break;\n        }\n      }\n      this._lastScrollIndex = lastScrollIndex;\n      return;\n    }\n\n    // TODO: This conditional originated in Column (prior to NavigationManager refactor).\n    //  What scenario would this ever be true?\n    //  Add a comment to describe it when that is identified.\n    if (this._lastScrollIndex > this.items.length) {\n      this._lastScrollIndex = this.items.length - 1;\n    }\n  }\n\n  _calcCrossDimensionSize(comp) {\n    if (this._isRow) {\n      return getH(comp);\n    }\n\n    if (this._isColumn) {\n      return getW(comp);\n    }\n  }\n\n  _calcAxisPosition(comp) {\n    if (this._isRow) {\n      return getX(comp);\n    }\n\n    if (this._isColumn) {\n      return getY(comp);\n    }\n  }\n\n  _transitionListener() {\n    this.shouldSmooth = false;\n    this.transitionDone();\n  }\n\n  _withAfterUpdate(element) {\n    return watchForUpdates({\n      element,\n      watchProps: [\n        this._directionPropNames.crossAxis,\n        'w',\n        'h',\n        'innerW',\n        'innerH'\n      ],\n      sideEffect: this.queueRequestUpdate.bind(this)\n    });\n  }\n\n  // can be overwritten\n  _performRender() {}\n\n  _appendItem(item, shouldSmoothOverride) {\n    this.shouldSmooth = shouldSmoothOverride ?? false;\n    item.parentFocus = this.hasFocus();\n    item = this.Items.childList.a(item);\n\n    const { crossDimension } = this._directionPropNames;\n    // do not set a h/w if the item already has one defined\n    // as this will trigger withThemeStyles's dimension \"setByUser\" flag\n    if (!item[crossDimension]) {\n      const itemCrossSize = this._isRow ? this.renderHeight : this.renderWidth;\n      item[crossDimension] = item[crossDimension] || itemCrossSize;\n    }\n\n    item = this._withAfterUpdate(item);\n    return item;\n  }\n\n  _appendLazyItem(item) {\n    const { lengthDimension, axis } = this._directionPropNames;\n    const lastChild = this._Items.children[this.items.length - 1];\n    const nextPosition =\n      lastChild[lengthDimension] +\n      lastChild[axis] +\n      (lastChild.extraItemSpacing || 0) +\n      this.style.itemSpacing;\n\n    const appended = this._appendItem(item, true);\n\n    // Update w/o recalculating  whole layout\n    appended[axis] = nextPosition;\n    this._Items[lengthDimension] += nextPosition + item[lengthDimension];\n  }\n\n  $itemChanged() {\n    this.queueRequestUpdate();\n  }\n\n  appendItems(items = []) {\n    this.shouldSmooth = false;\n\n    if (this._lazyItems) {\n      this._lazyItems.push(...items);\n      return;\n    }\n\n    if (items.length > this.lazyUpCount + this.lazyUpCountBuffer) {\n      this._lazyItems = items.splice(this.lazyUpCount + this.lazyUpCountBuffer);\n    }\n    items.forEach(item => this._appendItem(item));\n\n    this.requestUpdate();\n    this._refocus();\n  }\n\n  appendItemsAt(items = [], idx) {\n    if (this._lazyItems && idx > this.items.length - 1) {\n      const addAtIdx = idx - this.items.length;\n      this._lazyItems.splice(addAtIdx, 0, ...items);\n      return;\n    }\n\n    const { crossDimension, lengthDimension, innerLengthDimension } =\n      this._directionPropNames;\n    const addIndex = Number.isInteger(idx) ? idx : this.Items.children.length;\n    this.shouldSmooth = false;\n    this._lastAppendedIdx = addIndex;\n    this._totalAddedLength = 0;\n\n    items.forEach((item, itemIdx) => {\n      const newItem = {\n        ...this._withAfterUpdate(item),\n        parentFocus: this.hasFocus()\n      };\n      // do not set a h/w if the item already has one defined\n      // as this will trigger withThemeStyles's dimension \"setByUser\" flag\n      if (!item[crossDimension]) {\n        newItem[crossDimension] =\n          item[crossDimension] || this.Items[crossDimension];\n      }\n      this.Items.childList.addAt(newItem, addIndex + itemIdx);\n      const itemLength =\n        item[lengthDimension] || item[innerLengthDimension] || 0;\n      const extraItemSpacing = item.extraItemSpacing || 0;\n      this._totalAddedLength +=\n        itemLength + this.style.itemSpacing + extraItemSpacing;\n    });\n\n    if (this.selectedIndex >= this._lastAppendedIdx) {\n      this._selectedPastAdded = true;\n      this._selectedIndex += items.length;\n    }\n\n    this.requestUpdate();\n    this._refocus();\n  }\n\n  updatePositionOnAxis(item, position) {\n    const { axis } = this._directionPropNames;\n    this.applySmooth(\n      item,\n      { [axis]: position },\n      { [axis]: [position, this.style.itemTransition] }\n    );\n\n    if (!this.shouldSmooth) {\n      this._updateTransitionTarget(item, axis, position);\n    }\n  }\n\n  scrollTo(index, duration = this.style.itemTransition.duration * 100) {\n    if (index == undefined) {\n      return;\n    }\n\n    if (duration === 0) {\n      this.selectedIndex = index;\n      return;\n    }\n\n    for (let i = 0; i !== Math.abs(this.selectedIndex - index); i++) {\n      setTimeout(() => {\n        this.selectedIndex > index ? this.selectPrevious() : this.selectNext();\n      }, duration * i);\n    }\n  }\n\n  // can be overridden\n  transitionDone() {}\n\n  shouldScrollLeft() {\n    return this._isRow && this._canScrollBack;\n  }\n\n  shouldScrollRight() {\n    return this._isRow && this._canScrollNext;\n  }\n\n  shouldScrollUp() {\n    return this._isColumn && this._canScrollBack;\n  }\n\n  shouldScrollDown() {\n    return this._isColumn && this._canScrollNext;\n  }\n\n  get _directionPropNames() {\n    return directionPropNames[this.direction];\n  }\n\n  get _canScrollBack() {\n    let shouldScroll = false;\n\n    if (this._lastScrollIndex) {\n      shouldScroll = this.selectedIndex < this._lastScrollIndex;\n      if (\n        this._prevLastScrollIndex !== undefined &&\n        this._prevLastScrollIndex !== this._lastScrollIndex\n      ) {\n        shouldScroll = true;\n      }\n    } else {\n      shouldScroll = this.selectedIndex >= this.scrollIndex;\n    }\n\n    const itemsStartCoord = this._isRow ? this._itemsX : this._itemsY;\n    return (\n      itemsStartCoord < (this._isRow ? this.itemPosX : this.itemPosY) &&\n      shouldScroll\n    );\n  }\n\n  get _canScrollNext() {\n    const { axis, lengthDimension } = this._directionPropNames;\n    const lastChild = this.Items.childList.last;\n    let endOfItemsPosition;\n\n    if (this._isRow) {\n      endOfItemsPosition = Math.abs(this._itemsX - this.w);\n    }\n    if (this._isColumn) {\n      endOfItemsPosition = Math.abs(this._itemsY - this.h);\n    }\n\n    return (\n      this.selectedIndex > this.scrollIndex &&\n      // end of Items container < end of last item\n      endOfItemsPosition < lastChild[axis] + lastChild[lengthDimension]\n    );\n  }\n\n  get _isColumn() {\n    return this.direction === 'column';\n  }\n\n  get _isRow() {\n    return this.direction === 'row';\n  }\n\n  get _itemsX() {\n    return getX(this.Items);\n  }\n\n  get _itemsY() {\n    return getY(this.Items);\n  }\n\n  _getAlwaysScroll() {\n    return this._alwaysScroll !== undefined\n      ? this._alwaysScroll\n      : this.style.alwaysScroll;\n  }\n\n  _getNeverScroll() {\n    if (this.alwaysScroll) {\n      return false;\n    }\n    return this._neverScroll !== undefined\n      ? this._neverScroll\n      : this.style.neverScroll;\n  }\n\n  _setScrollIndex(index) {\n    return index >= 0 ? index : 0;\n  }\n\n  _getScrollIndex() {\n    return this._scrollIndex !== undefined\n      ? this._scrollIndex\n      : this.style.scrollIndex;\n  }\n\n  _setLazyUpCountBuffer(buffer) {\n    if (buffer < 0) {\n      console.warn(\n        'lazyUpCountBuffer must be greater than or equal to 0. Setting to 0.'\n      );\n      buffer = 0;\n    }\n    return buffer;\n  }\n\n  isFullyOnScreen({ offsetX = 0, offsetY = 0 } = {}) {\n    // if the NavigationManager is nested in another Focus Manager\n    // (like a Row inside of a Column),\n    // the `isComponentOnScreen` method needs to account for\n    // how much the Items container is moving as it scrolls\n    const focusmanager = this.parent?.parent;\n    if (focusmanager instanceof FocusManager) {\n      offsetX += focusmanager.Items.transition('x').targetValue || 0;\n      offsetY += focusmanager.Items.transition('y').targetValue || 0;\n    }\n    return super.isFullyOnScreen({ offsetX, offsetY });\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  itemSpacing: theme.layout.gutterX,\n  scrollIndex: 0,\n  alwaysScroll: false,\n  neverScroll: false,\n  itemTransition: {\n    ...theme.animation.standardEntrance,\n    duration: theme.animation.duration.fast\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport NavigationManager from '../NavigationManager';\nimport * as styles from './Row.styles';\nimport { getX } from '../../utils';\n\nexport default class Row extends NavigationManager {\n  static get __componentName() {\n    return 'Row';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      direction: 'row'\n    };\n  }\n\n  static get properties() {\n    return [\n      ...super.properties,\n      'lazyScroll',\n      'startLazyScrollIndex',\n      'stopLazyScrollIndex'\n    ];\n  }\n\n  // Since this is a Row, scrolling should be done only when focused item (this.selected) is fully visible horizontally\n  // as scrolling is happening along X axis. So, if we have a row that has height greater than screen's height, it still\n  // can scroll. Method below the '_isComponentHorizontallyVisible' does not take \"full\" visibility into an account.\n  // At the same time, 'isFullyOnScreen' method on the Base class or utils method checks that element is fully visible\n  // both vertically and horizontally.\n  // At a later time, we should investigate this further.\n  _isOnScreenForScrolling(child) {\n    if (!child) return false;\n\n    const x = getX(child);\n    if (!Number.isFinite(x)) return false;\n    const itemsTransitionX = this.getTransitionXTargetValue();\n    const rowX = this.core.renderContext.px;\n    let itemX = rowX + itemsTransitionX + x;\n    let xModifier;\n\n    // This section here takes the difference between a possible target value\n    // and subtracts it from the current child x. That value then is subtracted from the initial\n    // itemX value calculated on the core renderContext px value to more accurately\n    // calculate the item's location on screen when it's own x value will be updating.\n    if (child.transition('x')) {\n      xModifier = child.x - child.transition('x').targetValue;\n      itemX = itemX - xModifier;\n    }\n    return itemX >= rowX && itemX + child.w <= rowX + this.w;\n  }\n\n  _shouldScroll() {\n    const prevIndex = this.Items.childList.getIndex(this.prevSelected);\n    if (\n      this.alwaysScroll ||\n      (this.lazyScroll &&\n        (this.selectedIndex < this.startLazyScrollIndex ||\n          this.selectedIndex > this.stopLazyScrollIndex ||\n          (prevIndex < this.startLazyScrollIndex &&\n            this.selectedIndex === this.startLazyScrollIndex) ||\n          (prevIndex > this.stopLazyScrollIndex &&\n            this.selectedIndex === this.stopLazyScrollIndex)))\n    ) {\n      return true;\n    }\n\n    let shouldScroll = this._selectedPastAdded;\n    if (!shouldScroll && !this.neverScroll) {\n      const isCompletelyOnScreen = this._isOnScreenForScrolling(this.selected);\n\n      if (this.lazyScroll) {\n        shouldScroll = !isCompletelyOnScreen;\n      } else {\n        const lastChild = this.Items.childList.last;\n        shouldScroll =\n          lastChild &&\n          (this.shouldScrollLeft() ||\n            this.shouldScrollRight() ||\n            !isCompletelyOnScreen);\n      }\n    }\n    return shouldScroll;\n  }\n\n  _getPrependedOffset() {\n    this._selectedPastAdded = false;\n    return this.Items.x - this._totalAddedWidth;\n  }\n\n  _getLazyScrollX(prev) {\n    const prevIndex = this.Items.childList.getIndex(this.prevSelected);\n    if (this._selectedPastAdded) {\n      return this._getPrependedOffset();\n    }\n\n    if (this.selectedIndex <= this.startLazyScrollIndex) {\n      // if navigating on items before start lazy scroll index, use normal scroll logic\n      return this._getScrollX();\n    } else if (\n      this.selectedIndex >= this.stopLazyScrollIndex &&\n      this.selectedIndex < prevIndex\n    ) {\n      // if navigating left on items after stop lazy scroll index\n      const currItemsX = this.Items.x;\n\n      return (\n        currItemsX +\n        (this.prevSelected.w +\n          this.style.itemSpacing +\n          (this.selected.extraItemSpacing || 0))\n      );\n    } else if (prev && this.selectedIndex > this.stopLazyScrollIndex) {\n      // if navigating right on items after stop lazy scroll index\n      const prevX = prev.x;\n\n      return (\n        -prevX +\n        this.prevSelected.w +\n        this.style.itemSpacing +\n        (this.selected.extraItemSpacing || 0) +\n        this.itemPosX\n      );\n    } else if (prev) {\n      // otherwise, no start/stop indexes, perform normal lazy scroll\n      let itemsContainerX;\n      const prevIndex = this.Items.childList.getIndex(prev);\n\n      const selectedX = this.selected.x;\n\n      if (prevIndex === -1) {\n        // No matches found in childList, start set x to 0\n        return;\n      }\n      if (prevIndex > this.selectedIndex) {\n        itemsContainerX = -selectedX + this.itemPosX;\n      } else if (prevIndex < this.selectedIndex) {\n        itemsContainerX = this.w - selectedX - this.selected.w;\n      }\n\n      return itemsContainerX;\n    }\n    // if no prev item or start/stop index, default to normal scroll logic\n    return this._getScrollX();\n  }\n\n  _getScrollX() {\n    if (this._selectedPastAdded) {\n      return this._getPrependedOffset();\n    }\n    let itemsContainerX;\n    let itemIndex = this.selectedIndex - this.scrollIndex;\n    itemIndex = itemIndex < 0 ? 0 : itemIndex;\n    if (itemIndex === this._firstFocusableIndex()) {\n      itemIndex = 0;\n    }\n\n    if (this.Items.children[itemIndex]) {\n      itemsContainerX = this.Items.children[itemIndex].transition('x')\n        ? -this.Items.children[itemIndex].transition('x').targetValue +\n          this.itemPosX\n        : -this.Items.children[itemIndex].x + this.itemPosX;\n    }\n\n    return itemsContainerX;\n  }\n\n  _render(next, prev) {\n    if (this.plinko && prev && prev.selected) {\n      next.selectedIndex = this._getIndexOfItemNear(next, prev);\n    }\n\n    this._prevLastScrollIndex = this._lastScrollIndex;\n\n    let itemsContainerX;\n    if (!this.Items.children.length) {\n      itemsContainerX = this.itemPosX;\n    } else if (this._shouldScroll()) {\n      itemsContainerX =\n        this.lazyScroll && prev\n          ? this._getLazyScrollX(prev)\n          : this._getScrollX();\n    }\n\n    if (itemsContainerX !== undefined) {\n      this.updatePositionOnAxis(this.Items, itemsContainerX);\n    }\n\n    this.onScreenEffect(this.onScreenItems);\n  }\n\n  _performRender() {\n    this._render(this.selected, this.prevSelected);\n  }\n\n  _isOnScreen(child) {\n    if (!child) return false;\n\n    return this._isComponentHorizontallyVisible(child);\n  }\n\n  // can be overridden\n  onScreenEffect() {}\n\n  get _totalAddedWidth() {\n    return this._totalAddedLength;\n  }\n\n  _getLazyScroll() {\n    if (this.alwaysScroll) {\n      return false;\n    }\n    return this._lazyScroll !== undefined\n      ? this._lazyScroll\n      : this.style.lazyScroll;\n  }\n\n  _getNeverScroll() {\n    if (this.alwaysScroll || this.lazyScroll) {\n      return false;\n    }\n    return this._neverScroll !== undefined\n      ? this._neverScroll\n      : this.style.neverScroll;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  backgroundColor: theme.color.interactiveNeutral,\n  radius: theme.radius.md,\n  animation: {}\n});\n\nexport const tone = theme => ({\n  inverse: {\n    backgroundColor: theme.color.interactiveInverse\n  }\n});\n\nexport const mode = theme => ({\n  focused: {\n    backgroundColor: theme.color.interactiveNeutralFocus,\n    tone: {\n      inverse: {\n        backgroundColor: theme.color.interactiveInverseFocus\n      }\n    }\n  },\n  disabled: {\n    backgroundColor: theme.color.fillNeutralDisabled\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getMaxRoundRadius } from '../../utils';\nimport Base from '../Base';\nimport * as styles from './Surface.styles';\nimport lng from '@lightningjs/core';\n\nexport default class Surface extends Base {\n  static _template() {\n    return {\n      Background: {}\n    };\n  }\n\n  static get __componentName() {\n    return 'Surface';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [];\n  }\n\n  static get tags() {\n    return ['Background'];\n  }\n\n  get innerH() {\n    return this.h;\n  }\n\n  get innerW() {\n    return this.w;\n  }\n\n  get _radius() {\n    return getMaxRoundRadius(this.style.radius, this.w, this.h);\n  }\n\n  _update() {\n    this._updateLayout();\n    this._updateScale();\n  }\n\n  _updateLayout() {\n    this._Background.patch({\n      texture: lng.Tools.getRoundRect(\n        this.innerW - 2, // Reference the underscored values here in cause the h or w getters need to be overwritten for alignment - see Tile\n        this.innerH - 2,\n        this._radius,\n        0,\n        null,\n        true,\n        this.style.backgroundColor\n      )\n    });\n  }\n\n  _updateScale() {\n    const scale = this._isFocusedMode\n      ? this.getFocusScale(this.w, this.h)\n      : this.getUnfocusScale(this.w, this.h);\n\n    this.applySmooth(this, { scale }, { scale: [scale, this.style.animation] });\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  offsetY: theme.spacer.xxs,\n  offsetX: 0,\n  textStyle: theme.typography.body1\n});\n\nexport const tone = theme => ({\n  neutral: {\n    textStyle: { textColor: theme.color.fillNeutral }\n  },\n  inverse: {\n    textStyle: { textColor: theme.color.fillInverse }\n  },\n  brand: {\n    textStyle: { textColor: theme.color.fillBrand }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  textY: 0,\n  iconWidth: theme.spacer.xxl + theme.spacer.xs,\n  iconHeight: theme.spacer.xxl + theme.spacer.xs,\n  contentSpacing: theme.spacer.md,\n  marginBottom: 0,\n  strikethroughRatio: 0.08,\n  strikethroughColor: theme.color.textNeutral,\n  textStyle: {\n    ...theme.typography.body1\n  },\n  maxLines: 1,\n  justify: 'flex-start'\n});\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport lng from '@lightningjs/core';\nimport Icon from '../Icon';\nimport Badge from '../Badge';\nimport { parseInlineContent, flatten, measureTextWidth } from '../../utils';\nimport Base from '../Base';\nimport * as styles from './InlineContent.styles';\n\nconst isText = item => typeof item === 'string' || !!item.text;\nconst isIcon = item => !!item.icon;\nconst isBadge = item => !!item.badge;\n\nexport default class InlineContent extends Base {\n  static get properties() {\n    return [\n      'content',\n      'contentProperties',\n      'badgeY',\n      'badgeProperties',\n      'justify',\n      'contentWrap',\n      'customStyleMappings',\n      'maxLines',\n      'maxLinesSuffix'\n    ];\n  }\n\n  static get __componentName() {\n    return 'InlineContent';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'iconH', curr: 'iconHeight' },\n      { prev: 'iconW', curr: 'iconWidth' }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    // use the same default value as Lightning's Text Texture default\n    this._maxLinesSuffix = '..';\n  }\n\n  _update() {\n    this._updateContent();\n    this._waitForComponentLoad();\n  }\n\n  _updateContent() {\n    this.childList.clear();\n\n    // if wrapping with max lines, hide content until it has rerendered with maxLines and truncation calculated\n    if (this._shouldTruncate) {\n      this.alpha = 0.001;\n    }\n    if (this._parsedContent && this._parsedContent.length) {\n      this.patch({\n        flex: {\n          direction: 'row',\n          wrap: !!this.contentWrap,\n          justifyContent:\n            this.justify != undefined ? this.justify : this.style.justify\n        }\n      });\n\n      this._parsedContent.forEach((item, index) => {\n        const isLast = index === this._parsedContent.length - 1;\n        const base = {\n          flexItem: {\n            ...this.contentProperties,\n            marginBottom: isLast ? 0 : this._marginBottom,\n            marginRight: isLast\n              ? 0\n              : this.contentProperties.marginRight || this.style.contentSpacing\n          }\n        };\n\n        // text not separated by icons/badges are grouped together\n        if (isText(item)) {\n          const nextItem = this._parsedContent[index + 1];\n          if (\n            (nextItem && isText(nextItem)) ||\n            (this.contentWrap &&\n              nextItem &&\n              nextItem.newline &&\n              this._parsedContent[index + 2] &&\n              isText(this._parsedContent[index + 2]))\n          ) {\n            base.flexItem.marginRight = 0;\n          }\n          this.childList.a(this._createText(base, item));\n        } else if (isIcon(item)) {\n          this.childList.a(this._createIcon(base, item));\n        } else if (isBadge(item)) {\n          this.childList.a(this._createBadge(base, item.badge));\n        } else if (item.newline && this.contentWrap) {\n          this.childList.a({ h: 0, w: this.w });\n        }\n      });\n    }\n  }\n\n  _waitForComponentLoad() {\n    if (this.children.length) {\n      Promise.all(\n        this.children.map(\n          child =>\n            new Promise(resolve => {\n              // resolve immediately for new line elements since they do not render a texture\n              if (child.h === 0 && child.w === this.w) {\n                resolve();\n              } else {\n                child.on('txLoaded', resolve);\n              }\n            })\n        )\n      ).finally(() => this._contentLoaded());\n    } else {\n      this.h = 0;\n      this._contentLoaded();\n    }\n  }\n\n  _notifyAncestors() {\n    this.fireAncestors('$loadedInlineContent', this);\n    this.signal('loadedInlineContent', this.finalW, this.multiLineHeight);\n  }\n\n  _contentLoaded() {\n    // TODO: FIX --figure out an alternative to using setTimeout\n    // perhaps have to wait until Lightning Flexboxes can emit a signal (like textures) when they've finished loading\n    if (this.children.length) {\n      setTimeout(() => {\n        this.multiLineHeight = this.finalH;\n        if (\n          this.flex &&\n          this.flex._layout &&\n          this.flex._layout._lineLayouter &&\n          this.flex._layout._lineLayouter._lines\n        ) {\n          let totalHeight = 0;\n          this.flex._layout._lineLayouter._lines.forEach(line => {\n            totalHeight += Object.entries(line.items)\n              .slice(line.startIndex, line.endIndex + 1)\n              .sort((a, b) => {\n                return b[1].h - a[1].h;\n              })[0][1].h;\n          });\n          this.multiLineHeight = totalHeight;\n\n          if (this._shouldTruncate) {\n            this._renderMaxLines();\n          }\n\n          this._notifyAncestors();\n        } else {\n          this._contentLoaded();\n        }\n      }, 10);\n    } else {\n      this._notifyAncestors();\n    }\n  }\n\n  _renderMaxLines() {\n    const childrenDimensions = this._calcChildrenDimensions();\n\n    this.childList.clear();\n    let renderedLastElement = false;\n    childrenDimensions.forEach((child, index) => {\n      if (renderedLastElement) {\n        return;\n      }\n\n      const nextChild = childrenDimensions[index + 1];\n\n      if (!nextChild) {\n        this.childList.add(child.component);\n        return;\n      }\n\n      const isOnLastLine = child.line === this.maxLines;\n\n      const isLastBeforeMaxLines =\n        isOnLastLine && nextChild.line > this.maxLines;\n\n      const canRenderLastWithSuffix =\n        isLastBeforeMaxLines && child.hasSpaceForSuffix;\n\n      const isLastWithSpaceForSuffix =\n        isOnLastLine && child.hasSpaceForSuffix && !nextChild.hasSpaceForSuffix;\n\n      /**\n       * This is the last element to render, with a suffix, if the element is:\n       * - the last element to render (and has not reached the maxLines yet)\n       * - the last element that fits within maxLines, including with the width of the maxLinesSuffix appended to it\n       */\n      const isLast =\n        !nextChild || canRenderLastWithSuffix || isLastWithSpaceForSuffix;\n\n      if (child.line <= this.maxLines) {\n        if (isLast && index !== childrenDimensions.length - 1) {\n          this.childList.add(this._addSuffix(child));\n          renderedLastElement = true;\n        } else {\n          this.childList.add(child.component);\n        }\n      }\n    });\n    this.alpha = 1;\n  }\n\n  _calcChildrenDimensions() {\n    const suffixW = measureTextWidth({\n      ...this.style.textStyle,\n      text: this.maxLinesSuffix\n    });\n    let contentEndX = 0;\n    let line = 1;\n\n    return this.children.reduce((acc, child) => {\n      const component = child;\n      let type, content, w;\n      const isNewLineElement = child.w == this.w && child.h === 0;\n\n      if (isNewLineElement) {\n        line++;\n        contentEndX = 0;\n        const data = {\n          type: 'linebreak',\n          component,\n          content,\n          line,\n          hasSpaceForSuffix: true\n        };\n\n        acc.push(data);\n        return acc;\n      }\n\n      if (isText(child)) {\n        type = 'text';\n        content = child.text.text;\n        w = child.texture.getRenderWidth();\n      } else if (isIcon(child)) {\n        type = 'icon';\n        w = child.w;\n      } else if (child.constructor.__componentName === 'Badge') {\n        type = 'badge';\n        w = child.w;\n      }\n\n      contentEndX += w;\n      contentEndX += child.flexItem.marginRight;\n\n      if (Math.ceil(contentEndX) >= this.w) {\n        line++;\n        contentEndX = w;\n      }\n\n      const hasSpaceForSuffix = Math.ceil(contentEndX) + suffixW <= this.w;\n\n      const data = {\n        type,\n        component,\n        content,\n        line,\n        hasSpaceForSuffix\n      };\n\n      acc.push(data);\n      return acc;\n    }, []);\n  }\n\n  _addSuffix({ type, component, content }) {\n    const negatedRightMargin = component.flexItem.marginRight * -1;\n    let suffix;\n    if (type === 'text') {\n      // We need to grab the current styling of the text to ensure that any\n      // custom styling is applied to the suffix\n      const { fontFace, fontSize, fontStyle, lineHeight, verticalAlign } =\n        component.text;\n      suffix = this._createText(\n        { flexItem: this.contentProperties },\n        {\n          text: `${content.trim()}${this.maxLinesSuffix}`,\n          style: {\n            fontFace,\n            fontSize,\n            fontStyle,\n            lineHeight,\n            verticalAlign\n          }\n        }\n      );\n    } else {\n      this.childList.add(component);\n      suffix = this._createText(\n        {\n          flexItem: {\n            ...this.contentProperties,\n            marginLeft: negatedRightMargin\n          }\n        },\n        this.maxLinesSuffix\n      );\n    }\n    return suffix;\n  }\n\n  _createIcon(base, iconProps) {\n    const y =\n      (this.textHeight > this.style.textStyle.lineHeight\n        ? this.textHeight\n        : this.style.textStyle.lineHeight) - this.style.iconHeight;\n    return {\n      ...base,\n      type: Icon,\n      y: y,\n      w: this.style.iconWidth,\n      h: this.style.iconHeight,\n      signals: {\n        itemChanged: '_updateIconPosition'\n      },\n      ...iconProps\n    };\n  }\n\n  _createText(base, text) {\n    const textOverrideStyles =\n      typeof text.style === 'string'\n        ? this.customStyleMappings[text.style]\n        : text.style;\n    const textComponent = {\n      ...base,\n      y: this.textY !== undefined ? this.textY : this.style.textY,\n      h:\n        textOverrideStyles?.lineHeight ||\n        textOverrideStyles?.fontSize ||\n        this.textHeight,\n      text: {\n        ...this.style.textStyle,\n        ...textOverrideStyles,\n        text: text.text || text\n      }\n    };\n    if (textOverrideStyles?.textDecoration === 'line-through') {\n      const textWidth = measureTextWidth({\n        ...this.style.textStyle,\n        ...textOverrideStyles,\n        text: text.text || text\n      });\n      const strikethroughLine = {\n        rect: true,\n        w: textWidth,\n        color:\n          this.style.strikethroughColor ||\n          textOverrideStyles?.textColor ||\n          this.style.textStyle.textColor,\n        h: textComponent.h * this.style.strikethroughRatio,\n        y: textComponent.h / 2,\n        mountY: 1\n      };\n      return {\n        type: lng.Component,\n        w: textWidth + textComponent.flexItem.marginRight,\n        h: textComponent.h,\n        children: [{ ...textComponent }, { ...strikethroughLine }]\n      };\n    }\n    return textComponent;\n  }\n\n  _createBadge(base, badge) {\n    return {\n      ...base,\n      y: this.badgeY || 0,\n      ...this.badgeProperties,\n      type: Badge,\n      title: badge,\n      signals: {\n        loadedBadge: '_loadedBadge'\n      }\n    };\n  }\n\n  _updateIconPosition(icon) {\n    icon.y = this.style.textStyle.lineHeight - icon.h;\n  }\n\n  _loadedBadge(badge) {\n    if (this.badgeY === undefined) {\n      badge.y = this.style.textStyle.lineHeight - badge.h;\n    }\n  }\n\n  /**\n   * RegEx Lookbehinds do not work in WPE Browser, but we want the space\n   * at the end of the previous string to prevent weird wrapping,\n   * so we need to separate on spaces, then re-attach to the previous string\n   *\n   * @param { array } parsedContent\n   *\n   * @return { array }\n   */\n  _formatSpaces(parsedContent) {\n    // retain the white space next to the appropriate word, then filter by the empty string,\n    // otherwise all whitespace is stripped and the flexItem's marginRight adds its own space\n    // which can be a different space size than the text would apply between words\n    const whitespace = /(.+?\\s+)/;\n    return flatten(\n      (parsedContent || []).reduce((acc, item) => {\n        let parsed = item;\n        if (isText(item)) {\n          if (typeof item === 'object') {\n            const formattedWords = item.text\n              .split(whitespace) // split after whitespace character (which adds empty strings)\n              .map(word => word && { ...item, text: word }); // check for empty string before adding\n            acc.push(...formattedWords);\n            return acc;\n          }\n          parsed = item.split(whitespace);\n        }\n        acc.push(parsed);\n        return acc;\n      }, [])\n    )\n      .map((item, index, arr) => {\n        if (item === ' ') return false;\n        if (arr[index + 1] === ' ') return item + ' ';\n        return item;\n      })\n      .filter(Boolean);\n  }\n\n  _setContent(content) {\n    if (content !== this._content) {\n      this._content = content;\n      let parsedContent = this._content;\n      if (content && !Array.isArray(content)) {\n        parsedContent = parseInlineContent(content);\n      }\n\n      this._parsedContent = this._formatSpaces(parsedContent);\n    }\n    return content;\n  }\n\n  _setBadgeProperties(badgeProperties) {\n    if (typeof badgeProperties === 'object') {\n      return badgeProperties;\n    }\n  }\n\n  _getBadgeProperties() {\n    return this._badgeProperties || {};\n  }\n\n  _setContentProperties(contentProperties) {\n    if (typeof contentProperties === 'object') {\n      return contentProperties;\n    }\n  }\n\n  _getContentProperties() {\n    return this._contentProperties || {};\n  }\n\n  _setCustomStyleMappings(customStyleMappings) {\n    if (typeof customStyleMappings === 'object') {\n      return customStyleMappings;\n    }\n  }\n\n  _getCustomStyleMappings() {\n    return this._customStyleMappings || {};\n  }\n\n  _setMaxLines(maxLines) {\n    // only accept positive numbers\n    // round down any decimals to whole numbers\n    return maxLines >= 1 ? Math.floor(maxLines) : 0;\n  }\n\n  get textHeight() {\n    return this.style.textStyle.lineHeight || this.style.textStyle.fontSize;\n  }\n\n  get _marginBottom() {\n    if (this.contentProperties.marginBottom !== undefined) {\n      return this.contentProperties.marginBottom;\n    }\n    if (this.style.marginBottom) {\n      return this.style.marginBottom;\n    }\n    return 0;\n  }\n\n  get _shouldTruncate() {\n    return this.contentWrap && this.maxLines;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n    const announce =\n      this._parsedContent &&\n      this._parsedContent.reduce((announce, item) => {\n        if (typeof item === 'string') {\n          announce += item;\n        } else if (item.announce) {\n          announce += item.announce;\n        } else if (item.text) {\n          announce += item.text;\n          if (item.style?.textDecoration === 'line-through') {\n            announce += 'strikethrough';\n          }\n        } else if (item.title) {\n          announce += item.title;\n        } else if (item.badge) {\n          announce += item.badge;\n        }\n        return announce + ' ';\n      }, '');\n    return announce ? announce.replace(/\\s+(?=\\s)|\\s$/g, '') : '';\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  fadeWidth: 100,\n  offset: theme.spacer.xxl,\n  shouldSmooth: false,\n  textStyle: theme.typography.body1\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nexport default class FadeShader extends lng.shaders.WebGLDefaultShader {\n  constructor(context) {\n    super(context);\n    this._margin = { left: 0, right: 0 };\n  }\n\n  set positionLeft(v) {\n    this._positionLeft = v;\n  }\n\n  set positionRight(v) {\n    this._positionRight = v;\n  }\n\n  setupUniforms(operation) {\n    super.setupUniforms(operation);\n    const owner = operation.shaderOwner;\n\n    if (this._positionLeft === 0) {\n      this._positionLeft = 0.001;\n    }\n    if (this._positionRight === 0) {\n      this._positionRight = 0.001;\n    }\n\n    const renderPrecision = this.ctx.stage.getRenderPrecision();\n    this._setUniform(\n      'margin',\n      [\n        this._positionLeft * renderPrecision,\n        this._positionRight * renderPrecision\n      ],\n      this.gl.uniform1fv\n    );\n    this._setUniform(\n      'resolution',\n      new Float32Array([\n        owner._w * renderPrecision,\n        owner._h * renderPrecision\n      ]),\n      this.gl.uniform2fv\n    );\n  }\n}\n\nFadeShader.fragmentShaderSource = `\n  #ifdef GL_ES\n  # ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  # else\n  precision lowp float;\n  # endif\n  #endif\n\n  #define PI 3.14159265359\n\n  varying vec2 vTextureCoord;\n  varying vec4 vColor;\n\n  uniform sampler2D uSampler;\n  uniform vec2 resolution;\n  uniform float margin[2];\n\n  void main() {\n      vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n      vec2 halfRes = 0.5 * resolution.xy;\n      vec2 point = vTextureCoord.xy * resolution;\n\n\n      vec2 pos1 = vec2(point.x, point.y);\n      vec2 pos2 = pos1;\n      pos2.x += margin[0];\n\n      vec2 d = pos2 - pos1;\n      float t = dot(pos1, d) / dot(d, d);\n      t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));\n\n      vec2 pos3 = vec2(vTextureCoord.x * resolution.x, vTextureCoord.y);\n      pos3.x -= resolution.x - margin[1];\n      vec2 pos4 = vec2(vTextureCoord.x + margin[1], vTextureCoord.y);\n\n      vec2 d2 = pos4 - pos3;\n      float t2 = dot(pos3, d2) / dot(d2, d2);\n      t2 = smoothstep(0.0, 1.0, clamp(t2, 0.0, 1.0));\n\n      color = mix(vec4(0.0), color, t);\n      color = mix(color, vec4(0.0), t2);\n\n      gl_FragColor = color;\n  }\n`;\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './Marquee.styles';\nimport FadeShader from '../../shaders/FadeShader';\nimport utils from '../../utils';\nimport Base from '../Base';\n\nexport default class Marquee extends Base {\n  static _template() {\n    return {\n      ContentClipper: {\n        boundsMargin: [], // overwrite boundsMargin so text won't de-render if moved offscreen\n        ContentBox: {\n          Content: {},\n          ContentLoopTexture: {}\n        }\n      }\n    };\n  }\n\n  static get __componentName() {\n    return 'Marquee';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get tags() {\n    return [\n      'ContentClipper',\n      {\n        name: 'ContentBox',\n        path: 'ContentClipper.ContentBox'\n      },\n      {\n        name: 'Content',\n        path: 'ContentClipper.ContentBox.Content'\n      },\n      {\n        name: 'ContentLoopTexture',\n        path: 'ContentClipper.ContentBox.ContentLoopTexture'\n      }\n    ];\n  }\n\n  static get properties() {\n    return [\n      'autoStart',\n      'title',\n      'contentTexture',\n      'color',\n      'centerAlign',\n      'delay',\n      'repeat',\n      'overrideLoopX'\n    ];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'fadeW', curr: 'fadeWidth' }];\n  }\n\n  _construct() {\n    super._construct();\n    this._scrolling = false;\n    this._autoStart = false;\n    this._centerAlign = false;\n  }\n\n  _init() {\n    this._Content.on('txLoaded', this._updateContentTexture.bind(this));\n    super._init();\n  }\n\n  _updateContentTexture() {\n    const restartScrolling = this._restartScrolling;\n    this.stopScrolling();\n\n    if (!this._currentTexture.h) {\n      this._ContentClipper.h =\n        this._currentTexture.text && this._currentTexture.text.lineHeight\n          ? this._currentTexture.text.lineHeight\n          : this._Content.finalH;\n    }\n    // in case the metadata width gets larger on focus and the text goes from being clipped to not\n    if (this._shouldClip) {\n      this._updateShader();\n    } else {\n      this._ContentClipper.shader = null;\n      this._positionTexture();\n    }\n\n    restartScrolling && this.startScrolling();\n    this.signal('marqueeContentLoaded');\n  }\n\n  _update() {\n    this._updateColor();\n    this._updateTexture();\n    this._updateShader();\n    this._restartScrolling && this.startScrolling();\n  }\n\n  get _restartScrolling() {\n    return this.autoStart || this._scrolling || this._shouldTryScrolling;\n  }\n\n  _updateColor() {\n    if (this.color) {\n      this._Content.smooth = { color: utils.getValidColor(this.color) };\n    }\n  }\n\n  get _currentTexture() {\n    return this._Content.text || this._Content.texture || {};\n  }\n\n  _updateTexture() {\n    const content = { rtt: true };\n    if (this.contentTexture) {\n      content.texture = this.contentTexture;\n    } else if (this.title) {\n      content.text = {\n        ...this.style.textStyle,\n        ...this.title,\n        text: this.textContent\n      };\n    }\n\n    this.patch({\n      ContentClipper: {\n        w: this.w + 14,\n        ContentBox: {\n          Content: content,\n          ContentLoopTexture: {}\n        }\n      }\n    });\n    this.signal('marqueeContentLoaded'); // TODO: Check if this extra signal is needed since the txLoaded event should emit it already?\n  }\n\n  _updateShader() {\n    this._ContentClipper.patch({\n      w: this.w > 0 ? this.w + this.style.fadeWidth / 2 : 0,\n      shader: {\n        type: FadeShader,\n        positionLeft: 0,\n        positionRight: this.style.fadeWidth\n      },\n      rtt: true\n    });\n  }\n\n  _updateAnimation() {\n    this._scrollAnimation && this._scrollAnimation.stopNow();\n    this._scrollAnimation = this.animation({\n      duration: this._loopWidth / 50,\n      delay: isNaN(this.delay) ? 1.5 : this.delay,\n      repeat: isNaN(this.repeat) ? -1 : this.repeat,\n      actions: [\n        {\n          t: 'ContentBox',\n          p: 'x',\n          v: {\n            sm: 0,\n            0: { v: 0 },\n            0.5: { v: -(this._loopWidth + this.style.offset) }\n          }\n        },\n        {\n          t: 'ContentClipper',\n          p: 'shader.positionLeft',\n          v: {\n            sm: 0,\n            0: { v: 0 },\n            0.1: { v: this.style.fadeWidth },\n            0.4: { v: this.style.fadeWidth },\n            0.5: { v: 0 }\n          }\n        }\n      ]\n    });\n  }\n\n  _positionTexture() {\n    const x = this._shouldCenter() ? (this.w - this._textRenderedW) / 2 : 0;\n    if (this.style.shouldSmooth) {\n      this._ContentBox.smooth = { x };\n    } else {\n      this._ContentBox.x = x;\n    }\n  }\n\n  startScrolling() {\n    this._Content.off('txLoaded', this.startScrolling.bind(this));\n\n    this._shouldTryScrolling = true;\n    if (this._textRenderedW === 0) {\n      // can switch to .once in LUI5.0 requiring higher Lightning Core version\n      this._Content.on('txLoaded', this.startScrolling.bind(this));\n    }\n    if (this._shouldClip) {\n      this._scrolling = true;\n      this._ContentLoopTexture.x = this._loopWidth + this.style.offset;\n      this._ContentLoopTexture.texture = this._Content.getTexture();\n      this._updateAnimation();\n      this._scrollAnimation.start();\n    } else {\n      this._scrolling = false;\n    }\n  }\n\n  stopScrolling() {\n    this._shouldTryScrolling = false;\n    this._scrolling = false;\n    if (this._scrollAnimation) {\n      this._scrollAnimation.stopNow();\n      this._ContentLoopTexture.texture = null;\n    }\n  }\n\n  get _shouldClip() {\n    // using fadeWidth / 4 so that if something like the last character is slightly\n    // faded out but still visible, we don't unnecessarily scroll\n    return this._textRenderedW > this.w - this.style.fadeWidth / 4;\n  }\n\n  _shouldCenter() {\n    return (\n      this._centerAlign ||\n      (this._Content.text && this._Content.text.textAlign === 'center')\n    );\n  }\n\n  _setAutoStart(autoStart) {\n    // if the component is changed from  autoStarting to not,\n    // cancel the current scrolling behavior,\n    // otherwise the component can continue to scroll from its previous state\n    if (this.autoStart && !autoStart) {\n      // Calling this ensures that the animation is stopped, and the texture\n      // is properly positioned if it needs to be centered. Otherwise, if it\n      // is un-clipped text, it is positioned at 0.\n      this._updateContentTexture();\n    }\n    return autoStart;\n  }\n\n  _setCenterAlign(center) {\n    // The Content texture needs to be updated if centerAlign\n    // is changed, but we need the new value first.\n    this._centerAlign = center;\n    this._updateContentTexture();\n    return center;\n  }\n\n  get textContent() {\n    return this.title?.text ?? this.title ?? '';\n  }\n\n  get _loopWidth() {\n    return this.overrideLoopX || this._textRenderedW;\n  }\n\n  get _textRenderedW() {\n    return this._Content.renderWidth;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this.title && this.title.text);\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport * as styles from './TextBox.styles';\nimport Base from '../Base';\nimport InlineContent from '../InlineContent';\nimport Marquee from '../Marquee';\nimport context from '../../globals/context/index';\nimport utils from '../../utils';\n\n/**\n *\n * Get defaults directly from @lightningjs/core to ensure correct fallback values\n *\n */\nconst lightningTextDefaults = Object.entries(\n  Object.getOwnPropertyDescriptors(lng.textures.TextTexture.prototype)\n).reduce((acc, [prop]) => {\n  const value = lng.textures.TextTexture.prototype[prop];\n  if (prop.startsWith('_') || ['undefined', 'function'].includes(typeof value))\n    return acc;\n  return {\n    [prop]: value,\n    ...acc\n  };\n}, {});\n\nexport default class TextBox extends Base {\n  static _template() {\n    return {\n      alpha: 0.001\n    };\n  }\n\n  static get __componentName() {\n    return 'TextBox';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get tags() {\n    return ['InlineContent', 'Marquee', 'Text'];\n  }\n\n  static get properties() {\n    return [\n      ...InlineContent.properties,\n      'content',\n      'fixed',\n      'marquee',\n      'marqueeProps',\n      'hideOnLoad'\n    ];\n  }\n\n  _setDimensions(w, h) {\n    let width = w;\n    let height = h;\n    if (!this._isInlineContent) {\n      width = this._Text.texture.getRenderWidth();\n      height = this._Text.texture.getRenderHeight();\n    }\n\n    const sizeChanged = this.w !== width || this.h !== height;\n\n    if (width && height && sizeChanged) {\n      this.h = height;\n      if (!this.fixed) {\n        this.w = width;\n      }\n\n      // Position updates can produce flash of poorly positioned content, hide the element until measurements are made.\n      if (!this.hideOnLoad && this.alpha < 1) {\n        this.alpha = 1;\n      }\n\n      this._notifyAncestors();\n    }\n  }\n\n  _setContent(content) {\n    this._isInlineContent = false;\n    if (Array.isArray(content) || utils.isMarkupString(content)) {\n      this._isInlineContent = true;\n    }\n    if ('string' !== typeof content && !this._isInlineContent) {\n      return '';\n    }\n    return content;\n  }\n\n  get title() {\n    return this._content;\n  }\n\n  _notifyAncestors(w = this.w, h = this.h) {\n    this.fireAncestors('$itemChanged');\n    this.signal('textBoxChanged', { w, h });\n  }\n\n  _construct() {\n    super._construct();\n    this._marqueeContentListenerAttached = false;\n    this._marqueeOverrideLoopX = undefined;\n    this._resetMarqueePromise();\n  }\n\n  _update() {\n    if (!this.content) {\n      // If content is not defined hide the component, but do NOT set visibility\n      // as a parent component may need to control that (i.e. Control Button)\n\n      // guard to make sure _notifyAncestors is not called numerous times for components like Input\n      if (this._Text || this._InlineContent) {\n        this.w = this.h = 0;\n        this._notifyAncestors(); // need to alert parents that the width and height are now 0\n        // makes sure that elements are removed\n        this._updateMarquee();\n        this.patch({ Text: undefined, InlineContent: undefined });\n      }\n\n      return;\n    }\n    this._isInlineContent ? this._updateInlineContent() : this._updateText();\n    this._updateMarquee();\n  }\n\n  _updateInlineContent() {\n    this.patch({ Text: undefined });\n\n    const inlineContentPatch = InlineContent.properties.reduce(\n      (acc, prop) => {\n        if (this[prop] != undefined) {\n          acc[prop] = this[prop];\n        }\n        return acc;\n      },\n      // ensure all styles are passed down as well\n      {\n        style: {\n          ...this.style,\n          textStyle: this._textStyleSet\n        }\n      }\n    );\n\n    if (this._textStyleSet.wordWrapWidth) {\n      inlineContentPatch.w = this._textStyleSet.wordWrapWidth;\n      inlineContentPatch.rtt = true;\n    }\n    if (this._textStyleSet.maxLines) {\n      inlineContentPatch.maxLines = this._textStyleSet.maxLines;\n    }\n    if (this._textStyleSet.maxLinesSuffix) {\n      inlineContentPatch.maxLinesSuffix = this._textStyleSet.maxLinesSuffix;\n    }\n\n    this.patch({\n      alpha: 1,\n      InlineContent: {\n        type: InlineContent,\n        w: this.w,\n        ...inlineContentPatch,\n        signals: {\n          loadedInlineContent: '_setDimensions'\n        }\n      }\n    });\n  }\n\n  _updateText() {\n    this.patch({ InlineContent: undefined });\n\n    if (!this._Text) {\n      this.patch({ Text: {} });\n      this._Text.on('txLoaded', this._setDimensions.bind(this));\n    }\n\n    const fontStyle = this._textStyleSet;\n\n    if (this._Text) {\n      this._Text.patch({\n        y: this.style.offsetY,\n        x: this.style.offsetX,\n        text: {\n          ...lightningTextDefaults, // order matters this should always be first\n          ...fontStyle\n        }\n      });\n    }\n  }\n\n  // keep this out of the update lifecycle\n  set marqueeOverrideLoopX(v) {\n    this._marqueeOverrideLoopX = v;\n    if (this._Marquee) this._Marquee.overrideLoopX = this._marqueeOverrideLoopX;\n    this._resolveAwaitMarqueeOverrideX();\n  }\n\n  get marqueeOverrideLoopX() {\n    return this._marqueeOverrideLoopX;\n  }\n\n  _resetMarqueePromise() {\n    this._awaitMarqueeOverrideX = new Promise((resolve, reject) => {\n      this._resolveAwaitMarqueeOverrideX = resolve;\n      this._rejectAwaitMarqueeOverrideX = reject;\n    });\n  }\n\n  _loadedMarqueeContent() {\n    this.signal('willMarquee', this._Marquee);\n  }\n\n  _updateMarquee() {\n    if (this._Marquee && !this.marquee) {\n      this._toggleMarquee(this._contentTag);\n    }\n\n    if (this.marquee) {\n      this._resetMarqueePromise();\n      const marqueePatch = {\n        ...this.marqueeProps,\n        w: this._textStyleSet.wordWrapWidth || this.w,\n        h: this.h,\n        y: this.style.offsetY,\n        x: this.style.offsetX,\n        signals: {\n          marqueeContentLoaded: '_loadedMarqueeContent'\n        }\n      };\n\n      if (!this._Marquee) {\n        marqueePatch.type = Marquee;\n      }\n\n      if (this._isInlineContent) {\n        this._InlineContent.w = 0; // ensure we're copying the full, unwrapped inlineContent\n        marqueePatch.title = undefined;\n        marqueePatch.contentTexture = this._contentTag.getTexture();\n        marqueePatch.w = this._textStyleSet.wordWrapWidth || this.w;\n      } else {\n        marqueePatch.contentTexture = undefined;\n        marqueePatch.title = {\n          text: this._contentTag.text.text,\n          ...this._textStyleSet,\n          wordWrapWidth: 0, // ensures that the text will marquee and not wrap\n          maxLines: 1\n        };\n      }\n\n      this.patch({\n        Marquee: marqueePatch\n      });\n      if (!this._marqueeContentListenerAttached) {\n        this._marqueeContentListenerAttached = true;\n      }\n      if ('undefined' !== typeof this._marqueeOverrideLoopX) {\n        this._awaitMarqueeOverrideX.then(() => {\n          this._toggleMarquee(this._contentTag);\n        });\n      } else {\n        this._toggleMarquee(this._contentTag);\n      }\n    }\n  }\n\n  _getMarqueeProps() {\n    return this._marqueeProps ?? {};\n  }\n\n  get _textStyleSet() {\n    const fontStyle = {\n      ...this.theme.typography.body1,\n      ...(null !== this.style.textStyle &&\n      'object' === typeof this.style.textStyle &&\n      Object.keys(this.style.textStyle)\n        ? this.style.textStyle\n        : this.theme.typography[this.style.textStyle])\n    };\n\n    this.constructor.properties.forEach(prop => {\n      if ('fontStyle' !== prop && 'undefined' !== typeof this[`_${prop}`]) {\n        const key = 'content' === prop ? 'text' : prop;\n        fontStyle[key] = this[`_${prop}`];\n      }\n    });\n\n    if (\n      this.w &&\n      !this._isInlineContent &&\n      !this.style.textStyle.wordWrapWidth &&\n      this.fixed\n    ) {\n      fontStyle.wordWrapWidth = this.w;\n    }\n\n    return fontStyle;\n  }\n\n  get _contentTag() {\n    return this._isInlineContent ? this._InlineContent : this._Text;\n  }\n\n  _toggleMarquee(contentTag) {\n    // do not just return if there is no contentTag, we may still need to alpha the Marquee\n    if (this.marquee) {\n      if (contentTag) {\n        contentTag.alpha = 0.001;\n      }\n      if (this._Marquee) {\n        this._Marquee.alpha = 1;\n        this._Marquee.startScrolling();\n      }\n    } else {\n      if (contentTag) {\n        contentTag.alpha = 1;\n      }\n      if (this._Marquee) {\n        this._Marquee.alpha = 0.001;\n        this._Marquee.stopScrolling();\n      }\n    }\n  }\n\n  toggleMarquee() {\n    this._toggleMarquee(this._contentTag);\n  }\n\n  get announce() {\n    return (\n      this._announce ||\n      (this._isInlineContent && this._InlineContent\n        ? this._InlineContent.announce\n        : this.content)\n    );\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  set smooth(v) {\n    context.warn(\n      'warning: value smoothing is known to cause bugs with the TextBox - patch updated values instead.'\n    );\n    super.smooth = v;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './Button.styles';\nimport Row from '../Row';\nimport Surface from '../Surface';\nimport TextBox from '../TextBox'; // There seams to be some issue with the circular dependency here\n\n/**\n * Button Component\n *\n * Generic Button Component that handles setting text icon and checkbox\n */\nexport default class Button extends Surface {\n  static get __componentName() {\n    return 'Button';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return ['fixed', 'justify', 'prefix', 'suffix', 'title'];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'titlePadding', curr: 'contentSpacing' }];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      'Content',\n      { name: 'TextWrapper', path: 'Content.TextWrapper' },\n      { name: 'Title', path: 'Content.TextWrapper.Title' },\n      { name: 'Prefix', path: 'Content.Prefix' },\n      { name: 'Suffix', path: 'Content.Suffix' }\n    ];\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      Content: {\n        mount: 0.5,\n        x: w => w / 2,\n        y: h => h / 2,\n        zIndex: 2 // ensure content (title) is rendered above Surface Background\n      }\n    };\n  }\n\n  _update() {\n    this._updatePrefix();\n    this._updateTitle();\n    this._updateSuffix();\n    this._updateAllPositioning();\n    this._updateTruncation();\n  }\n\n  _updateAllPositioning() {\n    this._updatePositions();\n    this._updateContentDimensions();\n    this._updateSurfaceDimensions();\n    this._updateContentPosition();\n    // delaying the super._update call so we update the surface sizing after the button has finished updating\n    super._update();\n  }\n\n  $itemChanged() {\n    this._updateAllPositioning();\n    this._updateTruncation();\n  }\n\n  _onTitleTextBoxChanged() {\n    this._updateAllPositioning();\n  }\n\n  _updatePositions() {\n    if (this._hasPrefix && this._Prefix !== undefined) {\n      this._Prefix.x = this._prefixX;\n    }\n    if (this._hasTitle) {\n      this._TextWrapper.x = this._titleX;\n    }\n    if (this._hasSuffix && this._Suffix !== undefined) {\n      this._Suffix.x = this._suffixX;\n    }\n  }\n\n  _updatePrefix() {\n    const prefixString = JSON.stringify(this.prefix);\n    if (this.prefix) {\n      let prefixPatch = {\n        style: {\n          itemSpacing: this.style.itemSpacing\n        }\n      };\n      if (!this._Prefix) {\n        prefixPatch = {\n          ...this._rowProps,\n          ...prefixPatch\n        };\n      }\n      this._Content.patch({ Prefix: prefixPatch });\n      this._updatePrefixSuffixStyles('prefix');\n    } else {\n      this._Content.patch({ Prefix: undefined });\n    }\n    this._prevPrefix = prefixString;\n  }\n\n  _updatePrefixSuffixStyles(type = 'prefix') {\n    /**\n     * Repatching all items re-renders all the components in the Prefix/Suffix Rows.\n     * This can cause items to shift while their layout in the Row is re-calculated if\n     * any of the items do not have width or height on their initial render (ex. an Icon\n     * does not have width and height until after its texture loads).\n     * If the contents of the Prefix/Suffix are the same components and this update was triggered\n     * from something else (ex. a change in mode), only update the styles applied to the\n     * items in the Prefix (ex. updating the color to the value appropriate to the new mode).\n     */\n    const map = {\n      prefix: {\n        tag: this._Prefix,\n        prop: this.prefix,\n        prevProp: this._prevPrefix\n      },\n      suffix: {\n        tag: this._Suffix,\n        prop: this.suffix,\n        prevProp: this._prevSuffix\n      }\n    };\n    const { tag, prop } = map[type];\n    let { prevProp } = map[type];\n    const propString = JSON.stringify(prop);\n\n    if (propString !== prevProp) {\n      prevProp = propString;\n      tag.items = this._addButtonProps(prop);\n    } else {\n      tag.Items.children.forEach((item, idx) => {\n        item.color = Array.isArray(prop) ? prop[idx].color : prop.color;\n        item.style = {\n          ...item.style,\n          color: this.style.contentColor\n        };\n      });\n    }\n  }\n\n  _updateTitle() {\n    if (this._hasTitle) {\n      let titlePatch = {\n        content: this.title,\n        style: { textStyle: this.style.textStyle }\n      };\n      if (!this._Title) {\n        titlePatch = {\n          type: TextBox,\n          mountY: 0.5,\n          y: h => h / 2,\n          signals: {\n            textBoxChanged: '_onTitleTextBoxChanged'\n          },\n          ...titlePatch\n        };\n      }\n      this._Content.patch({\n        TextWrapper: {\n          mountY: 0.5,\n          Title: titlePatch\n        }\n      });\n    } else {\n      this._Content.patch({ TextWrapper: { Title: undefined } });\n    }\n  }\n\n  _updateSuffix() {\n    if (this.suffix) {\n      let suffixPatch = {\n        style: {\n          itemSpacing: this.style.itemSpacing\n        }\n      };\n      if (!this._Suffix) {\n        suffixPatch = {\n          ...this._rowProps,\n          ...suffixPatch\n        };\n      }\n      this._Content.patch({ Suffix: suffixPatch });\n      this._updatePrefixSuffixStyles('suffix');\n    } else {\n      this._Content.patch({ Suffix: undefined });\n    }\n  }\n\n  _updateTruncation() {\n    /**\n     * needs to run before rest of content updates to prevent a bug causing text\n     * to sometimes truncate and then un-truncate(with no width change) when\n     * toggling fixed after toggling focus\n     */\n    if (this._Title) {\n      this._Title.patch({\n        style: {\n          textStyle: {\n            ...this.style.textStyle,\n            wordWrap: this.fixed,\n            wordWrapWidth: this.fixed ? this._fixedWordWrapWidth : 0\n          }\n        }\n      });\n    }\n  }\n\n  _updateContentDimensions() {\n    const contentDimensionsPatch = {};\n    const y = this.h / 2;\n\n    // reference transition targets to ensure we aren't checking against intermittent values\n    if (this._Content.transition('w').targetValue !== this._contentW) {\n      this._Content.w = this._contentW;\n    }\n\n    if (this._Content.y !== y) {\n      contentDimensionsPatch.y = y;\n    }\n\n    if (Object.keys(contentDimensionsPatch).length > 0) {\n      this._Content.patch(contentDimensionsPatch);\n    }\n  }\n\n  _updateContentPosition() {\n    this._Content.patch(this._contentProps);\n  }\n\n  _updateSurfaceDimensions() {\n    let newWidth = this.w;\n    if (this.fixed) {\n      newWidth = this._w;\n    } else {\n      newWidth = this._calcDynamicWidth();\n    }\n\n    if (newWidth !== this.w) {\n      this.w = newWidth;\n    }\n\n    // In order to ensure the \"hSetByUser\" flag is not set to true,\n    // skip over \"set h\" by directly updating \"_h\"\n    // Using the \"get h\" return statement does not force an update to the inspector,\n    // whereas this will ensure the \"height\" attribute is updated\n    if (!this._hSetByUser && !this.style.h) {\n      this._h = this.style.textStyle.lineHeight + this.style.paddingY * 2;\n    }\n\n    // TODO breaks row resizing if this is wrapped in the width conditional above\n    this.fireAncestors('$itemChanged');\n  }\n\n  _calcDynamicWidth() {\n    // if no title, ignore minWidth and use prefix/suffix width\n    // when the title is collapsed, width should be the same as if there is no title\n    return (!this._hasTitle && (this._hasPrefix || this._hasSuffix)) ||\n      (this._Title &&\n        !this._Title.visible &&\n        (this._hasPrefix || this._hasSuffix))\n      ? this._contentW + this._paddingX\n      : Math.max(this._contentW + this._paddingX, this.style.minWidth);\n  }\n\n  _addButtonProps(arr) {\n    const items = Array.isArray(arr) ? arr : [arr];\n    return items.map(item => ({\n      ...this._buttonProps,\n      ...item,\n      style: {\n        color: this.style.contentColor,\n        ...item.style\n      }\n    }));\n  }\n\n  _getJustify() {\n    return !!this._justify ? this._justify : this.style.justify;\n  }\n\n  get _contentProps() {\n    let mountX;\n    let x;\n\n    switch (this.justify) {\n      case 'left':\n        mountX = 0;\n        x = this._paddingLeft;\n        break;\n      case 'right':\n        mountX = 1;\n        x = this.w - this._paddingRight;\n        break;\n      case 'center':\n      default:\n        mountX = 0.5;\n        x = this.w / 2;\n        break;\n    }\n    return { mountX, x };\n  }\n\n  get _buttonProps() {\n    return {\n      centerInParent: true,\n      mode: this.mode\n    };\n  }\n\n  get _hasPrefix() {\n    return !!(this.prefix && Object.keys(this.prefix).length);\n  }\n\n  get _prefixW() {\n    return this._hasPrefix && this._Prefix !== undefined ? this._Prefix.w : 0;\n  }\n\n  get _prefixX() {\n    return 0;\n  }\n\n  get _hasTitle() {\n    return !!this.title;\n  }\n\n  get _titleW() {\n    // get the pre-calculated text width of the title to solve some race condition bugs\n    if (\n      this._hasTitle &&\n      this._Title &&\n      this._Title._Text &&\n      this._Title.visible\n    ) {\n      return this._Title.w;\n    }\n    return 0;\n  }\n\n  get _titleX() {\n    return this._hasPrefix ? this._prefixW + this.style.contentSpacing : 0;\n  }\n\n  get _hasSuffix() {\n    return !!(this.suffix && Object.keys(this.suffix).length);\n  }\n\n  get _suffixW() {\n    return this._hasSuffix && this._Suffix !== undefined ? this._Suffix.w : 0;\n  }\n\n  get _suffixX() {\n    if (this._hasTitle) {\n      return this._titleW + this._TextWrapper.x + this.style.contentSpacing;\n    } else if (this._hasPrefix) {\n      return this._prefixW + this.style.itemSpacing;\n    }\n    return 0;\n  }\n\n  get _contentW() {\n    if (this._hasSuffix) {\n      return this._suffixX + this._suffixW;\n    } else if (this._hasTitle && this._Title && this._Title.visible) {\n      return this._titleX + this._titleW;\n    } else if (this._hasPrefix) {\n      return this._prefixX + this._prefixW;\n    }\n    return 0;\n  }\n\n  get _rowProps() {\n    return {\n      type: Row,\n      mountY: 0.5,\n      autoResizeHeight: true,\n      autoResizeWidth: true\n    };\n  }\n\n  get _totalTitlePaddingX() {\n    let totalTitlePadding = 0;\n    if (this._hasPrefix) {\n      totalTitlePadding += this.style.contentSpacing;\n    }\n    if (this._hasSuffix) {\n      totalTitlePadding += this.style.contentSpacing;\n    }\n    return totalTitlePadding;\n  }\n\n  /**\n   * Button w must be >= nonTextSpace + smallest possible width of truncated\n   * text(width of the first set of characters before a space + width of TextBox.maxLinesSuffix).\n   * Disregarding this results in the contents of the button being a greater width than the\n   * fixed w of the Button(w/o decreasing _paddingX or _totalTitlePadding).\n   */\n  get _fixedWordWrapWidth() {\n    const { w, _paddingX, _prefixW, _suffixW, _totalTitlePaddingX } = this;\n    const nonTextSpace = _paddingX + _prefixW + _suffixW + _totalTitlePaddingX;\n    return Math.max(1, w - nonTextSpace);\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    // TODO - Localization?\n    // Do we need a locale file with\n    // component translations?\n    const announce = [];\n    if (this.title) {\n      announce.push(this.title);\n    }\n    announce.push(this._announceComponentName);\n    if (this._hasPrefix && this._Prefix.items.length) {\n      announce.push(...this._Prefix.items.map(item => item.announce));\n    }\n    if (this._hasSuffix && this._Suffix.items.length) {\n      announce.push(...this._Suffix.items.map(item => item.announce));\n    }\n\n    return announce;\n  }\n\n  get _announceComponentName() {\n    return Button.__componentName;\n  }\n\n  get _paddingX() {\n    return this._paddingLeft + this._paddingRight;\n  }\n\n  get _paddingLeft() {\n    return this._hasTitle ? this.style.paddingX : this.style.paddingXNoTitle;\n  }\n\n  get _paddingRight() {\n    return this._hasTitle ? this.style.paddingX : this.style.paddingXNoTitle;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getWidthByColumnSpan } from '../../utils';\n\nexport const base = theme => ({\n  minWidth: getWidthByColumnSpan(theme, 1),\n  paddingX: theme.spacer.xxl,\n  paddingXNoTitle: theme.spacer.lg,\n  paddingY: theme.spacer.lg,\n  textStyle: theme.typography.button2\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Button from './Button';\nimport * as styles from './ButtonSmall.styles';\n\nexport default class ButtonSmall extends Button {\n  static get __componentName() {\n    return 'ButtonSmall';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  height: theme.spacer.xxl * 12,\n  paddingHorizontal: theme.spacer.xl,\n  paddingVertical: theme.spacer.xl,\n  radius: theme.radius.md,\n  titleTextStyle: {\n    ...theme.typography.headline1,\n    wordWrap: true,\n    maxLines: 2,\n    textColor: theme.color.textNeutral\n  },\n  width: utils.getWidthByUpCount(theme, 6)\n});\n\nexport const mode = theme => ({\n  focused: {\n    tone: {\n      neutral: {\n        backgroundColor: theme.color.interactiveNeutralFocusSoft\n      },\n      inverse: {\n        backgroundColor: theme.color.interactiveInverseFocusSoft\n      },\n      brand: {\n        backgroundColor: theme.color.interactiveBrandFocusSoft\n      }\n    }\n  },\n  disabled: {\n    titleTextStyle: { textColor: theme.color.textNeutralDisabled }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './Card.styles';\nimport TextBox from '../TextBox';\nimport Surface from '../Surface';\n\nexport default class Card extends Surface {\n  static get __componentName() {\n    return 'Card';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'title'];\n  }\n\n  static get tags() {\n    return [...super.tags, 'Title'];\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      Title: {\n        type: TextBox,\n        signals: {\n          textBoxChanged: '_updatePositions'\n        }\n      }\n    };\n  }\n\n  _update() {\n    super._update();\n    this._updateTitle();\n    this._updatePositions();\n  }\n\n  _updatePositions() {\n    this._updateTitlePosition();\n  }\n\n  _updateTitle() {\n    this._Title.patch({\n      content: this.title,\n      style: {\n        textStyle: {\n          ...this.style.titleTextStyle,\n          wordWrapWidth: this._calculateTextWidth()\n        }\n      }\n    });\n  }\n\n  _calculateTextWidth() {\n    return this.w - this.style.paddingHorizontal * 2;\n  }\n\n  _updateTitlePosition() {\n    this._Title.x = this.style.paddingHorizontal;\n    this._Title.y = this.style.paddingVertical;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this._Title && this._Title.announce);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  // TODO radius from design or token change\n  titleTextStyle: {\n    ...theme.typography.headline3,\n    wordWrap: true,\n    maxLines: 2,\n    textColor: theme.color.textNeutral\n  },\n  descriptionTextStyle: {\n    ...theme.typography.body2,\n    textColor: theme.color.textNeutral,\n    wordWrap: true,\n    maxLines: 3\n  },\n  detailsTextStyle: {\n    ...theme.typography.body3,\n    textColor: theme.color.textNeutral,\n    wordWrap: true,\n    maxLines: 1\n  }\n});\n\nexport const mode = theme => ({\n  disabled: {\n    descriptionTextStyle: { textColor: theme.color.textNeutralDisabled },\n    detailsTextStyle: { textColor: theme.color.textNeutralDisabled }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Card from './Card';\nimport TextBox from '../TextBox';\nimport * as styles from './CardTitle.styles';\n\nexport default class CardTitle extends Card {\n  static get __componentName() {\n    return 'CardTitle';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get tags() {\n    return [...super.tags, 'Description', 'Details'];\n  }\n\n  static get properties() {\n    return [...super.properties, 'description', 'details'];\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      Description: {\n        type: TextBox,\n        signals: {\n          textBoxChanged: '_updatePositions'\n        }\n      },\n      Details: {\n        type: TextBox,\n        mountY: 1\n      }\n    };\n  }\n\n  _update() {\n    super._update();\n    this._updateDescription();\n    this._updateDetails();\n    this._updatePositions();\n  }\n\n  _updatePositions() {\n    super._updatePositions();\n    this._updateDescriptionPosition();\n    this._updateDetailsPosition();\n  }\n\n  _updateDescription() {\n    this._Description.patch({\n      content: this.description,\n      style: {\n        textStyle: {\n          ...this.style.descriptionTextStyle,\n          wordWrapWidth: this._calculateTextWidth()\n        }\n      }\n    });\n  }\n\n  _updateDescriptionPosition() {\n    this._Description.x = this.style.paddingHorizontal;\n    this._Description.y = this.style.paddingVertical + this._Title.h;\n  }\n\n  _updateDetails() {\n    this._Details.patch({\n      content: this.details,\n      style: {\n        textStyle: {\n          ...this.style.detailsTextStyle,\n          wordWrapWidth: this._calculateTextWidth()\n        }\n      }\n    });\n  }\n\n  _updateDetailsPosition() {\n    this._Details.x = this.style.paddingHorizontal;\n    this._Details.y = this.h - this.style.paddingVertical;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Title && this._Title.announce,\n        this._Description && this._Description.announce,\n        this._Details && this._Details.announce\n      ]\n    );\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  descriptionTextStyle: {\n    ...theme.typography.body2,\n    textColor: theme.color.textNeutralSecondary,\n    wordWrap: true,\n    maxLines: 8\n  },\n  height: theme.spacer.xxxl * 15,\n  subtitleTextStyle: {\n    ...theme.typography.body3,\n    maxLines: 2,\n    textColor: theme.color.textNeutral,\n    wordWrap: true\n  },\n  width: utils.getWidthByColumnSpan(theme, 4)\n});\n\nexport const mode = theme => ({\n  disabled: {\n    descriptionTextStyle: { textColor: theme.color.textNeutralDisabled },\n    subtitleTextStyle: { textColor: theme.color.textNeutralDisabled }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const size = theme.spacer.xxl;\n  return {\n    alpha: theme.alpha.primary,\n    width: size,\n    height: size,\n    knobHeight: size / 2,\n    knobWidth: size / 2,\n    radius: size / 2,\n    strokeWidth: theme.stroke.sm\n  };\n};\n\nexport const tone = theme => ({\n  neutral: {\n    backgroundColor: theme.color.fillInverseSecondary,\n    backgroundColorChecked: theme.color.fillNeutral,\n    knobColor: theme.color.fillInverse,\n    strokeColor: theme.color.strokeNeutralSecondary\n  },\n  inverse: {\n    backgroundColor: theme.color.fillNeutralSecondary,\n    backgroundColorChecked: theme.color.fillInverse,\n    knobColor: theme.color.fillNeutral,\n    strokeColor: theme.color.strokeInverseSecondary\n  },\n  brand: {\n    backgroundColor: theme.color.fillNeutralSecondary,\n    backgroundColorChecked: theme.color.fillBrand,\n    knobColor: theme.color.fillInverse,\n    strokeColor: theme.color.strokeNeutralSecondary\n  }\n});\n\nexport const mode = theme => ({\n  disabled: { alpha: theme.alpha.inactive }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport lng from '@lightningjs/core';\nimport * as styles from './Radio.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Radio extends Base {\n  static get __componentName() {\n    return 'Radio';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    const center = { mount: 0.5, x: w => w / 2, y: h => h / 2 };\n    return {\n      Body: {\n        rtt: true, // ensures the background color doesn't bleed into the knob when disabled\n        ...center,\n        Knob: {\n          ...center,\n          alpha: 0\n        }\n      },\n      Stroke: center\n    };\n  }\n\n  static get tags() {\n    return ['Knob', 'Body', 'Stroke'];\n  }\n  static get properties() {\n    return ['checked'];\n  }\n\n  _update() {\n    this._updateBody();\n    this._updateStroke();\n    this._updateKnob();\n    if (this._checkedChanged) {\n      this.fireAncestors('$announce', this.announce);\n      this._checkedChanged = false;\n    }\n    this._updateOpacity();\n  }\n\n  _updateBody() {\n    const bodyColor = this.checked\n      ? this.style.backgroundColorChecked\n      : this.style.backgroundColor;\n\n    const width = this.w - this.style.strokeWidth * 2 - 2;\n    const height = this.h - this.style.strokeWidth * 2 - 2;\n\n    this._Body.patch({\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        width,\n        height,\n        getMaxRoundRadius(\n          this.style.radius,\n          width,\n          height,\n          this.style.strokeWidth * 2 - 2\n        ),\n        null,\n        null,\n        true,\n        bodyColor\n      )\n    });\n  }\n\n  _updateStroke() {\n    this._Stroke.patch({\n      // Compensating for the extra 2 pixels getRoundRect adds\n      texture: lng.Tools.getRoundRect(\n        this.w - 2,\n        this.h - 2,\n        getMaxRoundRadius(this.style.radius, this.w, this.h),\n        this.style.strokeWidth,\n        this.style.strokeColor,\n        false\n      )\n    });\n  }\n\n  _updateKnob() {\n    this._Knob.patch({\n      texture: lng.Tools.getRoundRect(\n        this.style.knobWidth,\n        this.style.knobHeight,\n        this.style.knobWidth / 2,\n        null,\n        null,\n        true,\n        this.style.knobColor\n      )\n    });\n\n    this.applySmooth(this._Knob, {\n      alpha: this.checked ? 1 : 0\n    });\n  }\n\n  _updateOpacity() {\n    this.applySmooth(this, { alpha: this.style.alpha });\n  }\n\n  _setChecked(checked) {\n    this._checkedChanged = checked !== this._checked;\n    return checked;\n  }\n\n  toggle() {\n    if (!this._isDisabledMode) {\n      this.checked = !this.checked;\n    }\n    return this;\n  }\n\n  _handleEnter() {\n    if (typeof this.onEnter === 'function') {\n      return this.onEnter(this);\n    } else {\n      this.toggle();\n    }\n    return false;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this.checked ? 'Checked' : 'Unchecked');\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const size = theme.spacer.xl;\n  return {\n    width: size,\n    height: size,\n    knobHeight: size / 2,\n    knobWidth: size / 2,\n    radius: size / 2\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Radio from './Radio';\nimport * as styles from './RadioSmall.styles';\n\nexport default class RadioSmall extends Radio {\n  static get __componentName() {\n    return 'RadioSmall';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport CardTitle from './CardTitle';\nimport TextBox from '../TextBox';\nimport * as styles from './CardRadio.styles';\nimport Radio from '../Radio';\n\nexport default class CardRadio extends CardTitle {\n  static get __componentName() {\n    return 'CardRadio';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'radio', 'subtitle'];\n  }\n\n  static get tags() {\n    return [...super.tags, 'Radio', 'Subtitle'];\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      Subtitle: {\n        type: TextBox,\n        signals: {\n          textBoxChanged: '_updatePositions'\n        }\n      }\n    };\n  }\n\n  _update() {\n    super._update();\n    this._updateRadio();\n    this._updateSubtitle();\n    this._updatePositions();\n  }\n\n  _updatePositions() {\n    super._updatePositions();\n    this._updateSubtitlePosition();\n  }\n\n  _updateSubtitle() {\n    this._Subtitle.patch({\n      content: this.subtitle,\n      style: {\n        textStyle: {\n          ...this.style.subtitleTextStyle,\n          wordWrapWidth: this._calculateTextWidth()\n        }\n      }\n    });\n  }\n\n  _updateRadio() {\n    const radioPatch = {\n      ...this.radio,\n      mode: this.mode,\n      mountX: 1,\n      x: this.w - this.style.paddingHorizontal,\n      y: this.style.paddingVertical\n    };\n\n    if (!this._Radio) {\n      radioPatch.type = Radio;\n    }\n    this.patch({ Radio: radioPatch });\n  }\n\n  _updateSubtitlePosition() {\n    this._Subtitle.x = this.style.paddingHorizontal;\n    this._Subtitle.y = this.style.paddingVertical + this._Title.h;\n  }\n\n  _updateDescriptionPosition() {\n    this._Description.x = this.style.paddingHorizontal;\n    this._Description.y =\n      this.style.paddingVertical * 2 + this._Title.h + this._Subtitle.h;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Title && this._Title.announce,\n        this._Subtitle && this._Subtitle.announce,\n        this._Description && this._Description.announce,\n        this._Details && this._Details.announce\n      ]\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  height: theme.spacer.xxl * 5,\n  iconWidth: theme.spacer.xxl,\n  iconHeight: theme.spacer.xxl,\n  width: utils.getWidthByColumnSpan(theme, 3)\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Card from './Card';\nimport Icon from '../Icon';\nimport * as styles from './CardSection.styles';\n\nexport default class CardSection extends Card {\n  static get __componentName() {\n    return 'CardSection';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get tags() {\n    return [...super.tags, 'Icon'];\n  }\n\n  static get properties() {\n    return [...super.properties, 'iconWidth', 'iconHeight', 'iconSrc'];\n  }\n\n  _update() {\n    super._update();\n    this._updateIcon();\n  }\n\n  _updateIcon() {\n    const { iconWidth, iconHeight } = this.style;\n    const iconObject = {\n      w: iconWidth,\n      h: iconHeight,\n      icon: this.iconSrc,\n      x: this.w - iconWidth - this.style.paddingHorizontal,\n      y:\n        (this._Title.style.textStyle.lineHeight - iconHeight) / 2 +\n        this.style.paddingVertical\n    };\n    if (!this._Icon) {\n      iconObject.type = Icon;\n    }\n    this.patch({ Icon: iconObject });\n  }\n\n  _calculateTextWidth() {\n    const textWidth = this.w - this.style.paddingHorizontal * 2;\n    return this.iconSrc ? textWidth - this.iconWidth : textWidth;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const strokeWidth = theme.stroke.sm;\n  const size = theme.spacer.xxl;\n  return {\n    alpha: theme.alpha.primary,\n    width: size,\n    height: size,\n    iconWidth: theme.spacer.lg,\n    iconHeight: theme.spacer.lg,\n    icon: theme.asset.check,\n    radius: theme.radius.xs,\n    strokeWidth\n  };\n};\n\nexport const tone = theme => ({\n  neutral: {\n    strokeColor: theme.color.strokeNeutralSecondary,\n    checkColor: theme.color.fillInverse,\n    backgroundColor: theme.color.fillInverseSecondary,\n    backgroundColorChecked: theme.color.fillNeutral\n  },\n  inverse: {\n    strokeColor: theme.color.strokeInverseSecondary,\n    checkColor: theme.color.fillNeutral,\n    backgroundColor: theme.color.fillNeutralSecondary,\n    backgroundColorChecked: theme.color.fillInverse\n  },\n  brand: {\n    strokeColor: theme.color.strokeNeutralSecondary,\n    checkColor: theme.color.fillInverse,\n    backgroundColor: theme.color.fillNeutralSecondary,\n    backgroundColorChecked: theme.color.fillBrand\n  }\n});\n\nexport const mode = theme => ({\n  disabled: { alpha: theme.alpha.inactive }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Icon from '../Icon';\nimport Base from '../Base';\nimport * as styles from './Checkbox.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Checkbox extends Base {\n  static get __componentName() {\n    return 'Checkbox';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    const center = { mount: 0.5, x: w => w / 2, y: h => h / 2 };\n    return {\n      Body: {\n        rtt: true, // ensures the background color doesn't bleed into the checkbox icon when disabled\n        ...center,\n        Check: {\n          type: Icon,\n          ...center,\n          alpha: 0\n        }\n      },\n      Stroke: center\n    };\n  }\n\n  static get tags() {\n    return ['Check', 'Body', 'Stroke'];\n  }\n\n  static get properties() {\n    return ['checked'];\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'checkSrc', curr: 'icon' },\n      { prev: 'checkH', curr: 'iconHeight' },\n      { prev: 'checkW', curr: 'iconWidth' },\n      { prev: 'checkHeight', curr: 'iconHeight' },\n      { prev: 'checkWidth', curr: 'iconWidth' }\n    ];\n  }\n\n  _update() {\n    this._updateBody();\n    this._updateStroke();\n    this._updateCheck();\n    if (this._checkedChanged) {\n      this.fireAncestors('$announce', this.announce);\n      this._checkedChanged = false;\n    }\n    this._updateOpacity();\n  }\n\n  _updateCheck() {\n    this._Check.patch({\n      w: this.style.iconWidth,\n      h: this.style.iconHeight,\n      icon: this.style.icon,\n      style: { color: this.style.checkColor }\n    });\n\n    const alphaPatch = {\n      alpha: this.checked ? 1 : 0\n    };\n\n    this.applySmooth(this._Check, alphaPatch);\n  }\n\n  _updateBody() {\n    const bodyColor = this.checked\n      ? this.style.backgroundColorChecked\n      : this.style.backgroundColor;\n\n    const width = this.w - this.style.strokeWidth * 2 - 2;\n    const height = this.h - this.style.strokeWidth * 2 - 2;\n\n    this._Body.patch({\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        width,\n        height,\n        getMaxRoundRadius(\n          this.style.radius,\n          width,\n          height,\n          this.style.strokeWidth * 2 - 2\n        ),\n        0,\n        null,\n        true,\n        bodyColor\n      )\n    });\n  }\n\n  _updateStroke() {\n    this._Stroke.patch({\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        this.w - 2,\n        this.h - 2,\n        getMaxRoundRadius(this.style.radius, this.w - 2, this.h - 2),\n        this.style.strokeWidth,\n        this.style.strokeColor,\n        false\n      )\n    });\n  }\n\n  _updateOpacity() {\n    this.applySmooth(this, { alpha: this.style.alpha });\n  }\n\n  _setChecked(checked) {\n    this._checkedChanged = checked !== this._checked;\n    return checked;\n  }\n\n  toggle() {\n    if (!this._isDisabledMode) {\n      this.checked = !this.checked;\n    }\n    return this;\n  }\n\n  _handleEnter() {\n    if (typeof this.onEnter === 'function') {\n      return this.onEnter(this);\n    } else {\n      this.toggle();\n    }\n    return false;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this.checked ? 'Checked' : 'Unchecked');\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  radius: [\n    theme.radius.md,\n    theme.radius.md,\n    theme.radius.md,\n    theme.radius.none\n  ],\n  paddingX: theme.spacer.lg,\n  paddingY: theme.spacer.md,\n  offsetY: theme.spacer.xxs,\n  textStyle: theme.typography.caption1\n});\n\nexport const tone = theme => ({\n  neutral: {\n    textStyle: { textColor: theme.color.textInverse },\n    backgroundColor: theme.color.fillNeutral\n  },\n  inverse: {\n    textStyle: { textColor: theme.color.textNeutral },\n    backgroundColor: theme.color.fillInverse\n  },\n  brand: {\n    textStyle: { textColor: theme.color.textNeutral },\n    backgroundColor: theme.color.fillBrand\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './Label.styles';\n\nexport default class Label extends Base {\n  static _template() {\n    return {\n      Background: {},\n      Text: {\n        mountY: 0.5,\n        mountX: 0.5,\n        text: {}\n      }\n    };\n  }\n\n  static get __componentName() {\n    return 'Label';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return ['title'];\n  }\n\n  static get tags() {\n    return ['Background', 'Text'];\n  }\n\n  _init() {\n    this._Text.on('txLoaded', this._updateBackground.bind(this));\n    super._init();\n  }\n\n  _update() {\n    this._updateBackground();\n    this._updateText();\n  }\n\n  _updateText() {\n    if (this._Text) {\n      this._Text.patch({\n        text: {\n          ...this.style.textStyle,\n          text: this.title\n        }\n      });\n    }\n  }\n\n  _updateBackground() {\n    this._Text.x = this.w / 2;\n    this._Text.y = this.h / 2 + this.style.offsetY;\n\n    this.h = !this.title\n      ? 0\n      : this._Text.renderHeight + 2 * this.style.paddingY;\n    this.w = !this.title ? 0 : this._Text.renderWidth + 2 * this.style.paddingX;\n\n    this._Background.patch({\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra two pixels getRoundRect adds.\n        this.w - 2,\n        this.h - 2,\n        this.style.radius,\n        0,\n        null,\n        true,\n        this.style.backgroundColor\n      )\n    });\n    this.signal('loadedLabel', this);\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this._Text && this._Text.text.text);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport logger from '../../globals/context/logger';\n/**\n * apply to a component to synchronize the marquee scroll\n * timing of child TextBox components. Target class must\n * have a `get syncArray` property, which contains an\n * array of the tags of all TextBoxes to be synchronized.\n *\n * @param {*} Base class to be extended\n * @returns class with marquee sync functionality\n */\nexport default function withMarqueeSync(Base) {\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _init() {\n      // use _init instead of _construct to ensure elements exist before running setup\n      super._init();\n      if (this._shouldSync) {\n        this._updateSignals();\n      }\n    }\n\n    _update() {\n      super._update();\n      if (this._shouldSync) {\n        this._updateSignals();\n      } else {\n        this._cleanupSyncValues();\n      }\n    }\n\n    _cleanupSyncValues() {\n      this.syncArray.map(component => {\n        component.marqueeOverrideLoopX = undefined;\n        component.signals &&\n          component.signals.willMarquee &&\n          delete component.signals.willMarquee;\n      });\n    }\n\n    _updateSignals() {\n      if (this.syncArray) {\n        this.syncArray.map(component => {\n          // preserve signals set in Base class\n          component.signals = {\n            ...component.signals,\n            willMarquee: '_willMarquee'\n          };\n        });\n      }\n    }\n\n    _willMarquee(compRef) {\n      if (this._shouldSync) {\n        this._longestMarqueeWidth = Math.max(\n          compRef._textRenderedW || 0,\n          this._longestMarqueeWidth || 0\n        );\n        this.syncArray.map(component => {\n          component.marqueeOverrideLoopX = this._longestMarqueeWidth;\n        });\n      }\n    }\n\n    get _shouldSync() {\n      if (this.style.marqueeSync === false) {\n        // only fail this case if explicitly false\n        return false;\n      }\n      if (!this.syncArray) {\n        logger.warn(\n          'warning: components using MarqueeSync must have a syncArray getter defined.'\n        );\n        return false;\n      } else if (!Array.isArray(this.syncArray)) {\n        logger.warn('warning: syncArray must be typeof array.');\n        return false;\n      } else if (this.syncArray.length < 2) {\n        logger.warn(\n          'warning: syncArray must contain at least two component references.'\n        );\n        return false;\n      } else {\n        return true;\n      }\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  descriptionTextStyle: { ...theme.typography.body2, maxLines: 1 },\n  fadeWidth: 100,\n  logoWidth: theme.typography.body3.lineHeight,\n  logoHeight: theme.typography.body3.lineHeight,\n  logoPadding: theme.spacer.lg,\n  detailsTextStyle: theme.typography.body3,\n  subtitleTextStyle: theme.typography.body3,\n  titleTextStyle: { ...theme.typography.headline1, maxLines: 1 },\n  marqueeSync: true,\n  alpha: theme.alpha.primary\n});\n\nexport const mode = theme => ({\n  disabled: {\n    detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n    alpha: theme.alpha.inactive\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    titleTextStyle: { textColor: theme.color.textNeutral },\n    subtitleTextStyle: { textColor: theme.color.textNeutralSecondary },\n    detailsTextStyle: { textColor: theme.color.textNeutral },\n    descriptionTextStyle: { textColor: theme.color.textNeutralSecondary },\n    mode: {\n      disabled: {\n        titleTextStyle: { textColor: theme.color.textNeutralDisabled },\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  },\n  inverse: {\n    titleTextStyle: { textColor: theme.color.textInverse },\n    subtitleTextStyle: { textColor: theme.color.textInverseSecondary },\n    detailsTextStyle: { textColor: theme.color.textInverse },\n    descriptionTextStyle: { textColor: theme.color.textInverseSecondary },\n    mode: {\n      disabled: {\n        titleTextStyle: { textColor: theme.color.textNeutralDisabled },\n        subtitleTextStyle: { textColor: theme.color.textNeutralDisabled },\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  },\n  brand: {\n    titleTextStyle: { textColor: theme.color.textNeutral },\n    subtitleTextStyle: { textColor: theme.color.textNeutralSecondary },\n    detailsTextStyle: { textColor: theme.color.textNeutral },\n    descriptionTextStyle: { textColor: theme.color.textNeutralSecondary },\n    mode: {\n      disabled: {\n        titleTextStyle: { textColor: theme.color.textNeutralDisabled },\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport Icon from '../Icon';\nimport TextBox from '../TextBox';\nimport FadeShader from '../../shaders/FadeShader';\nimport withMarqueeSync from '../../mixins/withMarqueeSync';\nimport * as styles from './MetadataBase.styles';\n\nclass MetadataBase extends Base {\n  static get __componentName() {\n    return 'MetadataBase';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    // Comments indicate where child components are inserted\n    return {\n      Text: {\n        flex: { direction: 'column', justifyContent: 'flex-start' },\n        // Title: {},\n        // Subtitle: {},\n        DetailsWrapper: {\n          // Details: {}\n        }\n        // Description: {}\n      }\n      // Logo: {\n      //   flexItem: false,\n      //   type: Icon\n      // }\n    };\n  }\n\n  static get properties() {\n    return [\n      'description',\n      'logo',\n      'logoHeight',\n      'logoPosition',\n      'logoTitle',\n      'logoWidth',\n      'details',\n      'subtitle',\n      'title',\n      'marquee'\n    ];\n  }\n\n  static get tags() {\n    return [\n      'Text',\n      {\n        name: 'Title',\n        path: 'Text.Title'\n      },\n      {\n        name: 'Subtitle',\n        path: 'Text.Subtitle'\n      },\n      {\n        name: 'DetailsWrapper',\n        path: 'Text.DetailsWrapper'\n      },\n      {\n        name: 'Details',\n        path: 'Text.DetailsWrapper.Details'\n      },\n      {\n        name: 'Description',\n        path: 'Text.Description'\n      },\n      'Logo'\n    ];\n  }\n\n  _titleLoaded() {\n    this._updateLayout();\n  }\n\n  _subtitleLoaded() {\n    this._updateLayout();\n  }\n\n  _detailsLoaded({ w, h }) {\n    this._updateDetailsLayout({ w, h });\n    this._updateLayout();\n  }\n\n  _descriptionLoaded() {\n    this._updateLayout();\n  }\n\n  _updateDetailsLayout({ w, h }) {\n    if (!this.details && !this._Details) {\n      return;\n    }\n\n    if (this._DetailsWrapper) {\n      this._DetailsWrapper.alpha = this.style.alpha;\n      this._DetailsWrapper.w = w;\n      this._DetailsWrapper.h = h;\n    }\n  }\n\n  _update() {\n    this._updateLines();\n    this._updateLayout();\n  }\n\n  _updateLines() {\n    this._Text.w = this._textW();\n    this._updateTitle();\n    this._updateSubtitle();\n    this._updateDetails();\n    this._updateDescription();\n  }\n\n  _updateLayout() {\n    this._Text.h = this._textH();\n    this._updateMetadataHeight();\n    this._updatePositions();\n    this._updateLogo();\n  }\n\n  _updatePositions() {\n    this._Text.x =\n      this.logo && this.logoPosition === 'left'\n        ? this.logoWidth + this.style.logoPadding\n        : 0;\n    this._Text.y = (this.h - this._Text.h) / 2;\n  }\n\n  _updateMetadataHeight() {\n    const newH = Math.max(this.logoHeight, this._Text.h);\n    if (this.h !== newH) {\n      this.h = newH;\n      this.signal('updateComponentDimensions');\n    }\n  }\n\n  _updateTitle() {\n    if (!this.title && !this._Title) {\n      return;\n    }\n\n    if (!this._Title) {\n      this._Text.childList.addAt(\n        {\n          ref: 'Title',\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_titleLoaded'\n          }\n        },\n        0\n      );\n    }\n    this._Title.patch({\n      content: this.title,\n      marquee: this.marquee,\n      style: {\n        textStyle: {\n          ...this.style.titleTextStyle,\n          maxLines: 1,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      }\n    });\n  }\n\n  _updateSubtitle() {\n    if (!this.subtitle && !this._Subtitle) {\n      return;\n    }\n\n    if (!this._Subtitle) {\n      this._Text.childList.addAt(\n        {\n          ref: 'Subtitle',\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_subtitleLoaded'\n          }\n        },\n        1\n      );\n    }\n\n    this._Subtitle.patch({\n      content: this.subtitle,\n      marquee: this.marquee,\n      style: {\n        textStyle: {\n          ...this.style.subtitleTextStyle,\n          maxLines: 1,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      }\n    });\n  }\n\n  resetMarquee() {\n    if (this.marquee) {\n      if (this.title) {\n        if (!this._Title) {\n          this._updateTitle();\n        }\n        this._Title.toggleMarquee();\n      }\n      if (this.description) {\n        if (!this._Description) {\n          this._updateDescription();\n        }\n        this._Description.toggleMarquee();\n      }\n    }\n  }\n\n  _updateDetails() {\n    if (!this.details && !this._Details) {\n      return;\n    }\n\n    if (!this._Details) {\n      this._DetailsWrapper.patch({\n        Details: {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_detailsLoaded'\n          }\n        }\n      });\n    }\n\n    this._Details.patch({\n      content: this.details,\n      style: { textStyle: this.style.detailsTextStyle }\n    });\n\n    if (this._Details.finalW > this._textW()) {\n      this._Details.patch({\n        w: this._textW() + this.style.fadeWidth / 2,\n        shader: {\n          type: FadeShader,\n          positionLeft: 0,\n          positionRight: this.style.fadeWidth\n        },\n        rtt: true\n      });\n    } else {\n      this._DetailsWrapper.shader = undefined;\n    }\n    this._DetailsWrapper.visible = this.details ? true : false;\n    this._DetailsWrapper.alpha = this.style.alpha;\n  }\n\n  _updateDescription() {\n    if (!this.description && !this._Description) {\n      return;\n    }\n\n    if (!this._Description) {\n      this._Text.childList.add({\n        ref: 'Description',\n        type: TextBox,\n        signals: {\n          textBoxChanged: '_descriptionLoaded'\n        }\n      });\n    }\n\n    this._Description.patch({\n      content: this.description,\n      marquee: this.marquee,\n      style: {\n        textStyle: {\n          ...this.style.descriptionTextStyle,\n          maxLines: 1,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      }\n    });\n  }\n\n  _updateLogo() {\n    if (!this.logo && !this._Logo) {\n      return;\n    }\n\n    if (!this._Logo) {\n      this.patch({\n        Logo: {\n          flexItem: false,\n          type: Icon\n        }\n      });\n    }\n\n    this.logoPosition = this.logoPosition || 'right';\n    const subtitleH =\n      (this.subtitle && this._Subtitle && this._Subtitle.h) || 0;\n    this._Logo.patch({\n      w: this.logoWidth,\n      h: this.logoHeight,\n      icon: this.logo,\n      alpha: this.style.alpha\n    });\n\n    this._Logo.x = this.logoPosition === 'left' ? 0 : this.w - this._Logo.w;\n    this._Logo.y = (this.h - this.logoHeight + subtitleH) / 2;\n  }\n\n  _textW() {\n    return this.w - (this.logo ? this.logoWidth + this.style.logoPadding : 0);\n  }\n\n  _textH() {\n    const titleH = (this.title && this._Title && this._Title.h) || 0;\n    const subtitleH =\n      (this.subtitle && this._Subtitle && this._Subtitle.h) || 0;\n    const detailsH =\n      (this.details && this._DetailsWrapper && this._DetailsWrapper.h) || 0;\n    const descriptionH =\n      (this.description && this._Description && this._Description.h) || 0;\n    return titleH + subtitleH + detailsH + descriptionH;\n  }\n\n  _getLogoWidth() {\n    return this._logoWidth !== undefined\n      ? this._logoWidth\n      : this.style.logoWidth;\n  }\n\n  _setLogoWidth(w) {\n    return w !== undefined ? w : this.logoWidth;\n  }\n\n  _getLogoHeight() {\n    return this._logoHeight !== undefined\n      ? this._logoHeight\n      : this.style.logoHeight;\n  }\n\n  _setLogoHeight(h) {\n    return h !== undefined ? h : this.logoHeight;\n  }\n\n  get syncArray() {\n    return [\n      ...(this._Title ? [this._Title] : []),\n      ...(this._Subtitle ? [this._Subtitle] : []),\n      ...(this._Description ? [this._Description] : []),\n      ...(this._Details ? [this._Details] : [])\n    ];\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Title && this._Title.announce,\n        this._Subtitle && this._Subtitle.announce,\n        this._Details && this._Details.announce,\n        this._Description && this._Description.announce,\n        this.logoTitle\n      ]\n    );\n  }\n}\n\nexport default withMarqueeSync(MetadataBase);\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  titleTextStyle: theme.typography.headline3,\n  descriptionTextStyle: theme.typography.body3\n});\n\nexport const tone = theme => ({\n  neutral: {\n    detailsTextStyle: { textColor: theme.color.textNeutralSecondary },\n    descriptionTextStyle: { textColor: theme.color.textNeutral },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  },\n  inverse: {\n    detailsTextStyle: { textColor: theme.color.textInverseSecondary },\n    descriptionTextStyle: { textColor: theme.color.textInverse },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  },\n  brand: {\n    detailsTextStyle: { textColor: theme.color.textNeutralSecondary },\n    descriptionTextStyle: { textColor: theme.color.textNeutral },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport MetadataBase from '../MetadataBase';\nimport * as styles from './MetadataTile.styles';\n\nexport default class MetadataTile extends MetadataBase {\n  static get __componentName() {\n    return 'MetadataTile';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _updateDetails() {\n    if (!this.details && !this._Details) {\n      return;\n    }\n    if (this.description && this._Details) {\n      this._Details.patch({ content: '' });\n      this._Details.alpha = 0;\n      this._Details.visible = false;\n    } else {\n      super._updateDetails();\n    }\n  }\n\n  _updateDetailsLayout({ h }) {\n    if (!this.details && !this._Details) {\n      return;\n    }\n    if (this._Details && !this.description) {\n      this._DetailsWrapper.h = h;\n      this._DetailsWrapper.alpha = this.style.alpha;\n    } else {\n      this._DetailsWrapper.h = 0;\n    }\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Title && this._Title.announce,\n        (this._Details && this._Details.announce) ||\n          (this._Description && this._Description.announce),\n        this.logoTitle\n      ]\n    );\n  }\n\n  _textH() {\n    const titleH = (this.title && this._Title && this._Title.h) || 0;\n    const detailsH =\n      (this.details &&\n        this._Details &&\n        this._Details.visible &&\n        this._DetailsWrapper.h) ||\n      0;\n    const descriptionH =\n      (this.description && this._Description && this._Description.h) || 0;\n    return titleH + detailsH + descriptionH;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  height: theme.spacer.md,\n  animation: theme.animation.utility,\n  radius: theme.radius.xs\n});\n\nexport const tone = theme => ({\n  neutral: {\n    barColor: theme.color.fillNeutralTertiary,\n    progressColor: theme.color.fillNeutral\n  },\n  inverse: {\n    barColor: theme.color.fillInverseTertiary,\n    progressColor: theme.color.fillInverse\n  },\n  brand: {\n    barColor: theme.color.fillNeutralTertiary,\n    progressColor: theme.color.fillBrand\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './ProgressBar.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class ProgressBar extends Base {\n  static _template() {\n    return {\n      Bar: { zIndex: 1 },\n      Progress: { alpha: 0, zIndex: 2 }\n    };\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get __componentName() {\n    return 'ProgressBar';\n  }\n\n  static get properties() {\n    return ['progress'];\n  }\n\n  static get tags() {\n    return ['Bar', 'Progress'];\n  }\n\n  _construct() {\n    super._construct && super._construct();\n    this._progress = 0;\n  }\n\n  _update() {\n    this._updateTextures();\n    this._updateProgress();\n    if (this._progressChanged) {\n      this.fireAncestors('$announce', this.announce);\n      this._progressChanged = false;\n    }\n  }\n\n  _updateTextures() {\n    const w = this._getProgressWidth();\n\n    const radius = getMaxRoundRadius(this.style.radius, this.w - 2, this.h);\n\n    this._Bar.texture = lng.Tools.getRoundRect(\n      // getRoundRect adds 2 to the width\n      this.w - 2,\n      this.h,\n      radius,\n      0,\n      0,\n      true,\n      this.style.barColor\n    );\n\n    this._Progress.texture = lng.Tools.getRoundRect(\n      w + 1,\n      this.h,\n      radius,\n      0,\n      0,\n      true,\n      this.style.progressColor\n    );\n  }\n\n  _updateProgress() {\n    const w = this._getProgressWidth();\n\n    this._Progress.smooth = {\n      w: [w, this.style.animation],\n      alpha: Number(w > 0)\n    };\n  }\n\n  _setProgress(progress) {\n    this._progressChanged = progress !== this._progress;\n    return progress;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce !== undefined && this._announce !== null) {\n      return this._announce;\n    }\n\n    let progress = this.progress;\n    if (progress > 1) {\n      progress = 1;\n    } else if (progress < 0) {\n      progress = 0;\n    }\n    return `${Math.round(progress * 100)}%`;\n  }\n\n  _getProgressWidth() {\n    const p = this.w * this._progress;\n    const w = p <= 0 ? 0 : Math.min(p, this.w);\n    return w;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  animationEntrance: theme.animation.standardEntrance,\n  animationExit: theme.animation.standardExit,\n  logoWidth: theme.spacer.lg * 5,\n  logoHeight: theme.spacer.xxl + theme.spacer.md,\n  metadataLocation: 'standard',\n  paddingX: theme.spacer.xl,\n  paddingY: theme.spacer.lg,\n  paddingYProgress: theme.spacer.xl,\n  paddingYBetweenContent: theme.spacer.md,\n  radius: theme.radius.md,\n  alpha: theme.alpha.primary\n});\n\nexport const tone = theme => ({\n  neutral: {\n    mode: {\n      focused: {\n        backgroundColor: theme.color.interactiveNeutralFocusSoft\n      }\n    }\n  },\n  inverse: {\n    mode: {\n      focused: {\n        backgroundColor: theme.color.interactiveInverseFocusSoft\n      }\n    }\n  },\n  brand: {\n    mode: {\n      focused: {\n        backgroundColor: theme.color.interactiveBrandFocusSoft\n      }\n    }\n  }\n});\n\nexport const mode = theme => ({\n  disabled: {\n    alpha: theme.alpha.inactive\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Artwork from '../Artwork';\nimport Badge from '../Badge';\nimport Checkbox from '../Checkbox';\nimport Label from '../Label';\nimport MetadataTile from '../MetadataTile';\nimport ProgressBar from '../ProgressBar';\nimport * as styles from './Tile.styles';\nimport Surface from '../Surface';\nimport Icon from '../Icon';\n\nexport default class Tile extends Surface {\n  static get __componentName() {\n    return 'Tile';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(), // Make sure surface elements are patched\n      Tile: {\n        Artwork: {\n          type: Artwork,\n          signals: {\n            imageLoaded: '_imageLoaded'\n          },\n          mount: 0.5\n        },\n        Content: {\n          mount: 0.5\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return [\n      'artwork',\n      'badge',\n      'checkbox',\n      'circle',\n      'label',\n      'logo',\n      'metadata',\n      'metadataLocation',\n      'persistentMetadata',\n      'progressBar',\n      'src'\n    ];\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'iconHeight', curr: 'logoHeight' },\n      { prev: 'iconWidth', curr: 'logoWidth' }\n    ];\n  }\n\n  static get aliasProperties() {\n    return [{ prev: 'iconSrc', curr: 'logo' }];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      'Artwork',\n      'Content',\n      'Tile',\n      { name: 'Badge', path: 'Content.Badge' },\n      { name: 'Checkbox', path: 'Content.Checkbox' },\n      { name: 'Logo', path: 'Content.Logo' },\n      { name: 'Metadata', path: 'Content.Metadata' },\n      { name: 'ProgressBar', path: 'Content.ProgressBar' },\n      { name: 'Label', path: 'Content.Label' }\n    ];\n  }\n\n  /**\n   * When metadata is displayed below the Tile we need a way to tell the containing columns that it exists\n   * in order for it to layout properly. This approach will not however show up in the DOM inspector\n   */\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Metadata && this._Metadata.announce,\n        this._Badge && this._Badge.announce,\n        this._Label && this._Label.announce,\n        this._ProgressBar && this._ProgressBar.announce\n      ]\n    );\n  }\n\n  _update() {\n    super._update();\n    this._updateTileColor();\n    this._updateContent();\n    this._updateArtwork();\n    this._updateBadge();\n    this._updateLabel();\n    this._updateCheckbox();\n    this._updateProgressBar();\n    this._updateMetadata();\n    this._updateLogo();\n  }\n\n  /* ------------------------------ Tile ------------------------------ */\n\n  _getRenderHeight() {\n    // if there is Metadata below the Tile, override _getRenderHeight\n    // in order to return the fully calculated height,\n    // not the height stored in \"_h\" for just the tile image\n    return !this._isInsetMetadata\n      ? this._h + (this._Metadata?.h + this.style.paddingY || 0)\n      : super._getRenderHeight();\n  }\n\n  get innerH() {\n    return this._h; // Ensure that surface respects the correct height when metadata is displayed below\n  }\n\n  get _shouldShowGradient() {\n    return Boolean(\n      ((this._isInsetMetadata &&\n        this._hasMetadata &&\n        this._shouldShowMetadata) ||\n        this.progressBar?.progress > 0 ||\n        this._shouldShowLogo) &&\n        !this._isCircleLayout\n    );\n  }\n\n  get _isCircleLayout() {\n    return Boolean(this._itemLayout && this._itemLayout.circle);\n  }\n\n  get _foregroundDefaultWidth() {\n    return parseFloat(this._w / this._h).toFixed(2) ===\n      parseFloat(16 / 9).toFixed(2)\n      ? this.innerW * 0.5\n      : this.innerW * 0.75;\n  }\n\n  _updateTileColor() {\n    this._Tile.alpha = this.style.alpha;\n  }\n\n  _updateContent() {\n    const itemContainerPatch = {\n      h: this._h,\n      w: this._w,\n      x: this._w / 2,\n      y: this._h / 2\n    };\n\n    // Make sure container animates with same values as badge, label, and metadata\n    this.applySmooth(\n      this._Content,\n      itemContainerPatch,\n      Object.keys(itemContainerPatch).reduce((acc, prop) => {\n        acc[prop] = [\n          itemContainerPatch[prop],\n          this._isFocusedMode\n            ? this.style.animationEntrance\n            : this.style.animationExit\n        ];\n        return acc;\n      }, {})\n    );\n  }\n\n  /* ------------------------------ Logo ------------------------------ */\n\n  _updateLogo() {\n    if (!this.logo) {\n      this.patch({ Logo: undefined });\n      return;\n    }\n    const logoObject = {\n      w: this.style.logoWidth,\n      h: this.style.logoHeight,\n      icon: this.logo,\n      alpha: this._shouldShowLogo ? this.style.alpha : 0.001,\n      x: this.style.paddingX,\n      y: this._calculateLogoYPosition()\n    };\n    if (!this._Logo) {\n      this.patch({\n        Logo: {\n          type: Icon,\n          mountY: 1,\n          ...logoObject\n        }\n      });\n    } else {\n      this.applySmooth(this._Logo, logoObject);\n    }\n  }\n\n  _calculateLogoYPosition() {\n    if (this._isInsetMetadata && this._Metadata) {\n      return this._metadataY - this._Metadata.h;\n    }\n    return this._progressBarY\n      ? this._progressBarY - this.style.paddingYBetweenContent\n      : this._h - this.style.paddingY;\n  }\n\n  get _shouldShowLogo() {\n    return this.logo && (this.persistentMetadata || this._isFocusedMode);\n  }\n\n  /* ------------------------------ Artwork ------------------------------ */\n\n  _updateArtwork() {\n    // ensure a nested artwork src takes precedence over the class's src setter,\n    // but that if src is undefined in both the setter and artwork object,\n    // we don't incorrectly pass \"src: undefined\" to the Artwork component)\n    this._Artwork.patch({\n      mode: this.mode,\n      h: this._h,\n      w: this._w,\n      x: this._w / 2,\n      y: this._h / 2,\n      src: this.src,\n      ...(this.artwork || {}),\n      style: {\n        radius: this.style?.radius,\n        ...this.artwork?.style\n      },\n      gradient: this._shouldShowGradient,\n      shouldScale: this._isFocusedMode\n    });\n  }\n\n  _getSrc() {\n    return (this.artwork && this.artwork.src) || this._src;\n  }\n\n  _imageLoaded() {\n    this._Background.alpha = 0; // Since the image is loaded the surface does not need to be shown\n  }\n\n  /* ------------------------------ Badge ------------------------------ */\n\n  _updateBadge() {\n    // Remove Badge if no longer required\n    if (!this.badge?.title || this._isCircleLayout) {\n      if (this._Badge) {\n        this._Content.patch({\n          Badge: undefined\n        });\n      }\n      return;\n    }\n\n    const badgePatch = {\n      ...this.badge,\n      mode: this.mode,\n      x: this.style.paddingX,\n      y: this.style.paddingY,\n      alpha: this._shouldShowBadgeLabel ? 1 : 0.001\n    };\n\n    if (!this._Badge) {\n      this._Content.patch({\n        Badge: {\n          type: Badge,\n          ...badgePatch,\n          signals: {\n            loadedBadge: '_updateBadge'\n          }\n        }\n      });\n      return;\n    } else {\n      this._Badge.patch(badgePatch);\n    }\n    this.applySmooth(this._Badge, badgePatch, {\n      ...badgePatch,\n      ...this._badgeLabelTransitions // Badge and Label should animate in with the same values\n    });\n  }\n\n  /* ------------------------------ Label  ------------------------------ */\n\n  _updateLabel() {\n    if (!this.label?.title || this._isCircleLayout) {\n      if (this._Label) {\n        this._Content.patch({\n          Label: undefined\n        });\n      }\n      return;\n    }\n    const labelPatch = {\n      ...this.label,\n      mode: this.mode,\n      x: this._w - this.style.paddingX,\n      y: this.style.paddingY,\n      alpha: this._shouldShowBadgeLabel ? 1 : 0.001\n    };\n\n    if (!this._Label) {\n      this._Content.patch({\n        Label: {\n          type: Label,\n          mountX: 1,\n          ...labelPatch,\n          signals: {\n            loadedLabel: '_updateLabel'\n          }\n        }\n      });\n      return;\n    } else {\n      this._Label.patch(labelPatch);\n    }\n\n    this.applySmooth(this._Label, labelPatch, {\n      ...labelPatch,\n      x: [\n        labelPatch.x,\n        this._shouldShowBadgeLabel\n          ? this.style.animationEntrance\n          : this.style.animationExit\n      ],\n      ...this._badgeLabelTransitions\n    });\n  }\n\n  /* ------------------------------ Badge & Label ------------------------------ */\n\n  // Badge and Label should animate in with the same values\n  get _shouldShowBadgeLabel() {\n    return (\n      this.persistentMetadata || (this._isFocusedMode && !this._isCircleLayout)\n    );\n  }\n\n  get _badgeLabelTransitions() {\n    return {\n      y: [\n        this._shouldShowBadgeLabel ? this.style.paddingY : 0,\n        this._shouldShowBadgeLabel\n          ? this.style.animationEntrance\n          : this.style.animationExit\n      ],\n      alpha: [\n        this._shouldShowBadgeLabel ? 1 : 0.001,\n        this._shouldShowBadgeLabel\n          ? this.style.animationEntrance\n          : this.style.animationExit\n      ]\n    };\n  }\n\n  /* ------------------------------ Checkbox ------------------------------ */\n\n  _updateCheckbox() {\n    // Remove Checkbox if no longer required\n    if (\n      !(typeof this.checkbox?.checked === 'boolean' && this.checkbox.checked) ||\n      this._isCircleLayout\n    ) {\n      if (this._Checkbox) {\n        this._Content.patch({\n          Checkbox: undefined\n        });\n      }\n      return;\n    }\n\n    const checkboxPatch = {\n      ...this.checkbox,\n      mode: this.mode,\n      x: this._w - this.style.paddingX,\n      y: this._h - this.style.paddingY\n    };\n\n    if (!this._Checkbox) {\n      this._Content.patch({\n        Checkbox: {\n          ...checkboxPatch,\n          type: Checkbox,\n          mount: 1\n        }\n      });\n      return;\n    }\n\n    this.applySmooth(this._Checkbox, checkboxPatch);\n  }\n  /* ------------------------------ Progress Bar ------------------------------ */\n\n  get _progressBarY() {\n    // this accessor gets used to determine where to position the metadata, so\n    // if there is a ProgressBar that is not being alpha-ed out\n    // (because of the progress being set to 0),\n    // use the y position of the ProgressBar\n    // if the ProgressBar is currently animating into place, use the future value\n    // otherwise, return 0\n    return (\n      (this._ProgressBar &&\n      this._ProgressBar._getTransition('alpha')._targetValue !== 0\n        ? this._ProgressBar._getTransition('y')._targetValue ||\n          this._ProgressBar.y\n        : 0) || 0\n    );\n  }\n\n  _updateProgressBar() {\n    // Remove ProgressBar if no longer required\n    if (\n      !(\n        typeof this.progressBar?.progress === 'number' &&\n        this.progressBar.progress\n      ) ||\n      this._isCircleLayout\n    ) {\n      if (this._ProgressBar) {\n        if (this.shouldSmooth) {\n          this._ProgressBar._getTransition('alpha').once('finish', () => {\n            this._removeProgressBar();\n          });\n          this._ProgressBar.smooth = { alpha: 0 };\n        } else {\n          this._removeProgressBar();\n        }\n      }\n      return;\n    }\n\n    if (this.progressBar.progress > 0) {\n      const progressPatch = {\n        ...this.progressBar,\n        mode: this.mode,\n        w: this._w - this.style.paddingX * 2,\n        x: this._w / 2,\n        y: this._h - this.style.paddingYProgress\n      };\n\n      if (!this._ProgressBar) {\n        this._Content.patch({\n          ProgressBar: {\n            ...progressPatch,\n            type: ProgressBar,\n            mountX: 0.5,\n            mountY: 1,\n            alpha: this._hasMetadata && this.shouldSmooth ? 0.001 : 1\n          }\n        });\n\n        if (this.shouldSmooth) {\n          this._ProgressBar.smooth = {\n            alpha: [\n              1,\n              { delay: this.style.animationEntrance.duration } // Wait for metadata to animate in\n            ]\n          };\n        }\n        return;\n      }\n\n      // TODO: See if we need to add animation to every property individually or can set parent\n      this.applySmooth(\n        this._ProgressBar,\n        progressPatch,\n        Object.keys(progressPatch).reduce((acc, prop) => {\n          acc[prop] = [\n            progressPatch[prop],\n            this._isFocusedMode\n              ? this.style.animationEntrance\n              : this.style.animationExit\n          ];\n          return acc;\n        }, {})\n      );\n    }\n  }\n  _removeProgressBar() {\n    this._Content.patch({ ProgressBar: undefined });\n    this._updateMetadata();\n  }\n\n  /* ------------------------------ Metadata  ------------------------------ */\n\n  // all the logic on whether the metaData should show\n  get _shouldShowMetadata() {\n    return (\n      this._hasMetadata &&\n      ((this.persistentMetadata && !this._isInsetMetadata) ||\n        (this._isFocusedMode && !this._isInsetMetadata) ||\n        ((this.persistentMetadata || this._isFocusedMode) &&\n          this._isInsetMetadata &&\n          !this._isCircleLayout))\n    );\n  }\n\n  get _isInsetMetadata() {\n    return this.metadataLocation === 'inset';\n  }\n\n  get _metadataTransitions() {\n    return {\n      y: [\n        this._metadataY,\n        this._shouldShowMetadata\n          ? this.style.animationEntrance\n          : this.style.animationExit\n      ],\n      alpha: [\n        this._metadataAlpha,\n        this._shouldShowMetadata\n          ? this.style.animationEntrance\n          : this.style.animationExit\n      ]\n    };\n  }\n\n  get _hasMetadata() {\n    return MetadataTile.properties.some(\n      prop => this.metadata && this.metadata[prop]\n    );\n  }\n\n  get _metadataY() {\n    if (this._shouldShowMetadata) {\n      if (this._isInsetMetadata) {\n        return this._progressBarY\n          ? this._progressBarY - this.style.paddingYBetweenContent\n          : this._h - this.style.paddingY;\n      }\n    }\n    return this._h + this.style.paddingY;\n  }\n\n  get _metadataAlpha() {\n    return this._shouldShowMetadata ? 1 : 0.001;\n  }\n\n  get _metadataPatch() {\n    return {\n      alpha: this._metadataAlpha,\n      w: this._w - this.style.paddingX * 2,\n      x: this._w / 2,\n      y: this._metadataY\n    };\n  }\n\n  get _nonSmoothingMetadataPatch() {\n    return {\n      mode: this.mode,\n      mountX: 0.5,\n      mountY: this._isInsetMetadata ? 1 : 0,\n      marquee: this._isFocusedMode,\n      ...(this.metadata || {})\n    };\n  }\n\n  _getMetadataLocation() {\n    return this._metadataLocation ?? this.style.metadataLocation;\n  }\n\n  _updateMetadata() {\n    if (!this._hasMetadata) {\n      this._Content.patch({ Metadata: undefined });\n      return;\n    }\n\n    if (!this._Metadata && this._hasMetadata) {\n      // Patch in Metadata for the first time\n      this._Content.patch({\n        Metadata: {\n          type: MetadataTile,\n          signals: {\n            updateComponentDimensions: '_metadataLoaded'\n          },\n          ...this._nonSmoothingMetadataPatch,\n          ...this._metadataPatch\n        }\n      });\n\n      return;\n    }\n    this._Metadata.patch(this._nonSmoothingMetadataPatch);\n    this._animateMetadata();\n  }\n\n  _animateMetadata() {\n    if (!this._Metadata) {\n      return;\n    }\n\n    this.applySmooth(\n      this._Metadata,\n      this._metadataPatch,\n      this._metadataTransitions\n    );\n\n    if (!this._isFocusedMode) {\n      this._resetMarqueeAnimation();\n    }\n  }\n\n  _metadataLoaded() {\n    this._animateMetadata();\n    this._updateLogo();\n\n    // if the metadata height has changed, the height of the entire Tile has changed\n    // and the inspector must be updated via _getRenderHeight()\n    this._updateDimensions();\n\n    // Send event to columns/rows that the height has been updated since metadata will be displayed below the Tile\n    if (!this._isInsetMetadata) {\n      this.fireAncestors('$itemChanged');\n    }\n  }\n\n  /* ------------------------------ Marquee  ------------------------------ */\n\n  _resetMarqueeAnimation() {\n    const alphaTransition = this._Metadata._getTransition('alpha');\n    if (alphaTransition) {\n      alphaTransition.on('finish', () => {\n        if (this._Metadata) {\n          this._Metadata.resetMarquee();\n        }\n      });\n    } else {\n      this._Metadata.resetMarquee();\n    }\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport function base(theme) {\n  return {\n    alpha: theme.alpha.primary,\n    counterTextStyle: theme.typography.headline3,\n    itemSize: theme.layout.gutterX * 2,\n    itemSpacing: theme.spacer.md,\n    radius: theme.radius.sm\n  };\n}\n\nexport const mode = theme => ({\n  disabled: {\n    alpha: theme.alpha.inactive\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    counterBackgroundColor: theme.color.fillInverseSecondary\n  },\n  inverse: {\n    counterBackgroundColor: theme.color.fillNeutralSecondary\n  },\n  brand: {\n    counterBackgroundColor: theme.color.fillInverseSecondary\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport Row from '../Row';\nimport Icon from '../Icon';\nimport TextBox from '../TextBox';\nimport * as styles from './Provider.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Provider extends Base {\n  static get __componentName() {\n    return 'Provider';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      Row: {\n        type: Row,\n        autoResizeWidth: true\n      }\n    };\n  }\n\n  static get properties() {\n    return ['disableRadius', 'counterText', 'providers', 'visibleCount'];\n  }\n\n  static get tags() {\n    return ['Row'];\n  }\n\n  get providersHidden() {\n    return this.providers.length - this._visibleCount;\n  }\n\n  _construct() {\n    this._providers = [];\n    super._construct();\n  }\n\n  _update() {\n    this._updateProviders();\n    this._updateCounter();\n  }\n\n  _updateProviders() {\n    const providerList = [];\n    this.providers.slice(0, this.visibleCount).forEach(provider => {\n      // Create a starting point for each provider icon.\n\n      let patch = {\n        centerInParent: true,\n        radius: this.disableRadius\n          ? 0\n          : getMaxRoundRadius(\n              this.style.radius,\n              this.style.itemSize,\n              this.style.itemSize\n            ),\n        alpha: this.style.alpha,\n        style: provider.style || {}\n      };\n\n      if (\n        // If the provider is a pre-configured Icon, allow it to override the default behavior.\n        provider.type === Icon &&\n        provider.icon &&\n        provider.w &&\n        provider.h\n      ) {\n        // Maintain the ratio of the source icon while enforcing the height specified in the styles.\n        const ratio = provider.w / provider.h;\n        patch = {\n          type: Icon,\n          icon: provider.icon,\n          ...provider,\n          w: this.style.itemSize * ratio,\n          h: this.style.itemSize,\n          ...patch\n        };\n      } else {\n        // If the provider is just a string, create the rest of the Icon.\n        patch = {\n          type: Icon,\n          w: this.style.itemSize,\n          h: this.style.itemSize,\n          ...patch\n        };\n        if (typeof provider === 'object') {\n          patch = { ...patch, ...provider };\n        } else {\n          patch.icon = provider;\n        }\n      }\n      providerList.push(patch);\n    });\n    this._Row.patch({\n      style: {\n        itemSpacing: this.style.itemSpacing\n      },\n      items: providerList,\n      h: this.style.itemSize\n    });\n  }\n\n  _updateCounter() {\n    if (this.providers.length > this.visibleCount) {\n      const remaining = this.providersHidden;\n      const counter = {\n        announce: `+${remaining}`,\n        alpha: this.style.alpha,\n        w: this.style.itemSize,\n        h: this.style.itemSize,\n        centerInParent: true,\n        Background: {\n          w: this.style.itemSize,\n          h: this.style.itemSize,\n          texture: lng.Tools.getRoundRect(\n            this.style.itemSize,\n            this.style.itemSize,\n            getMaxRoundRadius(\n              this.style.radius,\n              this.style.itemSize,\n              this.style.itemSize\n            ),\n            0,\n            null,\n            true,\n            this.style.counterBackgroundColor\n          )\n        },\n        Text: {\n          type: TextBox,\n          mountX: 0.5,\n          mountY: 0.5,\n          x: this.style.itemSize / 2,\n          y: this.style.itemSize / 2,\n          content: this.counterText || `+${remaining}`,\n          style: { textStyle: this.style.counterTextStyle }\n        }\n      };\n      this._Row.appendItems([counter]);\n    }\n  }\n\n  $itemChanged() {\n    this.signal('providerChanged');\n  }\n\n  _getVisibleCount() {\n    const min = 1;\n    const max = this.providers.length;\n    const visibleCount = Math.min(Math.max(min, this._visibleCount), max);\n    if (this._visibleCount < min) {\n      console.warn(\n        `Warning: The specified visible count (${this._visibleCount}) is less than the minimum value (${min}). Setting it to ${min}.`\n      );\n    }\n    if (this._visibleCount > max) {\n      console.warn(\n        `Warning: The specified visible count (${this._visibleCount}) is greater than the maximum value (${max}). Setting it to ${max}.`\n      );\n    }\n    return visibleCount;\n  }\n\n  get w() {\n    return this._Row.w;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce ||\n      (this._Row.items &&\n        this._Row.items.length &&\n        this._Row.items.map(item => item.announce))\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  detailsTextStyle: theme.typography.body3,\n  descriptionTextStyle: { maxLines: 3 },\n  descriptionDetailsStyle: { paddingY: 5 },\n  fadeWidth: theme.spacer.md * theme.spacer.md,\n  provider: {\n    itemSize: theme.spacer.xxxl + theme.spacer.md\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    detailsTextStyle: { textColor: theme.color.textNeutral },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled }\n      }\n    }\n  },\n  inverse: {\n    detailsTextStyle: { textColor: theme.color.textInverse },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled }\n      }\n    }\n  },\n  brand: {\n    detailsTextStyle: { textColor: theme.color.textNeutral },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport MetadataBase from '../MetadataBase';\nimport TextBox from '../TextBox';\nimport Provider from '../Provider';\nimport FadeShader from '../../shaders/FadeShader';\nimport * as styles from './MetadataCardContent.styles';\n\nexport default class MetadataCardContent extends MetadataBase {\n  static get __componentName() {\n    return 'MetadataCardContent';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      Text: {\n        flex: { direction: 'column', justifyContent: 'flex-start' },\n        Title: {\n          type: TextBox\n        },\n        Subtitle: {\n          type: TextBox\n        },\n        Description: {\n          type: TextBox\n        },\n        DescriptionDetails: {\n          type: TextBox\n        }\n      },\n      DetailsWrapper: {\n        DetailsFader: {\n          Details: {\n            mountY: 0.5,\n            type: TextBox,\n            signals: {\n              textBoxChanged: '_resolveDetails'\n            }\n          }\n        },\n        Provider: {\n          mount: 1,\n          type: Provider,\n          signals: {\n            providerChanged: '_resolveProvider'\n          }\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return [\n      'description',\n      'descriptionDetails',\n      'details',\n      'provider',\n      'subtitle',\n      'title'\n    ];\n  }\n\n  static get tags() {\n    return [\n      'Text',\n      {\n        name: 'Title',\n        path: 'Text.Title'\n      },\n      {\n        name: 'Subtitle',\n        path: 'Text.Subtitle'\n      },\n      {\n        name: 'Description',\n        path: 'Text.Description'\n      },\n      {\n        name: 'DescriptionDetails',\n        path: 'Text.DescriptionDetails'\n      },\n      'DetailsWrapper',\n      {\n        name: 'DetailsFader',\n        path: 'DetailsWrapper.DetailsFader'\n      },\n      {\n        name: 'Details',\n        path: 'DetailsWrapper.DetailsFader.Details'\n      },\n      {\n        name: 'Provider',\n        path: 'DetailsWrapper.Provider'\n      }\n    ];\n  }\n\n  _setDetails(details) {\n    if (details) {\n      this._detailsPromise = new Promise(resolve => {\n        this._detailsPromiseResolver = resolve;\n      });\n    } else {\n      this._detailsPromise = undefined;\n    }\n    return details;\n  }\n\n  _setProvider(provider) {\n    if (provider) {\n      this._providerPromise = new Promise(resolve => {\n        this._providerPromiseResolver = resolve;\n      });\n    } else {\n      this._providerPromise = undefined;\n    }\n    return provider;\n  }\n\n  async _update() {\n    this._updateLines();\n    this._updateProvider();\n    await Promise.all(\n      [this._detailsPromise, this._providerPromise].filter(Boolean)\n    );\n    this._updatePositions();\n  }\n\n  _updateLines() {\n    this._Text.w = this.w;\n    this._updateTitle();\n    this._updateSubtitle();\n    this._updateDescription();\n    this._updateDescriptionDetails();\n    this._updateDetails();\n  }\n\n  _updateSubtitle() {\n    if (!this.subtitle && !this._Subtitle) {\n      return;\n    }\n\n    if (!this._Subtitle) {\n      this._Text.childList.addAt({\n        ref: 'Subtitle',\n        type: TextBox\n      });\n    }\n\n    this._Subtitle.patch({\n      content: this.subtitle,\n      style: {\n        textStyle: {\n          ...this.style.subtitleTextStyle,\n          maxLines: 1,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      }\n    });\n  }\n\n  _updateDescription() {\n    this._Description.patch({\n      content: this.description,\n      style: {\n        textStyle: {\n          ...this.style.descriptionTextStyle,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      }\n    });\n  }\n\n  _updateDescriptionDetails() {\n    this._DescriptionDetails.patch({\n      content: this.descriptionDetails,\n      style: {\n        textStyle: {\n          ...this.style.descriptionDetailsTextStyle,\n          maxLines: 1,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      },\n      y: this.style.descriptionDetailsStyle.paddingY\n    });\n  }\n\n  _updateDetails() {\n    const maxWidth = this._detailsMaxW;\n    this._Details.patch({\n      content: this.details,\n      style: {\n        textStyle: {\n          ...this.style.detailsTextStyle,\n          wordWrap: true,\n          maxLines: 1, // sets default for details\n          wordWrapWidth: maxWidth + this.style.fadeWidth / 2\n        }\n      }\n    });\n    if (this._Details.finalW > maxWidth) {\n      this._DetailsFader.patch({\n        w: maxWidth + this.style.fadeWidth / 2,\n        shader: {\n          type: FadeShader,\n          positionLeft: 0,\n          positionRight: this.style.fadeWidth\n        }\n      });\n    } else {\n      this._DetailsFader.shader = undefined;\n    }\n  }\n\n  _resolveDetails() {\n    this._detailsPromiseResolver && this._detailsPromiseResolver();\n    this._updatePositions();\n  }\n\n  _updateProvider() {\n    if (this.provider) {\n      this._Provider.patch({\n        mode: this.mode,\n        ...this.provider,\n        style: this.style.provider\n      });\n    }\n  }\n\n  _resolveProvider() {\n    this._providerPromiseResolver && this._providerPromiseResolver();\n    this._updatePositions();\n    this._updateDetails();\n  }\n\n  _updatePositions() {\n    this._Text.h = this._textH;\n    this._Text.w = this._textW;\n\n    this._DetailsWrapper.w = this._textW;\n    this._DetailsWrapper.h = Math.max(this._providerH, this._Details.h);\n    this._DetailsWrapper.y = this.h - this._DetailsWrapper.h;\n\n    this._Details.y = this._DetailsWrapper.h / 2;\n\n    this._Provider.x = this._DetailsWrapper.w - this._providerW;\n    this._Provider.y = this._DetailsWrapper.h - this._providerH;\n  }\n\n  get _textW() {\n    return this.w;\n  }\n\n  get _textH() {\n    return this.h - this._providerH;\n  }\n\n  get _providerW() {\n    return this._Provider.w;\n  }\n\n  get _providerH() {\n    return this._Provider._Row._Items.h;\n  }\n\n  get _detailsMaxW() {\n    return this.w - this._providerW - this.style.fadeWidth / 2;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Title && this._Title.announce,\n        this._Subtitle && this._Subtitle.announce,\n        this._Description && this._Description.announce,\n        this._DescriptionDetails && this._DescriptionDetails.announce,\n        this._Details && this._Details.announce,\n        this._Provider && this._Provider.announce\n      ]\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  expandedWidth: utils.getWidthByUpCount(theme, 2),\n  expandedHeight: utils.getDimensions(theme, {\n    ratioX: 16,\n    ratioY: 9,\n    upCount: 4\n  }).h,\n  imageSize: {\n    width: utils.getDimensions(theme, { ratioX: 16, ratioY: 9, upCount: 4 }).w,\n    height: utils.getDimensions(theme, { ratioX: 16, ratioY: 9, upCount: 4 }).h\n  },\n  metadata: { descriptionTextStyle: { maxLines: 2 } },\n  paddingVertical: theme.spacer.md * 1.5\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Card from '../Card';\nimport utils from '../../utils';\nimport Tile from '../Tile';\nimport MetadataCardContent from '../MetadataCardContent';\nimport * as styles from './CardContent.styles';\n\nexport default class CardContent extends Card {\n  static get __componentName() {\n    return 'CardContent';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      Tile: { type: Tile }\n    };\n  }\n\n  static get properties() {\n    return [\n      ...super.properties,\n      'tile',\n      'metadata',\n      'orientation',\n      'collapseToMetadata',\n      'shouldCollapse',\n      'src'\n    ];\n  }\n\n  static get tags() {\n    return [...super.tags, 'Metadata', 'Tile'];\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'expandedW', curr: 'expandedWidth' },\n      { prev: 'expandedH', curr: 'expandedHeight' }\n    ];\n  }\n\n  _update() {\n    this._updateSize();\n    this._updateTile();\n    this._updateMetadata();\n    super._update();\n  }\n\n  _updateTitle() {}\n\n  _updateTitlePosition() {}\n\n  _updateTile() {\n    let w = this.style.imageSize.w;\n    let h = this.style.expandedHeight;\n    const radius =\n      Array.isArray(this.style.radius) && this.style.radius.length === 4\n        ? this.style.radius\n        : Array(4).fill(this.style.radius);\n\n    let tileRadius = radius;\n\n    if (!this._collapse) {\n      tileRadius =\n        this._orientation === 'horizontal'\n          ? [radius[0], 0, 0, radius[3]]\n          : [radius[0], radius[1], 0, 0];\n    }\n\n    if (this._orientation !== 'horizontal') {\n      w = this.style.expandedWidth;\n      h = this.style.imageSize.h;\n    }\n\n    // ensure a nested tile artwork src takes precedence over the class's src setter,\n    // but that if src is undefined in both the setter and tile artwork object,\n    // we don't incorrectly pass \"src: undefined\" to the Tile component (and in turn, Artwork)\n    let tile = this.tile;\n    if (this.src) {\n      tile = utils.clone({ src: this.src }, this.tile);\n    }\n\n    this._Tile.patch({\n      w,\n      h,\n      ...tile,\n      style: {\n        ...(tile?.style || {}),\n        radius: tileRadius\n      },\n      persistentMetadata: true,\n      alpha: this._shouldShowTile ? 1 : 0\n    });\n  }\n\n  _updateMetadata() {\n    const metadataPatch = {\n      ...this.metadata,\n      ...this._metadataPosition,\n      ...this._metadataDimensions,\n      mode: this.mode,\n      alpha: this._shouldShowMetadata ? 1 : 0,\n      style: this.style.metadata\n    };\n\n    if (this.style.marqueeOnFocus) {\n      metadataPatch.marquee = this._isFocusedMode;\n    }\n\n    if (!this._Metadata) {\n      metadataPatch.type = MetadataCardContent;\n    }\n\n    this.patch({ Metadata: metadataPatch });\n  }\n\n  _updateSize() {\n    let w = this.style.expandedWidth;\n    let h = this.style.expandedHeight;\n    if (this._collapse) {\n      if (this._orientation === 'horizontal') {\n        w = this._collapseW;\n      } else {\n        h = this._collapseH;\n      }\n    }\n    this.w = w;\n    this.h = h;\n  }\n\n  _getSrc() {\n    return (\n      (this.tile &&\n        ((this.tile.artwork && this.tile.artwork.src) || this.tile.src)) ||\n      this._src\n    );\n  }\n\n  get _metadataDimensions() {\n    const paddingHorizontal = this.style.paddingHorizontal * 2;\n    const paddingVertical = this.style.paddingVertical * 2;\n\n    let w =\n      this.style.expandedWidth - this.style.imageSize.w - paddingHorizontal;\n    let h = this.style.expandedHeight - paddingVertical;\n\n    if (this.orientation !== 'horizontal') {\n      w = this.style.expandedWidth - paddingHorizontal;\n      h = this.style.expandedHeight - this.style.imageSize.h - paddingVertical;\n    }\n    return { w, h };\n  }\n\n  get _metadataPosition() {\n    const paddingHorizontal = this.style.paddingHorizontal;\n    const paddingVertical = this.style.paddingVertical;\n\n    let x = paddingHorizontal + (this._collapse ? 0 : this.style.imageSize.w);\n    let y = paddingVertical;\n\n    if (this.orientation !== 'horizontal') {\n      x = paddingHorizontal;\n      y = paddingVertical + (this._collapse ? 0 : this.style.imageSize.h);\n    }\n\n    return { x, y };\n  }\n\n  get _shouldShowMetadata() {\n    return !this._collapse || this.collapseToMetadata;\n  }\n\n  get _shouldShowTile() {\n    return !this._collapse || (this._collapse && !this.collapseToMetadata);\n  }\n\n  get _collapse() {\n    return this.shouldCollapse && !this._isFocusedMode;\n  }\n\n  get _collapseW() {\n    return this.collapseToMetadata\n      ? this.style.expandedWidth - this.style.imageSize.w\n      : this.style.imageSize.w;\n  }\n\n  get _collapseH() {\n    return this.collapseToMetadata\n      ? this.style.expandedHeight - this.style.imageSize.h\n      : this.style.imageSize.h;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Metadata && this._Metadata.announce,\n        this._Tile && this._Tile.announce\n      ]\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './CardContent.styles';\nimport CardContent from './CardContent';\n\nexport default class CardContentHorizontal extends CardContent {\n  static get __componentName() {\n    return 'CardContentHorizontal';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _init() {\n    this._orientation = 'horizontal';\n    super._init();\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => {\n  const { w, h } = utils.getDimensions(theme, {\n    ratioX: 16,\n    ratioY: 9,\n    upCount: 3\n  });\n  return {\n    expandedWidth: utils.getWidthByColumnSpan(theme, 8),\n    expandedHeight: h,\n    imageSize: { width: w, height: h },\n    metadata: { descriptionTextStyle: { maxLines: 3 } }\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './CardContentHorizontalLarge.styles';\nimport CardContentHorizontal from './CardContentHorizontal';\n\nexport default class CardContentHorizontalLarge extends CardContentHorizontal {\n  static get __componentName() {\n    return 'CardContentHorizontalLarge';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  expandedWidth: utils.getWidthByUpCount(theme, 4),\n  expandedHeight:\n    utils.getDimensions(theme, { ratioX: 16, ratioY: 9, upCount: 4 }).h +\n    theme.spacer.xxxl * 7 +\n    theme.spacer.lg +\n    theme.spacer.xxs,\n  metadata: { descriptionTextStyle: { maxLines: 3 } },\n  marqueeOnFocus: true\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './CardContentVertical.styles';\nimport CardContent from './CardContent';\n\nexport default class CardContentVertical extends CardContent {\n  static get __componentName() {\n    return 'CardContentVertical';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _init() {\n    this._orientation = 'vertical';\n    super._init();\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  expandedHeight:\n    utils.getDimensions(theme, { ratioX: 16, ratioY: 9, upCount: 4 }).h +\n    theme.spacer.md * 14,\n  metadata: { descriptionTextStyle: { maxLines: 1 } }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './CardContentVerticalSmall.styles';\nimport CardContentVertical from './CardContentVertical';\n\nexport default class CardContentVerticalSmall extends CardContentVertical {\n  static get __componentName() {\n    return 'CardContentVerticalSmall';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _setMetadata(metadata) {\n    return {\n      ...metadata,\n      details: undefined,\n      provider: undefined\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const strokeWidth = theme.stroke.sm;\n  const size = theme.spacer.xl;\n  return {\n    width: size,\n    height: size,\n    iconWidth: theme.spacer.md,\n    iconHeight: theme.spacer.md,\n    radius: theme.radius.xs,\n    strokeWidth\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Checkbox from './Checkbox';\nimport * as styles from './CheckboxSmall.styles';\n\nexport default class CheckboxSmall extends Checkbox {\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  itemSpacing: theme.layout.gutterY,\n  scrollIndex: 0,\n  itemTransition: {\n    ...theme.animation.standardEntrance,\n    duration: theme.animation.duration.fast\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport NavigationManager from '../NavigationManager';\nimport { getY } from '../../utils';\nimport * as styles from './Column.styles';\n\nexport default class Column extends NavigationManager {\n  static get __componentName() {\n    return 'Column';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      direction: 'column'\n    };\n  }\n\n  _isOnScreenForScrolling(child) {\n    if (!child) return false;\n\n    const y = getY(child);\n    if (!Number.isFinite(y)) return false;\n    const itemsTransitionY = this.getTransitionYTargetValue();\n    const columnY = this.core.renderContext.py;\n    let itemY = columnY + itemsTransitionY + y;\n    let yModifier;\n\n    // This section here takes the difference between a possible target value\n    // and subtracts it from the current child x. That value then is subtracted from the initial\n    // itemX value calculated on the core renderContext px value to more accurately\n    // calculate the item's location on screen when it's own x value will be updating.\n    if (child.transition('y')) {\n      yModifier = child.y - child.transition('y').targetValue;\n      itemY = itemY - yModifier;\n    }\n    return itemY >= columnY && itemY + child.h <= columnY + this.h;\n  }\n\n  _shouldScroll() {\n    if (this.alwaysScroll) {\n      return true;\n    }\n    let shouldScroll = false;\n    if (!this.neverScroll) {\n      const isCompletelyOnScreen = this._isOnScreenForScrolling(this.selected);\n      const lastChild = this.Items.childList.last;\n      shouldScroll =\n        lastChild &&\n        (this.shouldScrollUp() ||\n          this.shouldScrollDown() ||\n          !isCompletelyOnScreen);\n    }\n\n    if (this.selectedIndex < this.scrollIndex) {\n      shouldScroll = false;\n    }\n\n    return shouldScroll;\n  }\n\n  _getScrollY() {\n    let itemsContainerY;\n    let itemIndex = this.selectedIndex - this.scrollIndex;\n    itemIndex = itemIndex < 0 ? 0 : itemIndex;\n    if (itemIndex === this._firstFocusableIndex()) {\n      itemIndex = 0;\n    }\n\n    if (this.Items.children[itemIndex]) {\n      itemsContainerY = this.Items.children[itemIndex].transition('y')\n        ? -this.Items.children[itemIndex].transition('y').targetValue +\n          this.itemPosY\n        : -this.Items.children[itemIndex].y + this.itemPosY;\n    }\n\n    return itemsContainerY;\n  }\n\n  _render(next, prev) {\n    this._prevLastScrollIndex = this._lastScrollIndex;\n\n    if (\n      this.plinko &&\n      prev &&\n      prev.selected &&\n      !(this.items.indexOf(prev) === 0 && prev.skipPlinko)\n    ) {\n      const prevPlinko = this.checkSkipPlinko(prev, next);\n      next.selectedIndex = this._getIndexOfItemNear(next, prevPlinko || prev);\n    } else if (next && !next.selectedIndex) {\n      next.selectedIndex = 0;\n    }\n\n    let itemsContainerY;\n    if (!this.Items.children.length) {\n      itemsContainerY = this.itemPosY;\n    } else if (this._shouldScroll()) {\n      itemsContainerY = this._getScrollY();\n    }\n\n    if (itemsContainerY !== undefined) {\n      this.updatePositionOnAxis(this.Items, itemsContainerY);\n    }\n\n    this.onScreenEffect(this.onScreenItems);\n  }\n\n  _performRender() {\n    this._render(this.selected, this.prevSelected);\n  }\n\n  checkSkipPlinko(prev, next) {\n    // If previous doesn't have skip plinko or previous is the first or last item\n    if (\n      !prev ||\n      !prev.skipPlinko ||\n      [0, this.items.length - 1].includes(this.items.indexOf(prev))\n    ) {\n      return null;\n    }\n\n    const prevIndex = this.items.indexOf(prev);\n    const direction = prevIndex - this.items.indexOf(next);\n    const up = direction > 0;\n\n    // Grab all items below prev if up or all items before prev if down\n    const prevItems = up\n      ? this.items.slice(prevIndex).map(i => ({\n          skipPlinko: i.skipPlinko,\n          index: this.items.indexOf(i)\n        }))\n      : this.items\n          .slice(0, prevIndex + 1)\n          .map(i => ({\n            skipPlinko: i.skipPlinko,\n            index: this.items.indexOf(i)\n          }))\n          .reverse();\n\n    // first item that has skipPlinko but the previous does not\n    // Start at the index prev\n    const endOfMultiSkipPlinkos = prevItems.find(\n      i => i.skipPlinko && !this.items[i.index + direction].skipPlinko\n    );\n    const prevPlinkoIndex = endOfMultiSkipPlinkos\n      ? endOfMultiSkipPlinkos.index + direction\n      : prevIndex + direction; // +/- 1, item index before prev\n\n    return this.items[prevPlinkoIndex];\n  }\n\n  get _itemsY() {\n    return getY(this.Items);\n  }\n\n  $removeItem(item) {\n    if (item) {\n      const wasSelected = item === this.selected;\n      this.Items.childList.remove(item);\n      this.queueRequestUpdate();\n\n      if (wasSelected || this.selectedIndex >= this.items.length) {\n        // eslint-disable-next-line no-self-assign\n        this.selectedIndex = this._selectedIndex;\n      }\n\n      if (!this.items.length) {\n        this.fireAncestors('$columnEmpty');\n      }\n    }\n  }\n\n  $columnChanged() {\n    this.queueRequestUpdate();\n  }\n\n  _isOnScreen(child) {\n    if (!child) return false;\n\n    return this._isComponentVerticallyVisible(child);\n  }\n\n  // can be overridden\n  onScreenEffect() {}\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const paddingX = theme.spacer.lg;\n  const radius = theme.radius.xl;\n  const logoRadius = Math.max(radius - paddingX / 2, 0);\n\n  return {\n    height: theme.spacer.md * 8,\n    iconStyle: {\n      radius: radius,\n      width: theme.spacer.xxxl,\n      height: theme.spacer.xxxl\n    },\n    logoStyle: {\n      radius: logoRadius,\n      width: theme.spacer.md * 7,\n      height: theme.spacer.md * 6\n    },\n    minWidth: theme.spacer.md * 9,\n    paddingX,\n    paddingXNoTitle: theme.spacer.md,\n    prefixPadding: theme.spacer.md,\n    radius,\n    contentSpacing: theme.spacer.md\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ButtonSmall } from '../Button';\nimport Icon from '../Icon';\nimport * as styles from './Control.styles';\n\nexport default class Control extends ButtonSmall {\n  static get __componentName() {\n    return 'Control';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'icon', 'logo', 'shouldCollapse'];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'titlePadding', curr: 'contentSpacing' }];\n  }\n\n  _update() {\n    // ordering this way to make sure that this._Title is defined so the title visibility can be set properly when _updateCollapseStatus is called\n    this._updatePrefixStyle();\n    super._updateTitle();\n    this._updateCollapseStatus();\n    super._update();\n  }\n\n  _updateCollapseStatus() {\n    if (this._Title) {\n      this._Title.visible = !this._collapse;\n    }\n  }\n\n  // if user provides styling of either logo or icon, apply the style to the respected element\n  _updatePrefixStyle() {\n    if (this._prefix) {\n      // checking logo first since it takes precedence\n      if (this.logo) {\n        this._updatePrefixObj(this.logo, {\n          style: { color: undefined, ...this.style.logoStyle }\n        });\n      } else if (this.icon) {\n        this._updatePrefixObj(this.icon, { style: this.style.iconStyle });\n      }\n    }\n  }\n\n  // optimization\n  // sets Title's x and mountX values\n  _patchTitle(x, mountX) {\n    this._Title.patch({\n      x,\n      mountX\n    });\n  }\n\n  _updateContentPosition() {\n    if (this._prefix && this._Title) {\n      // placing prefix always to the left if title is present\n      // justification should only apply to title in this case\n      this._Content.patch({\n        mountX: 0,\n        x: this._paddingLeft\n      });\n\n      switch (this._justify) {\n        case 'left':\n          this._patchTitle(0, 0);\n          break;\n        case 'right':\n          if (this.w < this._Prefix.w + this._Title.w) {\n            this._patchTitle(0, 0);\n          } else {\n            const leftOverSpace =\n              this.w -\n              (this._paddingLeft +\n                this._paddingRight +\n                this._Prefix.w +\n                this.style.contentSpacing);\n\n            this._patchTitle(leftOverSpace, 1);\n          }\n          break;\n        case 'center':\n        default:\n          if (this.fixed) {\n            // if the component width is less than the prefix and title then we go to the default padding on left and right of title\n            if (this.w < this._Prefix.w + this._Title.w) {\n              this._patchTitle(0, 0);\n            } else {\n              const middle =\n                (this.w -\n                  (this._paddingLeft + this._Prefix.w + this._paddingRight)) /\n                2;\n              this._patchTitle(middle, 0.5);\n            }\n          } else if (this._Prefix !== undefined) {\n            const middle =\n              (this.w -\n                (this._paddingLeft +\n                  this._Prefix.w +\n                  this.style.contentSpacing +\n                  this._paddingRight)) /\n              2;\n            this._patchTitle(middle, 0.5);\n          }\n          break;\n      }\n    } else {\n      super._updateContentPosition();\n      this._Title && this._patchTitle(0, 0); // RESET Title back to original position\n    }\n  }\n\n  // does nothing if a prefix property is passed in for Control\n  _setPrefix() {\n    return;\n  }\n\n  // does nothing if a suffix property is passed in for Control\n  _setSuffix() {\n    return;\n  }\n\n  // optimization\n  // turning prefix property setter into a function since functionality is repeated\n  _updatePrefixObj(icon, props = {}) {\n    this._prefix = {\n      type: Icon,\n      icon,\n      ...props\n    };\n  }\n\n  _setIcon(icon) {\n    if (!this.logo) {\n      // if icon is defined then set it otherwise set prefix to be undefined\n      if (icon) {\n        this._updatePrefixObj(icon, { style: this.style.iconStyle });\n      } else {\n        this._prefix = icon;\n      }\n    }\n    return icon;\n  }\n\n  _setLogo(logo) {\n    if (logo) {\n      this._updatePrefixObj(logo, {\n        style: { color: undefined, ...this.style.logoStyle }\n      });\n      // if logo is set to undefined but an icon is provided, display the icon\n    } else if (this.icon) {\n      this._updatePrefixObj(this.icon, { style: this.style.iconStyle });\n    } else {\n      this._prefix = logo;\n    }\n    return logo;\n  }\n\n  get _paddingLeft() {\n    return this.logo ? this.style.paddingXNoTitle : this.style.paddingX;\n  }\n\n  get _paddingRight() {\n    return this.logo && (!this._hasTitle || this._collapse)\n      ? this.style.paddingXNoTitle\n      : this.style.paddingX;\n  }\n\n  get _collapse() {\n    return this.shouldCollapse && !this._isFocusedMode;\n  }\n\n  get _announceComponentName() {\n    return Control.__componentName;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { base as ControlStyle } from './Control.styles';\n\nexport const base = theme => {\n  const parentStyle = ControlStyle(theme);\n  const height = theme.spacer.md * 7;\n  const radiusOffset = (parentStyle.height - height) / 2;\n  const radius = Math.max(parentStyle.radius - radiusOffset, 0);\n  const logoRadius = Math.max(radius - parentStyle.paddingX / 2, 0);\n\n  return {\n    height,\n    logoStyle: {\n      radius: logoRadius,\n      height: theme.spacer.md * 5,\n      width: theme.spacer.md * 6\n    },\n    radius,\n    minWidth: theme.spacer.md * 8,\n    textStyle: theme.typography.button2\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Control from './Control';\nimport * as styles from './ControlSmall.styles';\n\nexport default class ControlSmall extends Control {\n  static get __componentName() {\n    return 'ControlSmall';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getWidthByUpCount } from '../../utils';\n\nexport const base = theme => ({\n  width: getWidthByUpCount(theme, 1),\n  titleMarginBottom: theme.spacer.lg,\n  titleMarginLeft: theme.layout.gutterX,\n  titleTextStyle: {\n    ...theme.typography.headline1,\n    textColor: theme.color.textNeutral\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    titleTextStyle: { textColor: theme.color.textNeutral }\n  },\n  inverse: {\n    titleTextStyle: { textColor: theme.color.textInverse }\n  },\n  brand: {\n    titleTextStyle: { textColor: theme.color.textNeutral }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport TextBox from '../TextBox';\nimport Row from '../Row';\n\nimport * as styles from './TitleRow.styles';\n\nexport default class TitleRow extends Row {\n  static get __componentName() {\n    return 'TitleRow';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'title'];\n  }\n\n  static get tags() {\n    return [...super.tags, 'Title'];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'rowMarginTop', curr: 'titleMarginBottom' }];\n  }\n\n  _titleLoaded() {\n    this._updateRow();\n  }\n\n  _construct() {\n    super._construct();\n    this._autoResizeHeight = true;\n  }\n\n  _update() {\n    super._update();\n    this._updateTitle();\n    this._updateRow();\n  }\n\n  _autoResize() {\n    this.w = this.w || this.style.w;\n    this.h = this.autoResizeHeight ? this.Items.y + this.Items.h : this.h;\n  }\n\n  _updateTitle() {\n    if (!this.title) {\n      if (this._Title) {\n        this.patch({ Title: undefined });\n      }\n      return;\n    }\n\n    let titlePatch = {\n      x: this.style.titleMarginLeft,\n      content: this.title,\n      style: { textStyle: this.style.titleTextStyle }\n    };\n    if (!this._Title) {\n      titlePatch = {\n        ...this._titleFirstLoadProps,\n        ...titlePatch\n      };\n    }\n    this.patch({ Title: titlePatch });\n  }\n\n  get _titleFirstLoadProps() {\n    return {\n      type: TextBox,\n      signals: {\n        textBoxChanged: '_titleLoaded'\n      }\n    };\n  }\n\n  _updateRow() {\n    this.applySmooth(this.Items, {\n      y: this.title ? this._Title.finalH + this.style.titleMarginBottom : 0\n    });\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this._Title && this._Title.announce);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  extraItemSpacing: theme.spacer.lg\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport TitleRow from '../TitleRow';\n\nimport * as styles from './ControlRow.styles';\n\nexport default class ControlRow extends TitleRow {\n  static get __componentName() {\n    return 'ControlRow';\n  }\n\n  static get __themeStyles() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      alpha: 0,\n      lazyScroll: true,\n      signals: {\n        selectedChange: '_getMoreItems'\n      }\n    };\n  }\n\n  static get properties() {\n    return [...super.properties, 'extraItemSpacing'];\n  }\n\n  _construct() {\n    super._construct();\n    this._leftControls = [];\n    this._contentItems = [];\n    this._rightControls = [];\n    this._lastLeftControlIndex = -1;\n    this._lastItemIndex = -1;\n    this._lazyLoadBuffer = 0;\n  }\n\n  _updateContent() {\n    const itemsToAppend = [];\n    if (this.leftControls.length) {\n      itemsToAppend.push(...this._withExtraSpacing(this.leftControls, true));\n    }\n    if (this.contentItems.length) {\n      itemsToAppend.push(...this._withExtraSpacing(this.contentItems));\n    }\n    if (this.rightControls.length) {\n      itemsToAppend.push(...this.rightControls);\n    }\n    if (itemsToAppend.length) {\n      this.patch({\n        alpha: 1,\n        items: itemsToAppend,\n        selectedIndex: this.leftControls.length,\n        startLazyScrollIndex: this.leftControls.length,\n        stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n      });\n    }\n  }\n\n  _withExtraSpacing(items, isControl = false) {\n    const itemsCopy = [...items];\n    const prevItems = isControl ? this._prevLeftControls : this._prevItems;\n\n    // after appending remove extra spacing from the previous last item\n    if (prevItems && prevItems.length && itemsCopy[prevItems.length - 1]) {\n      itemsCopy[prevItems.length - 1].extraItemSpacing = 0;\n    }\n\n    itemsCopy[itemsCopy.length - 1].extraItemSpacing =\n      this.extraItemSpacing == undefined\n        ? this.style.extraItemSpacing\n        : this.extraItemSpacing;\n\n    if (isControl) {\n      this._prevLeftControls = itemsCopy;\n    } else {\n      this._prevItems = itemsCopy;\n    }\n    return itemsCopy;\n  }\n\n  _getMoreItems() {\n    if (this.lazyLoadBuffer) {\n      const loadMoreIndex = this.contentItems.length - 1 - this.lazyLoadBuffer;\n      if (\n        this.selectedIndex - this.leftControls.length >= loadMoreIndex &&\n        this.selectedIndex < this.leftControls.length + this.contentItems.length\n      ) {\n        this.loadMoreItems();\n      }\n    }\n  }\n\n  loadMoreItems() {\n    this.signal('loadMoreItems');\n  }\n\n  _selectedChange(selected, prevSelected) {\n    super._selectedChange(selected, prevSelected);\n    this._getMoreItems();\n  }\n\n  _appendItemsAt(items, appendIndex, removeSpacingIndex) {\n    const itemsCopy = [...items];\n\n    if (removeSpacingIndex != undefined && removeSpacingIndex >= 0) {\n      this.items[removeSpacingIndex].extraItemSpacing = undefined;\n      itemsCopy[itemsCopy.length - 1].extraItemSpacing =\n        this.extraItemSpacing == undefined\n          ? this.style.extraItemSpacing\n          : this.extraItemSpacing;\n    }\n    this.appendItemsAt(itemsCopy, appendIndex);\n  }\n\n  addContentItems(items) {\n    const lastSelected = this.selectedIndex;\n    const itemsToAdd = this._createContentItems(items);\n    const addIndex = this._lastItemIndex + 1;\n    this._appendItemsAt(itemsToAdd, addIndex, this._lastItemIndex);\n    this._lastItemIndex += itemsToAdd.length;\n\n    if (this._contentItems) {\n      this._contentItems = [...this.contentItems, ...itemsToAdd];\n    }\n\n    this._updateContent();\n    this.selectedIndex = lastSelected;\n\n    this.patch({\n      stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n    });\n  }\n\n  addContentItemsAt(items, itemIndex) {\n    const itemsToAdd = this._createContentItems(items);\n    const addIndex = this._lastLeftControlIndex + 1 + itemIndex;\n    if (addIndex === this._lastItemIndex + 1) {\n      this.addContentItems(itemsToAdd);\n    } else {\n      this._appendItemsAt(itemsToAdd, addIndex);\n\n      if (this._contentItems) {\n        this._contentItems.splice(addIndex, 0, ...itemsToAdd);\n        this._lastItemIndex = this.contentItems.length - 1;\n      }\n\n      this.patch({\n        stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n      });\n    }\n  }\n\n  removeContentItemAt(index) {\n    const removeIndex = this._lastLeftControlIndex + 1 + index;\n    this.removeItemAt(removeIndex);\n    this._lastItemIndex--;\n\n    if (this._contentItems) {\n      this._contentItems.splice(index, 1);\n    }\n\n    this.patch({\n      startLazyScrollIndex: this.leftControls.length,\n      stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n    });\n  }\n\n  addLeftControls(controls) {\n    const itemsToAdd = this._createControls(controls);\n    const addIndex = this._lastLeftControlIndex + 1;\n\n    this._appendItemsAt(itemsToAdd, addIndex, this._lastLeftControlIndex);\n    if (this._leftControls) {\n      this._leftControls = [...this._leftControls, ...controls];\n      this._lastLeftControlIndex = this._leftControls.length - 1;\n      this._lastItemIndex += controls.length;\n    }\n\n    this.patch({\n      startLazyScrollIndex: this.leftControls.length,\n      stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n    });\n  }\n\n  addLeftControlsAt(controls, index) {\n    const itemsToAdd = this._createControls(controls);\n    if (index === this._lastLeftControlIndex + 1) {\n      this.addLeftControls(controls);\n    } else {\n      this._appendItemsAt(itemsToAdd, index);\n      if (this.leftControls) {\n        this._leftControls.splice(index, 0, ...controls);\n        this._lastLeftControlIndex = this._leftControls.length - 1;\n        this._lastItemIndex += controls.length;\n      }\n\n      this.patch({\n        startLazyScrollIndex: this.leftControls.length,\n        stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n      });\n    }\n  }\n\n  removeLeftControlAt(index) {\n    this.removeItemAt(index);\n    this._lastLeftControlIndex--;\n    this._lastItemIndex--;\n\n    if (this.leftControls) {\n      this._leftControls.splice(index, 1);\n    }\n\n    this.patch({\n      startLazyScrollIndex: this.leftControls.length,\n      stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n    });\n  }\n\n  addRightControls(controls) {\n    this._rightControls.push(...controls);\n    this._appendItemsAt(this._createControls(controls), this.items.length);\n  }\n\n  addRightControlsAt(controls, index) {\n    const appendIndex =\n      this._leftControls.length + this._contentItems.length + index;\n    this._rightControls.splice(index, 0, ...controls);\n    this._appendItemsAt(this._createControls(controls), appendIndex);\n  }\n\n  removeRightControlAt(index) {\n    const removeIndex =\n      this.leftControls.length + this.contentItems.length + index;\n    this.removeItemAt(removeIndex);\n\n    if (this.rightControls) {\n      this._rightControls.splice(index, 1);\n    }\n  }\n\n  _createControls(controls) {\n    return controls.map(controlProps => ({\n      backgroundType: 'fill',\n      centerInParent: true,\n      ...controlProps\n    }));\n  }\n\n  _createContentItems(contentItems) {\n    const newContentItems = contentItems.map(itemProps => ({\n      ...itemProps,\n      centerInParent: true\n    }));\n\n    return newContentItems;\n  }\n\n  _setLeftControls(leftControls) {\n    this._leftControls = this._createControls(leftControls);\n    this._lastLeftControlIndex = leftControls.length - 1;\n    this._updateContent();\n  }\n\n  _getLeftControls() {\n    return this._leftControls;\n  }\n\n  _setRightControls(rightControls) {\n    this._rightControls = this._createControls(rightControls);\n    this._updateContent();\n  }\n\n  _getRightControls() {\n    return this._rightControls;\n  }\n\n  _getContentItems() {\n    return this._contentItems;\n  }\n\n  _setContentItems(items) {\n    this._contentItems = this._createContentItems(items);\n    this._lastItemIndex = this._lastLeftControlIndex + items.length;\n    this._updateContent();\n  }\n\n  _getLeftControlItems() {\n    if (this.leftControls.length) {\n      return this.items.slice(0, this._lastLeftControlIndex + 1);\n    }\n    return [];\n  }\n\n  _getContentItemItems() {\n    if (this.contentItems.length) {\n      return this.items.slice(\n        this._lastLeftControlIndex + 1,\n        this._lastItemIndex + 1\n      );\n    }\n    return [];\n  }\n\n  _getRightControlItems() {\n    if (this.rightControls.length) {\n      const leftSiblingIndex =\n        this._lastItemIndex || this._lastLeftControlIndex;\n      return leftSiblingIndex\n        ? this.items.slice(leftSiblingIndex + 1)\n        : this.items;\n    }\n    return [];\n  }\n\n  set leftControls(leftControls) {\n    this._setLeftControls(leftControls);\n  }\n\n  get leftControls() {\n    return this._getLeftControls();\n  }\n\n  set rightControls(rightControls) {\n    this._setRightControls(rightControls);\n  }\n\n  get rightControls() {\n    return this._getRightControls();\n  }\n\n  set contentItems(items) {\n    this._setContentItems(items);\n  }\n\n  get contentItems() {\n    return this._getContentItems();\n  }\n\n  set lazyLoadBuffer(lazyLoadBuffer) {\n    this._lazyLoadBuffer = lazyLoadBuffer;\n    this._getMoreItems();\n  }\n\n  get lazyLoadBuffer() {\n    return this._lazyLoadBuffer;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  propertyTextStyle: {\n    ...theme.typography.headline1,\n    textColor: theme.color.textNeutral\n  },\n  valueTextStyle: {\n    ...theme.typography.body1,\n    textColor: theme.color.textNeutral\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport context from '../../globals/context/index';\nimport Column from '../Column';\nimport Row from '../Row';\nimport TextBox from '../TextBox';\nimport { getWidthByColumnSpan } from '../../utils';\nimport * as styles from './GridOverlay.styles';\n\nclass Spacer extends Base {\n  static get __componentName() {\n    return 'Spacer';\n  }\n\n  static _template() {\n    return {\n      Line: {\n        h: Spacer._lineThickness,\n        rect: true,\n        mountY: 0.5,\n        TickLeft: {\n          ...Spacer._tick,\n          x: Spacer._lineThickness * -1\n        },\n        TickRight: Spacer._tick\n      }\n    };\n  }\n\n  static get properties() {\n    return ['lineColor'];\n  }\n\n  static get tags() {\n    return ['Line', 'TickLeft', 'TickRight'];\n  }\n\n  static get _lineThickness() {\n    return 3;\n  }\n\n  static get _tickLength() {\n    return 25;\n  }\n\n  static get _tick() {\n    return {\n      rect: true,\n      mountY: 0.5,\n      w: Spacer._lineThickness,\n      h: Spacer._tickLength,\n      y: Spacer._lineThickness / 2\n    };\n  }\n\n  _update() {\n    this._Line.w = this.w;\n    this._TickRight.x = this._Line.w;\n\n    if (this.lineColor) {\n      this._Line.color =\n        this._TickLeft.color =\n        this._TickRight.color =\n          this.lineColor;\n    }\n\n    this.rotation = this.vertical ? Math.PI / 2 : 0;\n    this.signal('spacerLoaded');\n  }\n}\n\nexport default class GridOverlay extends Base {\n  static get __componentName() {\n    return 'GridOverlay';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    const textRow = {\n      type: Row,\n      autoResizeHeight: true,\n      Items: {\n        Property: {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_update'\n          }\n        },\n        Value: {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_update'\n          },\n          centerInParent: true\n        }\n      }\n    };\n\n    return {\n      Columns: {\n        alpha: 0.001,\n        type: Row\n      },\n      Margins: {\n        alpha: 0.001,\n        Horizontal: {\n          Left: {\n            type: Spacer,\n            signals: {\n              spacerLoaded: '_update'\n            }\n          },\n          Right: {\n            type: Spacer,\n            signals: {\n              spacerLoaded: '_update'\n            }\n          }\n        },\n        Vertical: {\n          Top: { type: Spacer, vertical: true }\n        }\n      },\n      Safe: {\n        alpha: 0.001,\n        Horizontal: {\n          Left: {\n            type: Spacer,\n            signals: {\n              spacerLoaded: '_update'\n            }\n          },\n          Right: {\n            type: Spacer,\n            signals: {\n              spacerLoaded: '_update'\n            }\n          }\n        },\n        Vertical: {\n          Top: { type: Spacer, vertical: true },\n          Bottom: { type: Spacer, vertical: true }\n        }\n      },\n      Gutters: {\n        alpha: 0.001,\n        Horizontal: {\n          type: Spacer,\n          signals: {\n            spacerLoaded: '_update'\n          }\n        }\n      },\n      TextPanel: {\n        alpha: 0.001,\n        type: Column,\n        autoResizeHeight: true,\n        Items: {\n          ScreenW: textRow,\n          ScreenH: textRow,\n          ColumnCount: textRow,\n          MarginX: textRow,\n          MarginY: textRow,\n          GutterX: textRow,\n          GutterY: textRow,\n          Safe: textRow\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return [\n      'showColumns',\n      'showMargins',\n      'showSafe',\n      'showGutters',\n      'showText'\n    ];\n  }\n\n  static get tags() {\n    return [\n      'Columns',\n      'Margins',\n      { name: 'MarginHorizontal', path: 'Margins.Horizontal' },\n      { name: 'MarginLeft', path: 'Margins.Horizontal.Left' },\n      { name: 'MarginRight', path: 'Margins.Horizontal.Right' },\n      { name: 'MarginVertical', path: 'Margins.Vertical' },\n      { name: 'MarginTop', path: 'Margins.Vertical.Top' },\n      'Safe',\n      { name: 'SafeHorizontal', path: 'Safe.Horizontal' },\n      { name: 'SafeLeft', path: 'Safe.Horizontal.Left' },\n      { name: 'SafeRight', path: 'Safe.Horizontal.Right' },\n      { name: 'SafeVertical', path: 'Safe.Vertical' },\n      { name: 'SafeTop', path: 'Safe.Vertical.Top' },\n      { name: 'SafeBottom', path: 'Safe.Vertical.Bottom' },\n      'Gutters',\n      { name: 'GutterHorizontal', path: 'Gutters.Horizontal' },\n      'TextPanel',\n      { name: 'TextScreenW', path: 'TextPanel.Items.ScreenW' },\n      { name: 'TextScreenH', path: 'TextPanel.Items.ScreenH' },\n      { name: 'TextColumnCount', path: 'TextPanel.Items.ColumnCount' },\n      { name: 'TextMarginX', path: 'TextPanel.Items.MarginX' },\n      { name: 'TextMarginY', path: 'TextPanel.Items.MarginY' },\n      { name: 'TextGutterX', path: 'TextPanel.Items.GutterX' },\n      { name: 'TextGutterY', path: 'TextPanel.Items.GutterY' },\n      { name: 'TextSafe', path: 'TextPanel.Items.Safe' }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this._showColumns =\n      this._showMargins =\n      this._showSafe =\n      this._showGutters =\n      this._showText =\n        true;\n  }\n\n  _update() {\n    this._updateGlobalThemeProps();\n    this._updateMargins();\n    this._updateSafe();\n    this._updateColumns();\n    this._updateGutters();\n    this._updateText();\n    this._updateVisibility();\n  }\n\n  _updateVisibility() {\n    this._Columns.smooth = { alpha: Number(this.showColumns) };\n    this._Margins.smooth = { alpha: Number(this.showMargins) };\n    this._Safe.smooth = { alpha: Number(this.showSafe) };\n    this._Gutters.smooth = { alpha: Number(this.showGutters) };\n    this._TextPanel.smooth = { alpha: Number(this.showText) };\n  }\n\n  _updateGlobalThemeProps() {\n    const { layout, color } = context.theme;\n    const {\n      screenW,\n      screenH,\n      columnCount,\n      marginX,\n      marginY,\n      gutterX,\n      gutterY,\n      safe\n    } = layout;\n\n    this._screenW = screenW;\n    this._screenH = screenH;\n    this._columnCount = columnCount;\n    this._marginX = marginX;\n    this._marginY = marginY;\n    this._safe = safe;\n    this._gutterX = gutterX;\n    this._gutterY = gutterY;\n\n    this._columnColor = color.interactiveNeutralFocusSoft;\n    this._marginColor = color.green;\n    this._safeColor = color.red;\n    this._gutterColor = color.blue;\n  }\n\n  _updateMargins() {\n    const marginPatch = { lineColor: this._marginColor };\n\n    // Horizontal\n    const marginHorizontalPatch = { ...marginPatch, w: this._marginX };\n    this._MarginHorizontal.y = this._screenH / 2;\n    this._MarginLeft.patch(marginHorizontalPatch);\n    this._MarginRight.patch(marginHorizontalPatch);\n    this._MarginRight.x = this._screenW - this._marginX;\n\n    // Vertical\n    const marginVerticalPatch = { ...marginPatch, w: this._marginY };\n    this._MarginVertical.x = this._marginX - marginVerticalPatch.w / 2;\n    this._MarginTop.patch(marginVerticalPatch);\n    this._MarginTop.patch(marginVerticalPatch);\n    this._MarginTop.y = marginVerticalPatch.w / 2;\n  }\n\n  _updateSafe() {\n    const safePatch = { lineColor: this._safeColor, w: this._safe };\n\n    // Horizontal\n    this._SafeHorizontal.y = this._screenH / 4;\n    this._SafeLeft.patch(safePatch);\n    this._SafeRight.patch(safePatch);\n    this._SafeRight.x = this._screenW - this._safe;\n\n    // Vertical\n    this._SafeVertical.x = (this._screenW - safePatch.w) / 2;\n    this._SafeVertical.y = safePatch.w / 2;\n    this._SafeTop.patch(safePatch);\n    this._SafeBottom.patch(safePatch);\n    this._SafeBottom.y = this._screenH - this._safe;\n  }\n\n  _updateColumns() {\n    this._Columns.patch({\n      w: this._screenW,\n      h: this._screenH,\n      x: this._marginX,\n      style: {\n        itemSpacing: this._gutterX\n      },\n      items: this._columnRects\n    });\n  }\n\n  get _columnRects() {\n    return Array.apply(null, { length: this._columnCount }).map(() => ({\n      rect: true,\n      w: getWidthByColumnSpan(this.theme, 1),\n      h: this._screenH,\n      color: this._columnColor\n    }));\n  }\n\n  _updateGutters() {\n    const gutterPatch = { lineColor: this._gutterColor, w: this._gutterY };\n\n    // Horizontal\n    this._GutterHorizontal.patch({\n      ...gutterPatch,\n      x: (this._screenW - gutterPatch.w) / 2,\n      y: this._screenH / 4\n    });\n  }\n\n  _updatePropertyTextStyle(textPanelName, color) {\n    // clone the object so as not to mutate it\n    const style = { textStyle: { ...this.style.propertyTextStyle } };\n    if (color) {\n      style.textStyle.textColor = color;\n    }\n    textPanelName.Items.tag('Property').style = style;\n  }\n\n  _updateValueTextStyle(textPanelName) {\n    textPanelName.Items.tag('Value').style = {\n      textStyle: this.style.valueTextStyle\n    };\n  }\n\n  _updateText() {\n    const prop = 'Property';\n    const val = 'Value';\n\n    this._TextPanel.x =\n      this._screenW - this._marginX - getWidthByColumnSpan(this.theme, 3);\n    this._TextPanel.y = this._safe;\n\n    this._TextScreenW.Items.tag(prop).content = 'Screen Width';\n    this._TextScreenW.Items.tag(val).content = `${this._screenW}px`;\n    this._updatePropertyTextStyle(this._TextScreenW);\n    this._updateValueTextStyle(this._TextScreenW);\n\n    this._TextScreenH.Items.tag(prop).content = 'Screen Height';\n    this._TextScreenH.Items.tag(val).content = `${this._screenH}px`;\n    this._updatePropertyTextStyle(this._TextScreenH);\n    this._updateValueTextStyle(this._TextScreenH);\n\n    this._TextColumnCount.Items.tag(prop).content = 'Columns';\n    this._TextColumnCount.Items.tag(val).content = `${\n      this._columnCount\n    }, ${Math.round(getWidthByColumnSpan(this.theme, 1))}px each`;\n    this._updatePropertyTextStyle(this._TextColumnCount);\n    this._updateValueTextStyle(this._TextColumnCount);\n\n    this._TextMarginX.Items.tag(prop).content = 'Margin-X';\n    this._TextMarginX.Items.tag(val).content = `${this._marginX}px`;\n    this._updatePropertyTextStyle(this._TextMarginX, this._marginColor);\n    this._updateValueTextStyle(this._TextMarginX);\n\n    this._TextMarginY.Items.tag(prop).content = 'Margin-Y';\n    this._TextMarginY.Items.tag(val).content = `${this._marginY}px`;\n    this._updatePropertyTextStyle(this._TextMarginY, this._marginColor);\n    this._updateValueTextStyle(this._TextMarginY);\n\n    this._TextGutterX.Items.tag(prop).content = 'Gutter-X';\n    this._TextGutterX.Items.tag(val).content = `${this._gutterX}px`;\n    this._updatePropertyTextStyle(this._TextGutterX, this._gutterColor);\n    this._updateValueTextStyle(this._TextGutterX);\n\n    this._TextGutterY.Items.tag(prop).content = 'Gutter-Y';\n    this._TextGutterY.Items.tag(val).content = `${this._gutterY}px`;\n    this._updatePropertyTextStyle(this._TextGutterY, this._gutterColor);\n    this._updateValueTextStyle(this._TextGutterY);\n\n    this._TextSafe.Items.tag(prop).content = 'Safe';\n    this._TextSafe.Items.tag(val).content = `${this._safe}px`;\n    this._updatePropertyTextStyle(this._TextSafe, this._safeColor);\n    this._updateValueTextStyle(this._TextSafe);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getWidthByUpCount } from '../../utils';\n\nexport const base = theme => ({\n  cursorStyle: {\n    textColor: theme.color.textNeutral,\n    blink: true,\n    width: theme.spacer.xs,\n    height: theme.spacer.xxl\n  },\n  eyebrowTextStyle: {\n    ...theme.typography.caption1,\n    maxLines: 1,\n    textColor: theme.color.textNeutral\n  },\n  textStyle: {\n    ...theme.typography.body1,\n    maxLines: 1,\n    textColor: theme.color.textNeutral\n  },\n  helpTextStyle: {\n    ...theme.typography.caption1,\n    maxLines: 1,\n    textColor: theme.color.textNeutralSecondary\n  },\n  minWidth: getWidthByUpCount(theme, 4),\n  paddingX: theme.spacer.xl,\n  paddingY: theme.spacer.xl,\n  backgroundColor: theme.color.interactiveNeutral\n});\n\nexport const mode = theme => ({\n  disabled: {\n    eyebrowTextStyle: { textColor: theme.color.textNeutralDisabled },\n    helpTextStyle: { textColor: theme.color.textNeutralDisabled }\n  },\n  focused: {\n    cursorStyle: { textColor: theme.color.textInverse },\n    eyebrowTextStyle: { textColor: theme.color.textNeutral },\n    helpTextStyle: { textColor: theme.color.textNeutralSecondary }\n  }\n});\n\nexport const tone = theme => ({\n  inverse: {\n    mode: {\n      focused: {\n        eyebrowTextStyle: { textColor: theme.color.textNeutral },\n        helpTextStyle: { textColor: theme.color.textNeutral }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './Input.styles';\nimport Button from '../Button';\nimport TextBox from '../TextBox';\n\nexport default class Input extends Button {\n  static get __componentName() {\n    return 'Input';\n  }\n  static get __themeStyle() {\n    return styles;\n  }\n  static _template() {\n    return {\n      ...super._template(),\n      Eyebrow: { type: TextBox },\n      HelpText: { type: TextBox }\n    };\n  }\n\n  static get properties() {\n    return [\n      ...super.properties,\n      'actualTitle',\n      'cursor',\n      'eyebrow',\n      'helpText',\n      'listening',\n      'mask',\n      'password',\n      'position'\n      // TODO: should maybe remove \"fixed\" as an editable prop to make sure this is never dynamic\n    ];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      'Eyebrow',\n      'HelpText',\n      { name: 'Cursor', path: 'Content.Cursor' },\n      { name: 'HiddenContent', path: 'Content.HiddenContent' }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this._title = '';\n    this.actualTitle = '';\n    this.position = this.title ? this.title.length : 0;\n    this._justify = 'left';\n    this._fixed = true;\n    this.w = this.style.minWidth;\n  }\n\n  $itemChanged() {\n    super.$itemChanged();\n    this._updateTextWrapper();\n    this._updateHiddenContent();\n    this._updateCursorPosition();\n    this._updateTitleScrollPosition();\n  }\n\n  _onTitleTextBoxChanged() {\n    this._updateHiddenContent();\n  }\n\n  _onHiddenTextBoxChanged() {\n    this._updateCursorPosition();\n  }\n\n  _update() {\n    this._updatePassword(); // need to update title masking before rendering the new title\n    super._update();\n\n    this._updateEyebrow();\n    this._updateHelpText();\n\n    this._updateTextWrapper();\n    this._updateHiddenContent();\n\n    this._updateCursor();\n    this._updateCursorListening();\n    this._updateCursorBlink();\n    this._updateCursorPosition();\n\n    this._updateTitleScrollPosition();\n  }\n\n  _updatePassword() {\n    this.title = this.password\n      ? this.mask.repeat(this.actualTitle.length)\n      : this.actualTitle;\n  }\n\n  _updateTruncation() {\n    // do not add word wrap\n    if (this._Title) {\n      this._Title.patch({\n        style: { textStyle: { ...this.style.textStyle, wordWrap: false } }\n      });\n    }\n  }\n\n  _updateEyebrow() {\n    this._Eyebrow.patch({\n      content: this.eyebrow,\n      style: { textStyle: this.style.eyebrowTextStyle },\n      mountY: 1,\n      x: this.style.paddingX,\n      y: this.y - this.style.paddingY\n    });\n  }\n\n  _updateHelpText() {\n    this._HelpText.patch({\n      content: this.helpText,\n      style: { textStyle: this.style.helpTextStyle },\n      x: this.style.paddingX,\n      y: this.y + this.innerH + this.style.paddingY\n    });\n  }\n\n  _updateTextWrapper() {\n    this._TextWrapper.clipping = true;\n    this._TextWrapper.w = this._visibleContentWidth;\n    if (this._Title) {\n      this._TextWrapper.h = this._Title.h;\n    }\n  }\n\n  _updateHiddenContent() {\n    /**\n     * Hidden value is used for measuring where the cursor should\n     * be positioned when a user changes the cursor position. Since\n     * the text is one texture we don't know the exact position of each\n     * individual character, so we render a substring version of the text\n     * to determine the render width and position the cursor based on that number\n     */\n    if (!this._HiddenContent) {\n      this._Content.patch({\n        HiddenContent: {\n          type: TextBox,\n          mountY: 0.5,\n          y: h => h / 2,\n          signals: {\n            textBoxChanged: '_onHiddenTextBoxChanged'\n          }\n        }\n      });\n    }\n\n    const { title: value = '', position, password, mask } = this;\n\n    const textBeforeCursor = password\n      ? mask.repeat(value.length).substring(0, position)\n      : value.substring(0, position);\n\n    this._HiddenContent.patch({\n      style: { textStyle: this.style.textStyle },\n      content: textBeforeCursor\n    });\n\n    this._HiddenContent._Text &&\n      this._HiddenContent._Text.patch({ alpha: 0.001 });\n  }\n\n  _updateCursor() {\n    if (this.style.cursorStyle && this.style.cursorStyle.blink) {\n      if (!this._Cursor) {\n        this._Content.patch({\n          Cursor: {\n            rect: true,\n            mountY: 0.5\n          }\n        });\n        this.cursorBlink = this._Cursor.animation({\n          duration: 1.5,\n          repeat: -1,\n          actions: [{ p: 'alpha', v: { 0: 0, 0.5: 1, 1: 0 } }]\n        });\n      }\n      this._Cursor.patch(this.style.cursorStyle);\n    }\n  }\n\n  _updateCursorListening() {\n    if (!this._isDisabledMode) {\n      if (this.cursorBlink && !this.cursorBlink.isPlaying()) {\n        this.cursorBlink.start();\n      }\n    } else {\n      if (this.cursorBlink)\n        this.isCursorActive\n          ? this.cursorBlink.start()\n          : this.cursorBlink.stop();\n    }\n    this._Cursor.smooth = {\n      color: this.style.cursorStyle.textColor\n    };\n  }\n\n  _updateCursorBlink() {\n    if (this.cursorBlink) {\n      if (this.isCursorActive) {\n        this.cursorBlink.start();\n      } else {\n        this.cursorBlink.stop();\n        this._Cursor.patch({ alpha: 0.001 });\n      }\n    }\n  }\n\n  _updateCursorPosition() {\n    this._Cursor.x =\n      this._titleX +\n      (this._isOverflow ? this._TextWrapper.w : this._HiddenContent.w);\n  }\n\n  _updateTitleScrollPosition() {\n    if (this._Title) {\n      this._Title.x = this._isOverflow\n        ? this._visibleContentWidth - this._HiddenContent.w\n        : 0;\n      if (this._HiddenContent && this._TextWrapper) {\n        this._HiddenContent.x = this._TextWrapper.x + this._Title.x;\n      }\n    }\n  }\n\n  get _suffixX() {\n    const suffixX = this._hasPrefix\n      ? this.w - this._paddingLeft - this._paddingRight - this._prefixW\n      : this.w - this._paddingLeft - this._paddingRight - this.style.paddingX;\n    return suffixX > 0 ? suffixX : 0;\n  }\n\n  get isCursorActive() {\n    return this.listening && (this._isFocusedMode || this._isUnfocusedMode);\n  }\n\n  get _isOverflow() {\n    return this._HiddenContent.w > this._visibleContentWidth;\n  }\n\n  get _visibleContentWidth() {\n    return this._fixedWordWrapWidth;\n  }\n\n  set value(value) {\n    this.title = this.actualTitle = value;\n    this.position = 0;\n    this._updatePassword();\n  }\n\n  get value() {\n    return this.actualTitle;\n  }\n\n  clear() {\n    if (this.isCursorActive) {\n      this.title = this.actualTitle = '';\n      this.position = 0;\n    }\n  }\n\n  insert(content) {\n    if (this.isCursorActive) {\n      this.actualTitle =\n        this.actualTitle.slice(0, this.position) +\n        content +\n        this.actualTitle.slice(this.position);\n      this._updatePassword();\n      this.position += content.length;\n    }\n  }\n\n  backspace() {\n    if (this.isCursorActive && this.position > 0) {\n      this.actualTitle =\n        this.actualTitle.slice(0, this.position - 1) +\n        this.actualTitle.slice(this.position);\n      this._updatePassword();\n      this.position--;\n    }\n  }\n\n  _handleLeft() {\n    if (this._isDisabledMode) {\n      return false;\n    }\n    this.moveLeft();\n    if (typeof this.onLeft === 'function') {\n      return this.onLeft(this);\n    }\n    return true;\n  }\n\n  _handleRight() {\n    if (this._isDisabledMode) {\n      return false;\n    }\n    this.moveRight();\n    if (typeof this.onRight === 'function') {\n      return this.onRight(this);\n    }\n    return true;\n  }\n\n  moveLeft() {\n    const { position } = this;\n    if (position >= 0) {\n      this.position--;\n      return true;\n    }\n    return false;\n  }\n\n  moveRight() {\n    const { position, title } = this;\n    if (position < title.length) {\n      this.position++;\n      return true;\n    }\n    return false;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    // TODO - Localization?\n    // Do we need a locale file with\n    // component translations?\n    // need to check with Accessibility on what order this should read out in\n    if (this.password) {\n      return [this.eyebrow, this.helpText];\n    } else {\n      return [this.eyebrow, 'Input: ' + this.title, this.helpText];\n    }\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const textStyle = theme.typography.headline2;\n  return {\n    height: theme.spacer.md * 9,\n    minWidth: theme.spacer.md * 7,\n    paddingX: theme.spacer.md,\n    textStyle,\n    sizes: {\n      sm: 1,\n      md: 2,\n      lg: 3,\n      xl: 4,\n      xxl: 5\n    },\n    baseWidth: theme.spacer.md * 7,\n    iconWidth: textStyle.lineHeight,\n    iconHeight: textStyle.lineHeight\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Button from '../Button';\nimport * as styles from './Key.styles';\nimport Icon from '../Icon';\n\nconst isUpperCase = string => /^[A-Z]$/.test(string);\nconst isAlphaChar = string => /^[A-Za-z]$/.test(string);\n\n// TODO: Post theming when we address language/locale issues this could be a configurable object\nconst alphaNato = {\n  a: 'alpha',\n  b: 'bravo',\n  c: 'charlie',\n  d: 'delta',\n  e: 'echo',\n  f: 'foxtrot',\n  g: 'golf',\n  h: 'hotel',\n  i: 'india',\n  j: 'juliett',\n  k: 'kilo',\n  l: 'lima',\n  m: 'mike',\n  n: 'november',\n  o: 'oscar',\n  p: 'papa',\n  q: 'quebec',\n  r: 'romeo',\n  s: 'sierra',\n  t: 'tango',\n  u: 'uniform',\n  v: 'victor',\n  w: 'whiskey',\n  x: 'x-ray',\n  y: 'yankee',\n  z: 'zulu'\n};\n\nfunction getNato(title) {\n  if (isAlphaChar(title)) {\n    return `${title}, ${alphaNato[title.toLowerCase()]}`;\n  }\n\n  return title;\n}\n\nexport default class Key extends Button {\n  static get __componentName() {\n    return 'Key';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'icon', 'size', 'toggle', 'keySpacing'];\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'iconH', curr: 'iconHeight' },\n      { prev: 'iconW', curr: 'iconWidth' }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this._size = 'sm';\n    this._keySpacing = 0;\n  }\n\n  _update() {\n    this._updatePrefixStyle();\n    super._update();\n  }\n\n  _calcDynamicWidth() {\n    const sizeMultiplier = this.style.sizes[this.size || 'sm'];\n    const baseSize = this.style.baseWidth * sizeMultiplier;\n    const padding = this.keySpacing * (sizeMultiplier - 1);\n    return baseSize + padding;\n  }\n\n  _updatePrefixStyle() {\n    if (this._prefix && this.icon) {\n      this._updatePrefixObj(this.icon, { style: this.style.iconStyle });\n    }\n  }\n\n  _updatePrefixObj(icon, props = {}) {\n    this._prefix = {\n      type: Icon,\n      icon,\n      w: this.style.iconWidth,\n      h: this.style.iconHeight,\n      ...props\n    };\n  }\n\n  _setIcon(icon) {\n    if (icon) {\n      this._updatePrefixObj(icon, { style: this.style.iconStyle });\n    } else {\n      this._prefix = icon;\n    }\n\n    return icon;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    if (isUpperCase(this.title)) {\n      return `Capital ${getNato(this.title)}, button`;\n    }\n\n    return getNato(this.title) + ', button';\n  }\n\n  _handleEnter() {\n    if (typeof this.onEnter === 'function') {\n      return this.onEnter(this);\n    } else {\n      if (this.toggle) {\n        this.fireAncestors('$toggleKeyboard', this.toggle);\n      }\n      this.fireAncestors('$onSoftKey', {\n        key: this.keyId || this.title,\n        toggle: this.toggle\n      });\n    }\n\n    return false;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  return {\n    keySpacing: theme.spacer.md,\n    screenW: theme.layout.screenW,\n    marginX: theme.layout.marginX,\n    inputSpacing: theme.spacer.md * 10 + theme.spacer.md,\n    inputStyle: { radius: theme.radius.md }\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../../globals/context/index';\nimport Base from '../Base';\nimport Key from '../Key';\nimport Row from '../Row';\nimport Column from '../Column';\nimport * as styles from './Keyboard.styles';\n\nconst capitalize = string => string.charAt(0).toUpperCase() + string.slice(1);\n\nexport default class Keyboard extends Base {\n  static get __componentName() {\n    return 'Keyboard';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [\n      'formats',\n      'centerKeyboard',\n      'rowWrap',\n      'centerKeys',\n      'keyComponent'\n    ];\n  }\n\n  _init() {\n    this._setShouldUpdateThemeBound = this._setShouldUpdateTheme.bind(this);\n    context.on('themeUpdate', this._setShouldUpdateThemeBound);\n    super._init();\n  }\n\n  _setShouldUpdateTheme() {\n    this.shouldUpdateTheme = true;\n  }\n\n  _detach() {\n    super._detach();\n    context.off('themeUpdate', this._setShouldUpdateThemeBound);\n  }\n\n  _focus() {\n    super._focus();\n    this.fireAncestors('$keyboardFocused', true);\n  }\n\n  _getFocused() {\n    return this._currentKeyboard || this;\n  }\n\n  _update() {\n    if (!this._currentFormat || this._shouldUpdateKeyboards) {\n      this._currentFormat = this.defaultFormat;\n    }\n    if (this.centerKeyboard) {\n      this.x = this.centeredXPos;\n    } else if (this.x === this.centeredXPos && !this.centerKeyboard) {\n      // if the keyboard was centered before but now should not be\n      this.x = 0;\n    } else {\n      this.x == null && (this.x = 0); // if x is undefined or null set it to 0, otherwise do not overwrite x pos\n    }\n    this._shouldUpdateKeyboards && this._createKeyboardsFromFormats();\n    this._formatKeys();\n  }\n\n  _createKeyboardsFromFormats() {\n    this.childList.clear(); // if new formats patched in, remove keyboards created from the previous formats\n    Object.keys(this.formats).forEach(key => {\n      const format = this.formats[key];\n      if (format) {\n        const keyboardData = this._formatKeyboardData(format);\n        this._createKeyboard(key, this._createRows(keyboardData, key));\n      }\n    });\n    this._formatsChanged = false;\n  }\n\n  _createKeyboard(key, rows = []) {\n    key = capitalize(key);\n    if (rows.length === 1) {\n      this.patch({ [key]: rows[0] });\n    } else {\n      this.patch({\n        [key]: {\n          type: Column,\n          plinko: true,\n          items: rows,\n          style: {\n            itemSpacing: this.style.keySpacing\n          },\n          autoResizeWidth: true,\n          autoResizeHeight: true,\n          neverScroll: true,\n          alpha: key === capitalize(this._currentFormat) ? 1 : 0.001\n        }\n      });\n    }\n  }\n\n  _createRows(rows = [], keyboard) {\n    return rows.map(keys => {\n      return {\n        type: Row,\n        autoResizeHeight: true,\n        autoResizeWidth: true,\n        centerInParent: this.centerKeys,\n        neverScroll: true,\n        wrapSelected: this.rowWrap !== undefined ? this.rowWrap : true,\n        style: {\n          itemSpacing: this.style.keySpacing\n        },\n        items: this._createKeys(keys, keyboard),\n        selectedIndex: this._currentKeyboard?.selected?.selectedIndex || 0\n      };\n    });\n  }\n\n  _createKeys(keys = [], keyboard) {\n    return keys.map(keyProps => {\n      if (!keyProps) {\n        return {\n          type: this.keyComponent || Key, // allows use of a custom Key component if specified\n          keySpacing: this.style.keySpacing,\n          skipFocus: true,\n          alpha: 0.01\n        };\n      }\n\n      const key = {\n        type: this.keyComponent || Key, // allows use of a custom Key component if specified\n        keySpacing: this.style.keySpacing\n      };\n\n      if (typeof keyProps === 'object') {\n        // keyId is used to account for style overrides on individual keys,\n        // icon updates, and localization\n        const keyName = keyProps.keyId || keyProps.title;\n        const keyOverrides =\n          this.style.keyProps?.[keyboard]?.[keyName] ||\n          this.style.keyProps?.[keyName] ||\n          {};\n        const keyPatch = { ...key, ...keyProps, ...keyOverrides };\n\n        if (keyOverrides?.icon) {\n          keyPatch.style = {\n            ...keyOverrides.style,\n            iconStyle: {\n              ...keyOverrides.iconStyle\n            }\n          };\n        }\n        return keyPatch;\n      }\n      return { ...key, title: keyProps };\n    });\n  }\n\n  _formatKeyboardData(data = []) {\n    if (Array.isArray(data) && data.length) {\n      if (!Array.isArray(data[0]) && !this.inline) {\n        const keyRows = [];\n        let idx, counter;\n        for (idx = 0, counter = -1; idx < data.length; idx++) {\n          if (idx % this.columnCount === 0) {\n            counter++;\n            keyRows[counter] = [];\n          }\n          keyRows[counter].push(data[idx]);\n        }\n        return keyRows; // TODO: Swap to a reduce\n      } else if (this.inline) {\n        return [data];\n      }\n      return data;\n    }\n  }\n\n  _formatKeys() {\n    Object.keys(this.formats).forEach(format => {\n      const element = this.tag(capitalize(format));\n      if (element) {\n        element.patch({\n          alpha: format === this._currentFormat ? 1 : 0.001,\n          style: {\n            itemSpacing: this.style.keySpacing\n          }\n        });\n        element.items.forEach(row => {\n          row.patch({\n            style: {\n              itemSpacing: this.style.keySpacing\n            },\n            centerInParent: this.centerKeys,\n            wrapSelected: this.rowWrap !== undefined ? this.rowWrap : true\n          });\n        });\n        // force Column to recalculate rows from the centerKeyboard toggle\n        element.queueRequestUpdate();\n      }\n    });\n  }\n\n  $toggleKeyboard(next) {\n    const nextKeyboard = capitalize(next);\n    if (next !== this._currentFormat) {\n      const nextKeyboardTag = this.tag(nextKeyboard);\n\n      this.selectKeyOn(nextKeyboardTag);\n      this._currentKeyboard.alpha = 0.001;\n      nextKeyboardTag.alpha = 1;\n      this._currentFormat = next;\n    }\n  }\n\n  selectKeyOn(keyboard, { row, column } = this.getSelectedKey()) {\n    if (keyboard && keyboard.constructor) {\n      const type = keyboard.constructor.name;\n      if (type === 'Row') {\n        keyboard.selectedIndex = column;\n      } else {\n        keyboard.selectedIndex = row;\n        keyboard.selected.selectedIndex = column;\n      }\n    }\n  }\n\n  getSelectedKey() {\n    let row, column;\n    const keyboard = this._currentKeyboard;\n    const type = keyboard.constructor.name;\n    if (type === 'Row') {\n      row = 0;\n      column = keyboard.selectedIndex;\n    } else {\n      row = keyboard.selectedIndex;\n      column = keyboard.selected.selectedIndex;\n    }\n    return { row, column };\n  }\n\n  $itemChanged() {\n    this.w = this._currentKeyboard.w;\n    this.fireAncestors('$itemChanged');\n    this.signal('keyboardWidthChanged');\n  }\n\n  _setFormats(formats = {}) {\n    this._formatsChanged = true;\n    return formats;\n  }\n\n  get centeredXPos() {\n    return (this.style.screenW - this.w) / 2 - this.style.marginX;\n  }\n\n  get _shouldUpdateKeyboards() {\n    return this.shouldUpdateTheme || this._formatsChanged;\n  }\n\n  set defaultFormat(format) {\n    this._defaultFormat = format;\n  }\n\n  get defaultFormat() {\n    return this._defaultFormat || Object.keys(this.formats)[0];\n  }\n\n  get _currentKeyboard() {\n    return this._currentFormat\n      ? this.tag(capitalize(this._currentFormat))\n      : null;\n  }\n\n  set columnCount(columnCount) {\n    this._columnCount = columnCount;\n  }\n\n  get columnCount() {\n    if (this._columnCount) return this._columnCount;\n    if (this.rowCount)\n      return (\n        this.formats[this.defaultFormat.toLowerCase()].length / this.rowCount\n      );\n    if (this.inline)\n      return this.formats[this.defaultFormat.toLowerCase()].length;\n    else return 11; // TODO: Remove this hard-coded number?\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n    return 'Keyboard' + (this.title ? `, ${this.title}` : '');\n  }\n\n  set announceContext(announceContext) {\n    super.announceContext = announceContext;\n  }\n\n  get announceContext() {\n    return (\n      this._announceContext || [\n        'PAUSE-2',\n        'Use arrow keys to choose characters, press center to select'\n      ]\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardEmail extends Keyboard {\n  static get __componentName() {\n    return 'KeyboardEmail';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _construct() {\n    super._construct();\n    this.formats = this.emailFormat;\n  }\n\n  get emailFormat() {\n    return {\n      uppercase: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'Q',\n          'W',\n          'E',\n          'R',\n          'T',\n          'Y',\n          'U',\n          'I',\n          'O',\n          'P',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'A',\n          'S',\n          'D',\n          'F',\n          'G',\n          'H',\n          'J',\n          'K',\n          'L',\n          '@',\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          'Z',\n          'X',\n          'C',\n          'V',\n          'B',\n          'N',\n          'M',\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          { title: '_', announce: 'underscore, button' },\n          {\n            title: 'shift',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          { title: '.com', announce: 'dot, com', size: 'md' },\n          { title: '.net', announce: 'dot, net', size: 'md' },\n          { title: '.edu', announce: 'dot, edu', size: 'md' },\n          { title: '.org', announce: 'dot, org', size: 'md' },\n          { title: '.co', announce: 'dot, co', size: 'md' },\n          { title: '.uk', announce: 'dot, uk', size: 'md' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      lowercase: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'q',\n          'w',\n          'e',\n          'r',\n          't',\n          'y',\n          'u',\n          'i',\n          'o',\n          'p',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'a',\n          's',\n          'd',\n          'f',\n          'g',\n          'h',\n          'j',\n          'k',\n          'l',\n          '@',\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          'z',\n          'x',\n          'c',\n          'v',\n          'b',\n          'n',\n          'm',\n          { title: '_', announce: 'underscore, button' },\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          {\n            title: 'shift',\n            size: 'md',\n            toggle: 'uppercase',\n            announce: 'shift on, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          { title: '.com', announce: 'dot, com', size: 'md' },\n          { title: '.net', announce: 'dot, net', size: 'md' },\n          { title: '.edu', announce: 'dot, edu', size: 'md' },\n          { title: '.org', announce: 'dot, org', size: 'md' },\n          { title: '.co', announce: 'dot, co', size: 'md' },\n          { title: '.uk', announce: 'dot, uk', size: 'md' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      accents: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'ä',\n          'ë',\n          'ï',\n          'ö',\n          'ü',\n          'ÿ',\n          'à',\n          'è',\n          'ì',\n          'ò',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'ù',\n          'á',\n          'é',\n          'í',\n          'ó',\n          'ú',\n          'ý',\n          'â',\n          'ê',\n          '@',\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          'î',\n          'ô',\n          'û',\n          'ã',\n          'ñ',\n          { title: '_', announce: 'underscore, button' },\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          {\n            title: 'shift',\n            size: 'xl',\n            toggle: 'accentsUpper',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          { title: '.com', announce: 'dot, com', size: 'md' },\n          { title: '.net', announce: 'dot, net', size: 'md' },\n          { title: '.edu', announce: 'dot, edu', size: 'md' },\n          { title: '.org', announce: 'dot, org', size: 'md' },\n          { title: '.co', announce: 'dot, co', size: 'md' },\n          { title: '.uk', announce: 'dot, uk', size: 'md' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      accentsUpper: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'Ä',\n          'Ë',\n          'Ï',\n          'Ö',\n          'Ü',\n          'Ÿ',\n          'À',\n          'È',\n          'Ì',\n          'Ò',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'Ù',\n          'Á',\n          'É',\n          'Í',\n          'Ó',\n          'Ú',\n          'Ý',\n          'Â',\n          'Ê',\n          '@',\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          'Î',\n          'Ô',\n          'Û',\n          'Ã',\n          'Ñ',\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          { title: '_', announce: 'underscore, button' },\n          {\n            title: 'shift',\n            size: 'xl',\n            toggle: 'accents',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          { title: '.com', announce: 'dot, com', size: 'md' },\n          { title: '.net', announce: 'dot, net', size: 'md' },\n          { title: '.edu', announce: 'dot, edu', size: 'md' },\n          { title: '.org', announce: 'dot, org', size: 'md' },\n          { title: '.co', announce: 'dot, co', size: 'md' },\n          { title: '.uk', announce: 'dot, uk', size: 'md' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      symbols: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          { title: '!', announce: 'exclamation, button' },\n          '@',\n          '#',\n          '$',\n          '%',\n          { title: '^', announce: 'caret circumflex, button' },\n          '&',\n          '*',\n          { title: '(', announce: 'open parenthesis, button' },\n          { title: ')', announce: 'close parenthesis, button' },\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          { title: '{', announce: 'open brace, button' },\n          { title: '}', announce: 'close brace, button' },\n          { title: '[', announce: 'open bracket, button' },\n          { title: ']', announce: 'close bracket, button' },\n          { title: ';', announce: 'semicolon, button' },\n          { title: '\"', announce: 'doublequote, button' },\n          { title: ',', announce: 'comma, button' },\n          { title: '|', announce: 'vertical bar, button' },\n          { title: '\\\\', announce: 'backslash, button' },\n          { title: '/', announce: 'forwardslash, button' },\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          { title: '<', announce: 'less than, button' },\n          { title: '>', announce: 'greater than, button' },\n          { title: '?', announce: 'question mark, button' },\n          { title: '=', announce: 'equal sign, button' },\n          { title: '`', announce: 'grave accent, button' },\n          { title: '~', announce: 'tilde, button' },\n          { title: '_', announce: 'underscore, button' },\n          { title: ':', announce: 'colon, button' },\n          { title: '-', announce: 'dash, button' },\n          { title: '+', announce: 'plus sign, button' }\n        ],\n        [\n          { title: '.com', announce: 'dot, com', size: 'md' },\n          { title: '.net', announce: 'dot, net', size: 'md' },\n          { title: '.edu', announce: 'dot, edu', size: 'md' },\n          { title: '.org', announce: 'dot, org', size: 'md' },\n          { title: '.co', announce: 'dot, co', size: 'md' },\n          { title: '.uk', announce: 'dot, uk', size: 'md' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ]\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardFullScreen extends Keyboard {\n  static get __componentName() {\n    return 'KeyboardFullScreen';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _construct() {\n    super._construct();\n    this.formats = this.fullscreenFormat;\n  }\n\n  get fullscreenFormat() {\n    return {\n      letters: [\n        [\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          {\n            title: '#@!',\n            size: 'lg',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          },\n          {\n            title: 'Space',\n            size: 'lg',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          },\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          ''\n        ],\n        [\n          'A',\n          'B',\n          'C',\n          'D',\n          'E',\n          'F',\n          'G',\n          'H',\n          'I',\n          'J',\n          'K',\n          'L',\n          'M',\n          'N',\n          'O',\n          'P',\n          'Q',\n          'R',\n          'S',\n          'T',\n          'U',\n          'V',\n          'W',\n          'X',\n          'Y',\n          'Z'\n        ]\n      ],\n      symbols: [\n        [\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          {\n            title: 'ABC',\n            size: 'lg',\n            toggle: 'letters',\n            announce: 'caps on, button'\n          },\n          {\n            title: 'Space',\n            size: 'lg',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          },\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          ''\n        ],\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          { title: '!', announce: 'exclamation, button' },\n          '@',\n          '#',\n          '$',\n          '%',\n          { title: '^', announce: 'caret circumflex, button' },\n          '&',\n          '*',\n          { title: '(', announce: 'open parenthesis, button' },\n          { title: ')', announce: 'close parenthesis, button' },\n          { title: '`', announce: 'grave accent, button' },\n          '~',\n          '_',\n          '.',\n          '-',\n          '+'\n        ]\n      ]\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardNumbers extends Keyboard {\n  static get __componentName() {\n    return 'KeyboardNumbers';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _construct() {\n    super._construct();\n    this.formats = this.numbersFormat;\n  }\n\n  get numbersFormat() {\n    return {\n      numbers: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\n      dialpad: [['1', '2', '3'], ['4', '5', '6'], ['7', '8', '9'], ['0']],\n      dialpadExtended: [\n        ['1', '2', '3'],\n        ['4', '5', '6'],\n        ['7', '8', '9'],\n        [\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ]\n      ]\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardQwerty extends Keyboard {\n  static get __componentName() {\n    return 'KeyboardQwerty';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _construct() {\n    super._construct();\n    this.formats = this.qwertyFormat;\n  }\n\n  get qwertyFormat() {\n    return {\n      uppercase: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'Q',\n          'W',\n          'E',\n          'R',\n          'T',\n          'Y',\n          'U',\n          'I',\n          'O',\n          'P',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'A',\n          'S',\n          'D',\n          'F',\n          'G',\n          'H',\n          'J',\n          'K',\n          'L',\n          '@',\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          'Z',\n          'X',\n          'C',\n          'V',\n          'B',\n          'N',\n          'M',\n          { title: '_', announce: 'underscore, button' },\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          {\n            title: 'shift',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      lowercase: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'q',\n          'w',\n          'e',\n          'r',\n          't',\n          'y',\n          'u',\n          'i',\n          'o',\n          'p',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'a',\n          's',\n          'd',\n          'f',\n          'g',\n          'h',\n          'j',\n          'k',\n          'l',\n          '@',\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          'z',\n          'x',\n          'c',\n          'v',\n          'b',\n          'n',\n          'm',\n          { title: '_', announce: 'underscore, button' },\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          {\n            title: 'shift',\n            size: 'md',\n            toggle: 'uppercase',\n            announce: 'shift on, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      accents: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'ä',\n          'ë',\n          'ï',\n          'ö',\n          'ü',\n          'ÿ',\n          'à',\n          'è',\n          'ì',\n          'ò',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'ù',\n          'á',\n          'é',\n          'í',\n          'ó',\n          'ú',\n          'ý',\n          'â',\n          'ê',\n          '@',\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          'î',\n          'ô',\n          'û',\n          'ã',\n          'ñ',\n          { title: '_', announce: 'underscore, button' },\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          {\n            title: 'shift',\n            size: 'xl',\n            toggle: 'accentsUpper',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      accentsUpper: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'Ä',\n          'Ë',\n          'Ï',\n          'Ö',\n          'Ü',\n          'Ÿ',\n          'À',\n          'È',\n          'Ì',\n          'Ò',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'Ù',\n          'Á',\n          'É',\n          'Í',\n          'Ó',\n          'Ú',\n          'Ý',\n          'Â',\n          'Ê',\n          '@',\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          'Î',\n          'Ô',\n          'Û',\n          'Ã',\n          'Ñ',\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          { title: '_', announce: 'underscore, button' },\n          {\n            title: 'shift',\n            size: 'xl',\n            toggle: 'accents',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      symbols: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          { title: '!', announce: 'exclamation, button' },\n          '@',\n          '#',\n          '$',\n          '%',\n          { title: '^', announce: 'caret circumflex, button' },\n          '&',\n          '*',\n          { title: '(', announce: 'open parenthesis, button' },\n          { title: ')', announce: 'close parenthesis, button' },\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          { title: '{', announce: 'open brace, button' },\n          { title: '}', announce: 'close brace, button' },\n          { title: '[', announce: 'open bracket, button' },\n          { title: ']', announce: 'close bracket, button' },\n          { title: ';', announce: 'semicolon, button' },\n          { title: '\"', announce: 'doublequote, button' },\n          { title: ',', announce: 'comma, button' },\n          { title: '|', announce: 'vertical bar, button' },\n          { title: '\\\\', announce: 'backslash, button' },\n          { title: '/', announce: 'forwardslash, button' },\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          { title: '<', announce: 'less than, button' },\n          { title: '>', announce: 'greater than, button' },\n          { title: '?', announce: 'question mark, button' },\n          { title: '=', announce: 'equal sign, button' },\n          { title: '`', announce: 'grave accent, button' },\n          { title: '~', announce: 'tilde, button' },\n          { title: '_', announce: 'underscore, button' },\n          { title: ':', announce: 'colon, button' },\n          { title: '-', announce: 'dash, button' },\n          { title: '+', announce: 'plus sign, button' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ]\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport Input from '../Input';\nimport Base from '../Base';\nimport Column from '../Column';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardInput extends Base {\n  static get __componentName() {\n    return 'KeyboardInput';\n  }\n\n  static get properties() {\n    return [\n      'centerKeyboard',\n      'defaultFormat',\n      'input', // this should hold all the props passed from Input\n      'keyboardType'\n    ];\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      Wrapper: {\n        type: Column,\n        neverScroll: true,\n        w: this.w,\n        items: [\n          {\n            type: Input,\n            ref: 'Input'\n          },\n          {\n            type: Keyboard,\n            ref: 'Keyboard',\n            passSignals: {\n              keyboardWidthChanged: true\n            }\n          }\n        ],\n        selectedIndex: 1,\n        signals: {\n          keyboardWidthChanged: '_updateWidth'\n        }\n      }\n    };\n  }\n\n  static get tags() {\n    return [\n      'Wrapper',\n      { name: 'Input', path: 'Wrapper.Input' },\n      { name: 'Keyboard', path: 'Wrapper.Keyboard' }\n    ];\n  }\n\n  _update() {\n    this._Wrapper.style.itemSpacing = this.style.inputSpacing;\n    this._updateKeyboardType();\n    this._updateInput();\n    this._updateKeyboard();\n    this._updateCenterKeyboard();\n  }\n\n  _updateKeyboardType() {\n    if (this._Keyboard.constructor !== this.keyboardType) {\n      this._Wrapper._resetItems();\n      this._Wrapper.items = [\n        {\n          type: Input,\n          ref: 'Input'\n        },\n        {\n          type: this.keyboardType,\n          ref: 'Keyboard',\n          passSignals: {\n            keyboardWidthChanged: true\n          }\n        }\n      ];\n    }\n  }\n\n  _updateInput() {\n    this._Input.patch({\n      ...this.input,\n      centerInParent: this.centerKeyboard,\n      w: this._Keyboard.w,\n      style: { ...this.style.inputStyle }, // allows overriding of input styles\n      listening: this._isFocusedMode\n    });\n  }\n\n  _updateKeyboard() {\n    this._Keyboard.patch({\n      defaultFormat: this.defaultFormat || 'lowercase',\n      centerKeyboard: this.centerKeyboard\n    });\n  }\n\n  // updates width of Wrapper and Input to match keyboard width\n  _updateWidth() {\n    this._Input.w = this.w = this._Keyboard.w;\n    this.fireAncestors('$itemChanged');\n  }\n\n  _updateCenterKeyboard() {\n    if (this.centerKeyboard) {\n      this.x = (this.style.screenW - this.w) / 2 - this.style.marginX;\n    } else {\n      this.x = 0;\n    }\n  }\n\n  $onSoftKey({ key = '', toggle }) {\n    if (toggle) {\n      return;\n    }\n\n    switch (key.toLowerCase()) {\n      case 'delete':\n        this._Input.backspace();\n        break;\n      case 'done':\n        break;\n      case 'space':\n        this._Input.insert(' ');\n        break;\n      case 'clear':\n        this._Input.clear();\n        break;\n      default:\n        this._Input.insert(key);\n    }\n  }\n\n  $keyboardFocused(focus) {\n    if (focus) {\n      this._Input.listening = true;\n    } else {\n      this._Input.listening = false;\n    }\n  }\n\n  _getFocused() {\n    return this._Wrapper || this;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardSearch extends Keyboard {\n  static get __componentName() {\n    return 'KeyboardSearch';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _construct() {\n    super._construct();\n    this.formats = this.searchFormat;\n  }\n\n  get searchFormat() {\n    return {\n      uppercase: [\n        ['A', 'B', 'C', 'D', 'E', 'F'],\n        ['G', 'H', 'I', 'J', 'K', 'L'],\n        ['M', 'N', 'O', 'P', 'Q', 'R'],\n        ['S', 'T', 'U', 'V', 'W', 'X'],\n        [\n          'Y',\n          'Z',\n          { title: '1', keyId: 'number' },\n          { title: '2', keyId: 'number' },\n          { title: '3', keyId: 'number' },\n          { title: '4', keyId: 'number' }\n        ],\n        [\n          { title: '5', keyId: 'number' },\n          { title: '6', keyId: 'number' },\n          { title: '7', keyId: 'number' },\n          { title: '8', keyId: 'number' },\n          { title: '9', keyId: 'number' },\n          { title: '0', keyId: 'number' }\n        ],\n        [\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ]\n      ]\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const size = theme.spacer.lg;\n  return {\n    width: size,\n    height: size,\n    radius: size / 2\n  };\n};\n\nexport const tone = theme => ({\n  neutral: {\n    circleColor: theme.color.interactiveNeutralFocus,\n    mode: {\n      disabled: {\n        circleColor: theme.color.fillNeutralDisabled\n      }\n    }\n  },\n  inverse: {\n    circleColor: theme.color.interactiveInverseFocus,\n    mode: {\n      disabled: {\n        circleColor: theme.color.fillInverseDisabled\n      }\n    }\n  },\n  brand: {\n    circleColor: theme.color.interactiveBrandFocus,\n    mode: {\n      disabled: {\n        circleColor: theme.color.fillInverseDisabled\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getMaxRoundRadius } from '../../utils';\nimport Base from '../Base';\nimport * as styles from './Knob.styles';\nimport lng from '@lightningjs/core';\n\nexport default class Knob extends Base {\n  static get __componentName() {\n    return 'Knob';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      mount: 0.5\n    };\n  }\n\n  _update() {\n    this._updateLayout();\n  }\n\n  _updateLayout() {\n    this.patch({\n      texture: lng.Tools.getRoundRect(\n        this.w,\n        this.h,\n        getMaxRoundRadius(this.style.radius, this.w, this.h),\n        null,\n        null,\n        true,\n        this.style.circleColor\n      )\n    });\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  alpha: theme.alpha.primary,\n  descriptionTextStyle: {\n    ...theme.typography.body3,\n    maxLines: 1,\n    textColor: theme.color.textNeutralSecondary\n  },\n  height: theme.spacer.xxl * 3,\n  logoStyle: {\n    width: theme.spacer.xxl * 2,\n    height: theme.spacer.xxl * 2,\n    radius: theme.radius.sm\n  },\n  paddingX: theme.spacer.xl,\n  contentSpacing: theme.spacer.lg,\n  titleTextStyle: {\n    ...theme.typography.headline3,\n    maxLines: 1,\n    textColor: theme.color.textNeutral\n  },\n  width: utils.getWidthByColumnSpan(theme, 3)\n});\n\nexport const mode = theme => ({\n  disabled: {\n    alpha: theme.alpha.inactive,\n    descriptionTextStyle: { textColor: theme.color.textNeutralDisabled },\n    titleTextStyle: { textColor: theme.color.textNeutralDisabled }\n  },\n  focused: {\n    descriptionTextStyle: { textColor: theme.color.textInverseSecondary },\n    titleTextStyle: { textColor: theme.color.textInverse }\n  }\n});\n\nexport const tone = theme => ({\n  inverse: {\n    mode: {\n      focused: {\n        descriptionTextStyle: { textColor: theme.color.textNeutral },\n        titleTextStyle: { textColor: theme.color.textNeutral }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './ListItem.styles';\nimport Button from '../Button';\nimport TextBox from '../TextBox';\nimport Icon from '../Icon';\n\nexport default class ListItem extends Button {\n  static get __componentName() {\n    return 'ListItem';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      justify: 'left',\n      fixed: true,\n      Content: {\n        ...super._template().Content,\n        TextWrapper: {\n          mountY: 0.5,\n          flex: { direction: 'column' },\n          Title: {\n            type: TextBox,\n            signals: {\n              textBoxChanged: '_onTextBoxChanged'\n            }\n          }\n        }\n      }\n    };\n  }\n  static get properties() {\n    return [\n      ...super.properties,\n      'description',\n      'prefixLogo',\n      'suffixLogo',\n      'shouldCollapse'\n    ];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'titlePadding', curr: 'contentSpacing' }];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      { name: 'Description', path: 'Content.TextWrapper.Description' }\n    ];\n  }\n\n  _onTextBoxChanged() {\n    this._updateTitle();\n    this._updateDescription();\n    this._updateTruncation();\n  }\n\n  _update() {\n    this._updatePrefixLogo();\n    this._updateSuffixLogo();\n    super._update();\n    this._updateDescription();\n  }\n\n  _updateTitle() {\n    this._TextWrapper.patch({\n      Title: {\n        content: this.title,\n        style: { textStyle: this.style.titleTextStyle }\n      }\n    });\n  }\n\n  _updateDescription() {\n    if (this._hasDescription) {\n      let descriptionPatch = {\n        content: this.description,\n        style: {\n          textStyle: {\n            ...this.style.descriptionTextStyle,\n            wordWrap: true,\n            wordWrapWidth: this._fixedWordWrapWidth\n          }\n        },\n        visible: !this._collapse\n      };\n      if (!this._Description) {\n        descriptionPatch = {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_onTextBoxChanged'\n          },\n          ...descriptionPatch\n        };\n      }\n      this._TextWrapper.patch({ Description: descriptionPatch });\n    } else {\n      this._TextWrapper.patch({ Description: undefined });\n    }\n  }\n\n  _updateTruncation() {\n    if (this._Title) {\n      this._Title.patch({\n        style: {\n          textStyle: {\n            ...this.style.titleTextStyle,\n            wordWrap: this.fixed,\n            wordWrapWidth: this.fixed ? this._fixedWordWrapWidth : 0\n          }\n        }\n      });\n    }\n  }\n\n  _updatePrefixLogo() {\n    if (this._hasPrefixLogo) {\n      this._prefix = this._addLogoProps(this._prefixLogo);\n    }\n  }\n\n  _updateSuffixLogo() {\n    if (this._hasSuffixLogo) {\n      this._suffix = this._addLogoProps(this._suffixLogo);\n    }\n  }\n\n  _addLogoProps(icon) {\n    return {\n      type: Icon,\n      icon,\n      style: { color: undefined, ...this.style.logoStyle }\n    };\n  }\n\n  get _hasPrefixLogo() {\n    return this.prefixLogo;\n  }\n\n  get _hasSuffixLogo() {\n    return this.suffixLogo;\n  }\n\n  get _rowProps() {\n    return {\n      ...super._rowProps,\n      autoResizeHeight: true\n    };\n  }\n\n  get _buttonProps() {\n    return {\n      ...super._buttonProps,\n      alpha: this.style.alpha\n    };\n  }\n\n  get _hasDescription() {\n    return !!this.description;\n  }\n\n  get _suffixX() {\n    return this.w - this._paddingRight - this._suffixW - this.style.paddingX;\n  }\n\n  get _collapse() {\n    return this.shouldCollapse && !this._isFocusedMode;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    return this.title + this.description + ', List Item';\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = () => {\n  return {\n    showArrows: false,\n    showKnob: false\n  };\n};\n\nexport const mode = () => ({\n  focused: {\n    showArrows: true\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillInverse,\n        progressBar: {\n          barColor: theme.color.fillInverseTertiary,\n          progressColor: theme.color.fillInverse\n        }\n      }\n    }\n  },\n  inverse: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillNeutral,\n        progressBar: {\n          barColor: theme.color.fillNeutralTertiary,\n          progressColor: theme.color.fillNeutral\n        }\n      }\n    }\n  },\n  brand: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillInverse,\n        progressBar: {\n          barColor: theme.color.fillBrandTertiary,\n          progressColor: theme.color.fillBrand\n        }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getWidthByColumnSpan } from '../../utils';\n\nexport const base = theme => {\n  const size = theme.spacer.lg;\n  return {\n    arrowAlphaValue: theme.alpha.primary,\n    arrowAlphaValueLimit: theme.alpha.secondary,\n    arrowHeight: theme.spacer.xxl,\n    arrowSpacing: theme.spacer.md,\n    arrowWidth: theme.spacer.xxl,\n    arrowColor: theme.color.fillNeutral,\n    containerHeight: theme.spacer.lg + theme.spacer.xs,\n    iconLeftSrc: theme.asset.arrowLeft,\n    iconRightSrc: theme.asset.arrowRight,\n    minWidth: getWidthByColumnSpan(theme, 2),\n    progressBar: {},\n    width: size,\n    height: size,\n    radius: size / 2,\n    showArrows: true,\n    showKnob: true,\n    circleAnimation: {}\n  };\n};\n\nexport const mode = () => ({\n  disabled: {\n    arrowAlphaValue: 0\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    arrowColor: theme.color.fillNeutral,\n    circleColor: theme.color.interactiveNeutralFocus\n  },\n  inverse: {\n    arrowColor: theme.color.fillInverse,\n    circleColor: theme.color.interactiveInverseFocus\n  },\n  brand: {\n    arrowColor: theme.color.fillNeutral,\n    circleColor: theme.color.interactiveNeutralFocus\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport * as styles from './Slider.styles';\nimport ProgressBar from '../ProgressBar';\nimport Icon from '../Icon';\nimport Knob from '../Knob';\nimport { degreesToRadians } from '../../utils';\n\nexport default class Slider extends Base {\n  static get __componentName() {\n    return 'Slider';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      Container: {\n        mountY: 0.5,\n        y: h => h / 2,\n        Bar: {\n          mountY: 0.5,\n          SliderBar: {\n            type: ProgressBar,\n            progress: 0.5,\n            mountY: 0.5,\n            announce: ''\n          },\n          Circle: {\n            type: Knob,\n            zIndex: 5 // places circle knob on top of sliderBar\n          }\n        },\n        LeftArrow: {\n          type: Icon,\n          mountY: 0.5,\n          y: h => h / 2\n        },\n        RightArrow: {\n          type: Icon,\n          mountY: 0.5,\n          y: h => h / 2\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return ['max', 'min', 'step', 'value', 'vertical'];\n  }\n\n  static get tags() {\n    return [\n      'Container',\n      {\n        name: 'Bar',\n        path: 'Container.Bar'\n      },\n      {\n        name: 'SliderBar',\n        path: 'Container.Bar.SliderBar'\n      },\n      {\n        name: 'Circle',\n        path: 'Container.Bar.Circle'\n      },\n      {\n        name: 'LeftArrow',\n        path: 'Container.LeftArrow'\n      },\n      {\n        name: 'RightArrow',\n        path: 'Container.RightArrow'\n      }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this._min = 0;\n    this._max = 100;\n    this._step = 1;\n    this._value = 0;\n    this._vertical = false;\n  }\n\n  _update() {\n    this._updateDirection();\n    this._updateSliderLayout();\n    this._updatePositions();\n    this._updateArrowAlpha();\n    this._updateArrows();\n    if (this._valueChanged) {\n      this.signal('onChange', this.value, this);\n      this.fireAncestors('$announce', this.announce);\n      this._valueChanged = false;\n    }\n    this._checkAndSignalSizeChange();\n  }\n\n  _handleLeft() {\n    if (this._isDisabledMode) {\n      return false;\n    }\n    this._decrementValue();\n    if (typeof this.onLeft === 'function') {\n      return this.onLeft(this);\n    }\n    return true;\n  }\n\n  _handleRight() {\n    if (this._isDisabledMode) {\n      return false;\n    }\n    this._incrementValue();\n    if (typeof this.onRight === 'function') {\n      return this.onRight(this);\n    }\n    return true;\n  }\n\n  _updateDirection() {\n    this.patch({\n      pivotX: 0,\n      rotation: this.vertical ? degreesToRadians(90) : 0,\n      mountY: this.vertical ? 0.5 : 0\n    });\n  }\n\n  _updateSliderLayout() {\n    const w = this.w || this.style.minWidth;\n    this._Container.patch({\n      h: this.style.containerHeight,\n      w,\n      Bar: {\n        x: this._calculatedSliderX,\n        SliderBar: {\n          y: this.style.containerHeight / 2,\n          w: this._calculatedSliderWidth,\n          style: {\n            duration: 0,\n            ...this.style.progressBar\n          }\n        }\n      }\n    });\n    this.h = Math.max(this.style.containerHeight, this.style.arrowHeight);\n  }\n\n  _checkAndSignalSizeChange() {\n    if (\n      this.h !== this.prevH ||\n      this._Container.w !== this.prevW ||\n      this.rotation !== this.prevRotation\n    ) {\n      this.signal('onSizeChange', this);\n    }\n    this.prevH = this.h;\n    this.prevW = this._Container.w;\n    this.prevRotation = this.rotation;\n  }\n\n  _updatePositions() {\n    this._updateSliderProgress();\n    this._updateCirclePosition();\n  }\n\n  _updateSliderProgress() {\n    let progress =\n      this.value < this.min ? this.min / this.max : this.value / this.max;\n\n    if (this.value > this.max || this.value - this.step > this.max) {\n      progress = this._calculatedSliderWidth;\n    } else if (this.min < 0 || this.max < 0) {\n      progress = (this.value - this.min) / (this.max - this.min);\n    }\n\n    this._SliderBar.progress = progress;\n  }\n\n  _updateCirclePosition() {\n    let xCirclePosition;\n    if (this.value < this.min || this.value + this.step < this.min) {\n      xCirclePosition = (this.min / this.max) * this._calculatedSliderWidth;\n    } else if (this.value > this.max || this.value - this.step > this.max) {\n      xCirclePosition = this._calculatedSliderWidth;\n    } else {\n      if (this.min < 0 || this.max < 0) {\n        xCirclePosition =\n          ((this.value - this.min) / (this.max - this.min)) *\n          this._calculatedSliderWidth;\n      } else {\n        xCirclePosition = (this.value / this.max) * this._calculatedSliderWidth;\n      }\n    }\n\n    if (this._Circle) {\n      this._Circle.patch({\n        mode: this.mode,\n        style: {\n          radius: this.style.radius,\n          w: this.style.w,\n          h: this.style.h,\n          circleColor: this.style.circleColor\n        },\n        y: this._SliderBar.y + 1,\n        alpha: this._isFocusedMode && this.style.showKnob ? 1 : 0\n      });\n      if (\n        this.style.circleAnimation &&\n        Object.keys(this.style.circleAnimation).length\n      ) {\n        this._Circle.smooth = {\n          x: [xCirclePosition, this.style.circleAnimation]\n        };\n      } else {\n        this._Circle.x = xCirclePosition;\n      }\n    }\n  }\n\n  _updateArrowAlpha() {\n    // fade arrows at min/max\n    let leftAlpha;\n    let rightAlpha;\n\n    // ensure arrows are always rendered, otherwise color changes might not apply right away\n    const offAlpha = 0.001;\n    const alpha = this.style.showArrows ? this.style.arrowAlphaValue : offAlpha;\n    const alphaLimit = this.style.showArrows\n      ? this.style.arrowAlphaValueLimit\n      : offAlpha;\n\n    leftAlpha = rightAlpha = alpha;\n    if (!this._isDisabledMode && this.value <= this.min) {\n      leftAlpha = alphaLimit;\n      rightAlpha = alpha;\n    } else if (!this._isDisabledMode && this.value >= this.max) {\n      leftAlpha = alpha;\n      rightAlpha = alphaLimit;\n    }\n\n    this._LeftArrow.smooth = { alpha: leftAlpha };\n    this._RightArrow.smooth = { alpha: rightAlpha };\n  }\n\n  _updateArrows() {\n    const arrowProps = {\n      w: this.style.arrowWidth,\n      h: this.style.arrowHeight,\n      style: {\n        color: this.style.arrowColor\n      }\n    };\n    this._LeftArrow.patch({\n      ...arrowProps,\n      icon: this.style.iconLeftSrc\n    });\n    this._RightArrow.patch({\n      ...arrowProps,\n      icon: this.style.iconRightSrc\n    });\n\n    this._RightArrow.smooth = {\n      x: this.style.arrowSpacing + this._calculatedSliderWidth + this._Bar.x\n    };\n  }\n\n  _decrementValue() {\n    const value = this.value - this.step;\n    this.value = value >= this.min ? value : this.min;\n    this._updatePositions();\n  }\n\n  _incrementValue() {\n    const value = this.value + this.step;\n    this.value = value <= this.max ? value : this.max;\n    this._updatePositions();\n  }\n\n  _handleUp() {\n    return false;\n  }\n\n  _handleDown() {\n    return false;\n  }\n\n  get _calculatedSliderX() {\n    return this.style.showArrows\n      ? this.style.arrowSpacing + this.style.arrowWidth\n      : 0;\n  }\n\n  get _calculatedSliderWidth() {\n    const totalArrowSize = this.style.showArrows\n      ? this.style.arrowSpacing * 2 + this.style.arrowWidth * 2\n      : 0;\n    return this.w < totalArrowSize + this._circleW\n      ? this.style.minWidth - totalArrowSize\n      : this.w - totalArrowSize;\n  }\n\n  get _circleW() {\n    return this._Circle ? this._Circle.w : 0;\n  }\n\n  _setVertical(vertical) {\n    this._setState(vertical ? 'VerticalSlider' : '');\n    return vertical;\n  }\n\n  _setValue(value) {\n    this._valueChanged = value !== this._value;\n    return value;\n  }\n\n  _setMin(min) {\n    const value = this.value;\n    this.value = min > value ? min : value;\n    this._valueChanged = value !== this.value;\n    return min;\n  }\n\n  _setMax(max) {\n    const value = this.value;\n    this.value = max < value ? max : value;\n    this._valueChanged = value !== this.value;\n    return max;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce !== undefined && this._announce !== null) {\n      return this._announce;\n    }\n    return this.value.toString();\n  }\n\n  static _states() {\n    return [\n      class VerticalSlider extends this {\n        _handleLeft() {\n          return false;\n        }\n\n        _handleRight() {\n          return false;\n        }\n\n        _handleUp() {\n          if (this._isDisabledMode) {\n            return false;\n          }\n          this._decrementValue();\n          if (typeof this.onUp === 'function') {\n            return this.onUp(this);\n          }\n          return true;\n        }\n\n        _handleDown() {\n          if (this._isDisabledMode) {\n            return false;\n          }\n          this._incrementValue();\n          if (typeof this.onDown === 'function') {\n            return this.onDown(this);\n          }\n          return true;\n        }\n      }\n    ];\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './NestedSlider.styles';\nimport Slider from '../Slider';\n\nexport default class NestedSlider extends Slider {\n  static get __componentName() {\n    return 'NestedSlider';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  paddingY: theme.spacer.md + theme.spacer.xs,\n  valueTextStyle: {\n    ...theme.typography.headline3,\n    maxLines: 1,\n    textColor: theme.color.textNeutralSecondary\n  }\n});\n\nexport const mode = theme => ({\n  disabled: {\n    valueTextStyle: { textColor: theme.color.textNeutralDisabled }\n  },\n  focused: {\n    valueTextStyle: { textColor: theme.color.textInverseSecondary }\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    mode: {\n      focused: {\n        valueTextStyle: { textColor: theme.color.textInverseSecondary }\n      }\n    }\n  },\n  inverse: {\n    mode: {\n      focused: {\n        valueTextStyle: { textColor: theme.color.textNeutralSecondary }\n      }\n    }\n  },\n  brand: {\n    mode: {\n      focused: {\n        valueTextStyle: { textColor: theme.color.textInverseSecondary }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport NestedSlider from './NestedSlider';\nimport ListItem from './ListItem';\nimport * as styles from './ListItemSlider.styles';\nimport TextBox from '../TextBox';\n\nexport default class ListItemSlider extends ListItem {\n  static get __componentName() {\n    return 'ListItemSlider';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    const template = super._template;\n    return {\n      ...template(),\n      Content: {\n        ...template().Content,\n        flex: { direction: 'column' },\n        TextWrapper: {\n          ...template().Content.TextWrapper,\n          mountY: 0,\n          flex: undefined\n        },\n        Slider: {\n          type: NestedSlider,\n          mountX: 0.5,\n          signals: {\n            onChange: '_onSliderChanged'\n          }\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return [...super.properties, 'slider', 'value', 'max', 'min'];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'titlePadding', curr: 'contentSpacing' }];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      { name: 'Slider', path: 'Content.Slider' },\n      { name: 'Value', path: 'Content.TextWrapper.Value' }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this.value = 50;\n    this.max = 100;\n    this.min = 0;\n  }\n\n  _update() {\n    super._update();\n    this._updateSliderPosition();\n    this._updateValue();\n  }\n\n  _onTextBoxChanged() {\n    super._onTextBoxChanged();\n    this._TextWrapper.h = Math.max(\n      this._Title ? this._Title.h : 0,\n      this._Value ? this._Value.h : 0\n    );\n  }\n\n  _updateValue() {\n    if (this._hasValue) {\n      let valuePatch = {\n        content: this.value.toString(),\n        style: { textStyle: { ...this.style.valueTextStyle } },\n        mountX: 1,\n        x: this.w - this._paddingX\n      };\n      if (!this._Value) {\n        valuePatch = {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_onTextBoxChanged'\n          },\n          ...valuePatch\n        };\n      }\n      this._TextWrapper.patch({ Value: valuePatch });\n    } else {\n      this._TextWrapper.patch({ Value: undefined });\n    }\n  }\n\n  _updateSliderPosition() {\n    const w = this.w - this._paddingLeft - this._paddingRight;\n    const sliderProps = {\n      mode: this.mode,\n      tone: this.tone,\n      w,\n      x: w / 2,\n      visible: !this._collapse,\n      alpha: this.style.alpha,\n      ...this.slider,\n      value: this.value,\n      max: this.max,\n      min: this.min\n    };\n\n    this._Slider.patch(sliderProps);\n  }\n\n  get _hasValue() {\n    return this.value != undefined || this.value != null;\n  }\n\n  get _fixedWordWrapWidth() {\n    const titleWrapWidth =\n      this.w - this._paddingLeft - this._paddingRight - this._paddingX;\n    return titleWrapWidth;\n  }\n\n  _onSliderChanged(value) {\n    this.value = value;\n    this._updateValue();\n    this.signal('onSliderChange', value, this);\n  }\n\n  _handleLeft() {\n    if (typeof this.onLeft === 'function') {\n      return this.onLeft(this);\n    } else if (this._Slider && !this._isDisabledMode) {\n      return this._Slider._handleLeft();\n    }\n    return false;\n  }\n\n  _handleRight() {\n    if (typeof this.onRight === 'function') {\n      return this.onRight(this);\n    } else if (this._Slider && !this._isDisabledMode) {\n      return this._Slider._handleRight();\n    }\n    return false;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    return this.title + this.value + ', List Item Slider';\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  arrowAlphaValue: theme.alpha.primary,\n  arrowAlphaValueLimit: theme.alpha.secondary,\n  arrowWidth: theme.spacer.xxl,\n  arrowHeight: theme.spacer.xxl,\n  iconLeftSrc: theme.asset.arrowLeft,\n  iconRightSrc: theme.asset.arrowRight\n});\n\nexport const tone = theme => ({\n  neutral: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillInverse\n      }\n    }\n  },\n  inverse: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillNeutral\n      }\n    }\n  },\n  brand: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillInverse\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport ListItem from './ListItem';\nimport * as styles from './ListItemPicker.styles';\nimport Marquee from '../Marquee';\nimport Icon from '../Icon';\nimport Row from '../Row';\n\nexport default class ListItemPicker extends ListItem {\n  static get __componentName() {\n    return 'ListItemPicker';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'options', 'selectedIndex'];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      'LeftArrow',\n      'RightArrow',\n      { name: 'Picker', path: 'Content.TextWrapper.Picker' }\n    ];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'titlePadding', curr: 'contentSpacing' }];\n  }\n\n  _onTextBoxChanged() {\n    super._onTextBoxChanged();\n    this._alignPicker();\n  }\n\n  _construct() {\n    super._construct();\n    this._options = [];\n    this._selectedIndex = 0;\n  }\n\n  _update() {\n    super._update();\n    this._updatePicker();\n    this._updateArrows();\n    this._updateArrowsAlpha();\n    this._updateAlignment();\n  }\n\n  _updateAlignment() {\n    if (this._isFocusedMode) {\n      this.patch({ justify: 'center' });\n    } else {\n      this.patch({ justify: 'left' });\n    }\n  }\n\n  _updateArrows() {\n    if (!this._isFocusedMode) {\n      const offAlpha = 0.001;\n      if (this._LeftArrow) {\n        this._LeftArrow.alpha = offAlpha;\n      }\n      if (this._RightArrow) {\n        this._RightArrow.alpha = offAlpha;\n      }\n      return;\n    }\n\n    const arrowProps = {\n      w: this.style.arrowWidth,\n      h: this.style.arrowHeight,\n      style: {\n        color: this.style.arrowColor\n      },\n      alpha: this.style.arrowAlphaValue\n    };\n    if (!this._LeftArrow) {\n      this.patch({\n        LeftArrow: {\n          type: Icon,\n          mountY: 0.5,\n          y: h => h / 2\n        }\n      });\n    }\n    this._LeftArrow.patch({\n      ...arrowProps,\n      icon: this.style.iconLeftSrc\n    });\n    this._LeftArrow.smooth = {\n      x: this.style.paddingX\n    };\n\n    if (!this._RightArrow) {\n      this.patch({\n        RightArrow: {\n          type: Icon,\n          mountY: 0.5,\n          mountX: 1,\n          y: h => h / 2\n        }\n      });\n    }\n    this._RightArrow.patch({\n      ...arrowProps,\n      icon: this.style.iconRightSrc\n    });\n\n    this._RightArrow.smooth = {\n      x: this.w - this.style.paddingX\n    };\n  }\n\n  _updatePicker() {\n    const w = this.w - this._paddingX - this.style.arrowWidth * 2;\n\n    if (!this._Picker) {\n      this._TextWrapper.patch({\n        Picker: {\n          type: Row,\n          clipping: true,\n          alwaysScroll: true,\n          signals: {\n            selectedChange: '_updateArrowsAlpha'\n          }\n        }\n      });\n    }\n    this._Picker.patch({\n      visible: !this._collapse,\n      h: this.style.descriptionTextStyle.lineHeight,\n      w,\n      items: this.options.map(option => ({\n        type: Marquee,\n        h: this.style.descriptionTextStyle.lineHeight,\n        w,\n        centerAlign: this._isFocusedMode,\n        title: {\n          ...this.style.descriptionTextStyle,\n          text: option\n        }\n      })),\n      // We need to reset the selected index to ensure it does not get reset to zero when patching items.\n      selectedIndex: this.selectedIndex\n    });\n    this._alignPicker();\n  }\n\n  _alignPicker() {\n    this._Picker.patch({\n      mountX: this._isFocusedMode ? 0.5 : 0,\n      x: this._isFocusedMode ? this._Title.w / 2 : 0\n    });\n  }\n\n  _updateArrowsAlpha() {\n    if (this._Picker) {\n      this._selectedIndex = this._Picker.selectedIndex;\n    }\n    const alpha = this._isFocusedMode ? this.style.arrowAlphaValue : 0;\n    if (this._RightArrow) {\n      this._RightArrow.alpha =\n        this.selectedIndex === this.options.length - 1 && this._isFocusedMode\n          ? this.style.arrowAlphaValueLimit\n          : alpha;\n    }\n    if (this._LeftArrow) {\n      this._LeftArrow.alpha =\n        this.selectedIndex === 0 && this._isFocusedMode\n          ? this.style.arrowAlphaValueLimit\n          : alpha;\n    }\n    this.fireAncestors('$announce', this.announce);\n  }\n\n  get _fixedWordWrapWidth() {\n    const wordWrapWidthFocused =\n      this.w -\n      this._paddingX -\n      this.style.arrowWidth * 2 -\n      2 * this.style.contentSpacing;\n    const wordWrapWidth = this.w - this._paddingLeft - this._paddingRight;\n    return this._isFocusedMode ? wordWrapWidthFocused : wordWrapWidth;\n  }\n\n  get _collapse() {\n    return this.shouldCollapse && !this._isFocusedMode;\n  }\n\n  get selectedOption() {\n    return this._Picker.selected;\n  }\n\n  _handleLeft() {\n    if (typeof this.onLeft === 'function') {\n      return this.onLeft(this);\n    }\n    this._Picker.selectPrevious();\n    return true;\n  }\n\n  _handleRight() {\n    if (typeof this.onRight === 'function') {\n      return this.onRight(this);\n    }\n    this._Picker.selectNext();\n    return true;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n    return this.title + this.options[this.selectedIndex] + ', List Item';\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport MetadataBase from '../MetadataBase';\n\nexport default class MetadataCard extends MetadataBase {\n  static get __componentName() {\n    return 'MetadataCard';\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  textStyle: theme.typography.body2,\n  fadeHeight: 100,\n  scroll: {\n    timingFunction: 'linear',\n    duration: theme.animation.duration.xfast\n  },\n  contentMarginTop: theme.spacer.md,\n  contentMarginLeft: theme.spacer.xl,\n  sliderMarginLeft: theme.spacer.lg + theme.spacer.xxs\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { base as scrollWrapperBase } from './ScrollWrapper.styles';\n\nexport const base = theme => {\n  const { scroll } = scrollWrapperBase(theme);\n  return {\n    progressBar: { animation: scroll },\n    circleAnimation: scroll\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Slider from '../Slider';\nimport * as styles from './ScrollSlider.styles';\n\nexport default class ScrollSlider extends Slider {\n  static get __componentName() {\n    return 'ScrollSlider';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './ScrollWrapper.styles';\nimport TextBox from '../TextBox';\nimport ScrollSlider from './ScrollSlider';\n\nexport default class ScrollWrapper extends Base {\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      clipping: true,\n      FadeContainer: {\n        ScrollContainer: {\n          w: w => w,\n          wordWrap: true\n        }\n      },\n      Slider: {\n        type: ScrollSlider,\n        vertical: true,\n        signals: {\n          onSizeChange: '_updateScrollContainerSize'\n        },\n        announce: ' '\n      }\n    };\n  }\n\n  static get __componentName() {\n    return 'ScrollWrapper';\n  }\n\n  static get properties() {\n    return [\n      'autoScroll',\n      'autoScrollDelay',\n      'autoScrollSpeed',\n      'content',\n      'fadeContent',\n      'scrollDuration',\n      'scrollStep',\n      'showScrollBar',\n      'shouldWrap',\n      'flexDirection'\n    ];\n  }\n\n  static get tags() {\n    return [\n      'FadeContainer',\n      'Slider',\n      {\n        name: 'ScrollContainer',\n        path: 'FadeContainer.ScrollContainer'\n      },\n      {\n        name: 'ScrollableText',\n        path: 'ScrollContainer.ScrollableText'\n      }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this._scrollStep = 10;\n    this._shouldWrap = false;\n    this._flexDirection = 'column';\n    this._fadeContent = true;\n    this._sliderWidth = 0;\n  }\n\n  _afterTextBoxUpdate(textBox) {\n    // NOTE: this does get called every time ScrollWrapper updates (ex. on each scroll change)\n    if (this._prevW !== textBox.finalW || this._prevH !== textBox.finalH) {\n      this._prevW = textBox.finalW;\n      this._prevH = textBox.finalH;\n      this._updateScrollWrapperLayout();\n      this._updateAlpha();\n    }\n  }\n\n  _resetFlexContainer() {\n    this._FadeContainer.patch({ ScrollContainer: undefined });\n    this._FadeContainer.patch({\n      ScrollContainer: { w: w => w, wordWrap: true }\n    });\n  }\n\n  _update() {\n    if (this._contentChanged) {\n      this._resetFlexContainer();\n      this._updateAutoScroll();\n    }\n    this._updateScrollContainer();\n    this._updateScrollWrapperLayout();\n    this._updateAlpha();\n  }\n\n  _updateAutoScroll() {\n    this.resetScroll();\n    this._setupAutoScroll();\n    this._contentChanged = false;\n  }\n\n  _updateScrollWrapperLayout() {\n    this._ScrollContainer.patch({\n      w: this._contentWidth\n    });\n    this._updateFadeContainer();\n    this._updateSlider();\n  }\n\n  _updateAlpha() {\n    this._Slider.smooth = {\n      alpha: this.showScrollBar && this._isFocusedMode ? 1 : 0\n    };\n  }\n\n  _updateFadeContainer() {\n    const isScrollable = this._ScrollContainer.finalH > this.h;\n    const shouldFade =\n      this.fadeContent && isScrollable && !this._isEndContentVisible;\n\n    this._FadeContainer.patch({\n      h: this.h,\n      w: this._contentWidth,\n      y: this.style.contentMarginTop,\n      x: this.style.contentMarginLeft,\n      rtt: true,\n      shader: shouldFade\n        ? {\n            type: lng.shaders.FadeOut,\n            bottom: this.style.fadeHeight\n          }\n        : undefined\n    });\n  }\n\n  _scrollContainerLoaded({ h }) {\n    this._ScrollContainer.h = h;\n    this._updateScrollWrapperLayout();\n  }\n\n  _updateScrollContainer() {\n    if (!this.content) return;\n\n    if (typeof this.content === 'string') {\n      this._ScrollContainer.patch({\n        flex: { direction: 'column' },\n        ScrollableText: {\n          h: 0,\n          w: this._contentWidth,\n          type: TextBox,\n          content: this.content,\n          style: {\n            textStyle: {\n              ...this.style.textStyle,\n              wordWrap: true,\n              wordWrapWidth: this._contentWidth\n            }\n          },\n          signals: {\n            textBoxChanged: '_scrollContainerLoaded'\n          },\n          onAfterUpdate: this._afterTextBoxUpdate.bind(this)\n        }\n      });\n    } else if (Array.isArray(this.content)) {\n      const content = {};\n      this.content.forEach((item, index) => {\n        const id = `ScrollText${index}`;\n        content[id] = {\n          w: this._contentWidth,\n          ...item\n        };\n        if (item.text) {\n          content[id] = {\n            type: TextBox,\n            content: item.text,\n            style: {\n              textStyle: {\n                ...this.style.textStyle,\n                ...item.style,\n                wordWrap: true,\n                wordWrapWidth: this._contentWidth\n              }\n            },\n            onAfterUpdate: this._afterTextBoxUpdate.bind(this)\n          };\n        }\n      });\n      this._ScrollContainer.patch({\n        flex: { direction: this.flexDirection, wrap: this.shouldWrap },\n        ...content\n      });\n    }\n  }\n\n  _scrollDown() {\n    const hasContentToScrollTo =\n      this._scrollContainerY + this._ScrollContainer.finalH > this.renderHeight;\n    if (hasContentToScrollTo) {\n      const targetY = this._scrollContainerY - this.scrollStep;\n      const canScrollByStepLength =\n        targetY + this._ScrollContainer.finalH > this.renderHeight;\n      const scrollEndY =\n        this.renderHeight -\n        this._ScrollContainer.finalH -\n        this.style.contentMarginTop;\n\n      this._ScrollContainer.patch({\n        smooth: {\n          y: [\n            canScrollByStepLength ? targetY : scrollEndY,\n            this._scrollAnimation\n          ]\n        }\n      });\n\n      const hasScrolledToEnd =\n        this._scrollContainerY + this._ScrollContainer.finalH <= this.h;\n\n      if (hasScrolledToEnd) {\n        this._isEndContentVisible = true;\n        this._autoScrollComplete = true;\n        this.fireAncestors('$scrollChanged', 'endDown', this);\n        this._updateFadeContainer();\n      }\n    } else {\n      return false;\n    }\n  }\n\n  _scrollUp() {\n    const canScrollUp = this._scrollContainerY < 0;\n\n    if (canScrollUp) {\n      const targetY = this._scrollContainerY + this.scrollStep;\n      const canScrollByStepLength = targetY < 0;\n\n      this._ScrollContainer.patch({\n        smooth: {\n          y: [canScrollByStepLength ? targetY : 0, this._scrollAnimation]\n        }\n      });\n\n      const isScrollable =\n        this._scrollContainerY + this._ScrollContainer.finalH >\n        this.renderHeight;\n      if (isScrollable) {\n        this._autoScrollComplete = false;\n      }\n\n      if (this._scrollContainerY >= 0) {\n        this.fireAncestors('$scrollChanged', 'endUp', this);\n      }\n\n      if (this._isEndContentVisible) {\n        this._isEndContentVisible = false;\n        this._updateFadeContainer();\n      }\n    } else {\n      return false;\n    }\n  }\n\n  resetScroll() {\n    this._ScrollContainer.y = 0;\n    this._Slider.value = 0;\n    this._ScrollContainer.transition('y').finish();\n    delete this._ScrollContainer._transitions;\n    this._autoScrollComplete = false;\n  }\n\n  _setAutoScroll(val) {\n    if (this._autoScroll !== val) {\n      this._autoScroll = val;\n    }\n    this._setupAutoScroll();\n    return val;\n  }\n\n  _setupAutoScroll() {\n    clearTimeout(this._startAutoScroll);\n    clearTimeout(this._performAutoScrollTimer);\n\n    if (this.autoScroll) {\n      this._startAutoScroll = setTimeout(\n        () => this._performAutoScroll(),\n        isNaN(this.autoScrollDelay) ? 2000 : this.autoScrollDelay\n      );\n    }\n  }\n\n  _performAutoScroll() {\n    if (this.autoScroll && !this._autoScrollComplete) {\n      this._Slider._handleDown();\n      this._performAutoScrollTimer = setTimeout(\n        () => this._performAutoScroll(),\n        isNaN(this.autoScrollSpeed) ? 200 : this.autoScrollSpeed\n      );\n    }\n  }\n\n  _setContent(content) {\n    if (content !== this._content && this.enabled) {\n      this._contentChanged = true;\n    }\n    return content;\n  }\n\n  _updateScrollContainerSize(slider) {\n    if (this._sliderWidth !== slider._Container.h) {\n      this._sliderWidth = slider._Container.h;\n      this._updateScrollContainer();\n    }\n  }\n\n  _updateSlider() {\n    // height of off-screen items that can be scrolled to\n    const scrollHeight = Math.max(\n      this._ScrollContainer.finalH - this.renderHeight,\n      0\n    );\n\n    // number of steps to scroll to the bottom of ScrollContainer\n    const contentScrollSteps =\n      scrollHeight > 0 ? Math.ceil(scrollHeight / this.scrollStep) : 1;\n\n    // max value of slider\n    const sliderMax = this.renderHeight;\n\n    // distance slider should move on each key press\n    const sliderStep =\n      contentScrollSteps > 0 ? sliderMax / contentScrollSteps : sliderMax;\n\n    // Ensure _Slider and required properties exist\n    if (this._Slider) {\n      // This is a vertical slider, so w is actually controlling the height\n      this._Slider.patch({\n        x: this.w - this._sliderWidth,\n        w: sliderMax,\n        min: 0,\n        max: sliderMax,\n        step: sliderStep,\n        onUp: this._scrollUp.bind(this),\n        onDown: this._scrollDown.bind(this)\n      });\n    }\n  }\n\n  get _contentWidth() {\n    return (\n      this.w -\n      this.style.contentMarginLeft -\n      this.style.sliderMarginLeft -\n      this._sliderWidth\n    );\n  }\n\n  get _scrollContainerY() {\n    return this._ScrollContainer.transition('y').targetValue;\n  }\n\n  get _scrollAnimation() {\n    const duration = isNaN(this.scrollDuration)\n      ? this.style.scroll.duration\n      : this.scrollDuration;\n    return {\n      ...this.style.scroll,\n      duration\n    };\n  }\n\n  _getFocused() {\n    return this._Slider;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    if (Array.isArray(this.content)) {\n      if (\n        this._ScrollContainer &&\n        this._ScrollContainer.children &&\n        this._ScrollContainer.children.length\n      ) {\n        return this._ScrollContainer.children.map(item => item.announce);\n      } else {\n        return this.content.map(item => item.announce || item.text);\n      }\n    }\n    return this.content;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  alpha: theme.alpha.none,\n  animation: theme.animation.standardEntrance,\n  blur: theme.spacer.xxl,\n  color: theme.color.shadowNeutralFocus,\n  offsetX: 0,\n  offsetY: theme.spacer.lg,\n  radius: theme.radius.md,\n  spread: theme.spacer.md * -1,\n\n  // TODO: Need to know which offsets between the base and focus style is largest. Could refactor.\n  maxOffsetY: theme.spacer.xxl,\n  maxOffsetX: 0\n});\n\nexport const mode = theme => ({\n  // Note: styleguide implies also reducing the size of the shadow here,\n  // however we currently can't gracefully animate that size change.\n  // Just animating the offset and alpha gives a pretty decent effect\n  focused: {\n    alpha: theme.alpha.secondary,\n    offsetY: theme.spacer.xxl\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    color: theme.color.shadowNeutralFocus\n  },\n  inverse: {\n    color: theme.color.shadowInverseFocus\n  },\n  brand: {\n    color: theme.color.shadowBrandFocus\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './Shadow.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Shadow extends Base {\n  static get __componentName() {\n    return 'Shadow';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n  static get properties() {\n    return ['maskShadow'];\n  }\n  static get tags() {\n    return ['Frame', { name: 'Shadow', path: 'Frame.Shadow' }];\n  }\n\n  _updateFocusStyle() {\n    if (!this._Shadow) return;\n    // TODO: think about how does the user know which styles are handled in the focus transition.\n    this.applySmooth(\n      this._Shadow,\n      { alpha: this.style.alpha, y: this.style.offsetY, x: this.style.offsetX },\n      {\n        alpha: [this.style.alpha, this.style.animation],\n        y: [this.style.offsetY, this.style.animation],\n        x: [this.style.offsetX, this.style.animation]\n      }\n    );\n  }\n\n  _update() {\n    // To behave like Figma's shadow settings, blur value is added to width and height to expand shadow size\n    const shadowSize = this.style.spread + this.style.blur * 2; // size increase based on shadow params\n    const holepunchError = 4; // extra value to tighten holepunch area so you don't see sliver of extra space\n\n    // TODO: Need to know which mode style has the largest offset values, could refactor\n    const extraBoundsY = this.style.maxOffsetY;\n    const extraBoundsX = this.style.maxOffsetX;\n    const radius = getMaxRoundRadius(this.style.radius, this.w, this.h);\n\n    this.patch({\n      Frame: {\n        w: this.w + shadowSize * 2 + extraBoundsX,\n        h: this.h + shadowSize * 2 + extraBoundsY,\n        x: (this.w + extraBoundsX) / 2,\n        y: (this.h + extraBoundsY) / 2,\n        mount: 0.5,\n\n        // maskShadow prop enables a holepunch shader to mask out the parent component shape\n        rtt: this.maskShadow,\n        shader: this.maskShadow\n          ? {\n              type: lng.shaders.Hole,\n              w: this.w - holepunchError,\n              h: this.h - holepunchError,\n              x: shadowSize + holepunchError / 2,\n              y: shadowSize + holepunchError / 2,\n              radius\n            }\n          : undefined,\n        Shadow: {\n          color: this.style.color,\n          texture: lng.Tools.getShadowRect(\n            // Underlying getShadowRect function adds blur to the canvas size, so we don't need to add it like above\n            this.w + this.style.spread * 2,\n            this.h + this.style.spread * 2,\n            radius,\n            this.style.blur\n          )\n        }\n      }\n    });\n\n    // Set to should smooth after initial shadow patch has been created\n    if (this.shouldSmooth === undefined) {\n      this.shouldSmooth = true;\n    }\n\n    this._updateFocusStyle();\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const size = theme.spacer.xxl;\n  return {\n    width: size,\n    height: size,\n    radius: size / 2\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Slider from './Slider';\nimport * as styles from './SliderLarge.styles';\n\nexport default class SliderLarge extends Slider {\n  static get __componentName() {\n    return 'SliderLarge';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport { stringifyCompare } from '../../utils';\n\nexport default class ContentSwitcher extends Base {\n  static get __componentName() {\n    return 'ContentSwitcher';\n  }\n\n  static get properties() {\n    return ['selectedIndex'];\n  }\n\n  _construct() {\n    super._construct();\n    this._selectedIndex = 0;\n    this._contentItems = [];\n  }\n\n  _update() {\n    super._update();\n    this._updateSelected();\n  }\n\n  _updateSelected() {\n    if (this._preveSelectedIndex !== this.selectedIndex) {\n      if (this._preveSelectedIndex !== undefined) {\n        const prevContent = this.tag(`Content${this._preveSelectedIndex}`);\n        prevContent.smooth = { alpha: 0 };\n        if (this._hasContent) {\n          prevContent._getTransition('alpha').once('finish', () => {\n            this._fadeInContent();\n          });\n        } else if (this.selectedIndex !== undefined) {\n          this._fadeInContent();\n        }\n      } else if (this._hasContent) {\n        this._fadeInContent();\n      }\n      this._preveSelectedIndex = this.selectedIndex;\n    }\n  }\n\n  _fadeInContent() {\n    this._selectedContent.smooth = { alpha: 1 };\n    this._selectedContent._getTransition('alpha').once('finish', () => {\n      this.h = this._selectedContent.h;\n      this.signal('contentHeightChange', this.h);\n    });\n  }\n\n  _updateContent() {\n    const allContent = this.contentItems.reduce((acc, item, idx) => {\n      let component;\n      const tagName = `Content${idx}`;\n\n      if (typeof item === 'function') {\n        const componentLoader = item();\n        if (componentLoader.then) {\n          // update template async after component has loaded\n          this._loadAsyncComponent(componentLoader, idx);\n        } else {\n          component = componentLoader;\n        }\n      } else {\n        component = item;\n      }\n\n      if (component) {\n        acc[tagName] = {\n          ...component,\n          alpha: 0\n        };\n      }\n\n      return acc;\n    }, {});\n    this.patch(allContent);\n  }\n\n  _loadAsyncComponent(componentLoader, idx) {\n    componentLoader.then(component => {\n      const tagName = `Content${idx}`;\n      this.patch({ [tagName]: { ...component, alpha: 0 } });\n    });\n  }\n\n  set contentItems(contentItems) {\n    if (!stringifyCompare(contentItems, this._contentItems)) {\n      this._contentItems = contentItems;\n      this._updateContent();\n    }\n  }\n\n  get contentItems() {\n    return this._contentItems;\n  }\n\n  get _hasContent() {\n    return this._selectedContent && this._selectedContent.children.length > 0;\n  }\n\n  get _selectedContent() {\n    return this.tag(`Content${this.selectedIndex}`);\n  }\n\n  _getFocused() {\n    if (this._hasContent) {\n      return this._selectedContent;\n    }\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  tabSpacing: theme.spacer.lg,\n  tabsMarginBottom: theme.spacer.xxl\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport Row from '../Row';\nimport ContentSwitcher from './ContentSwitcher';\nimport * as styles from './TabBar.styles';\n\nexport default class TabBar extends Base {\n  static _template() {\n    return {\n      Tabs: {\n        type: Row,\n        autoResizeHeight: true,\n        signals: {\n          selectedChange: '_selectedTabChange'\n        }\n      },\n      TabContent: {\n        type: ContentSwitcher,\n        signals: {\n          contentHeightChange: '_updateTabBarHeight'\n        }\n      }\n    };\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get __componentName() {\n    return 'TabBar';\n  }\n\n  static get properties() {\n    return [\n      'alphaSelectedTab',\n      'collapse',\n      'reset',\n      'tabs',\n      'retainSelection',\n      ...Row.properties\n    ];\n  }\n\n  static get tags() {\n    return ['Tabs', 'TabContent'];\n  }\n\n  _construct() {\n    super._construct();\n    this._tabContent = [];\n    this._isTabsFocused = true;\n  }\n\n  _selectedTabChange(selected, prevSelected) {\n    this.fireAncestors('$tabChanged', selected, prevSelected, this);\n    if (\n      typeof this._tabContent === 'object' &&\n      typeof this._tabContent.then === 'function'\n    ) {\n      return this._tabContent.then(this.queueRequestUpdate);\n    }\n    return this.queueRequestUpdate();\n  }\n\n  _update() {\n    this._updateTabsLayout();\n    this._updateTabs();\n    this._updateTabContent();\n    this._updateTabBarHeight();\n  }\n\n  _updateTabsLayout() {\n    const defaultLayout = {\n      style: {\n        itemSpacing: this.style.tabSpacing\n      }\n    };\n    const tabsRowPatch = Row.properties.reduce((patchObj, prop) => {\n      if (this[prop] != undefined) {\n        patchObj[prop] = this[prop];\n      }\n      return patchObj;\n    }, defaultLayout);\n\n    this._Tabs.patch(tabsRowPatch);\n  }\n\n  _updateTabs() {\n    this._Tabs.wrapSelected = this.wrapSelected;\n    this._Tabs.items.forEach(tab => {\n      const isSelectedTab = tab === this._Tabs.selected;\n      if (this._isUnfocusedMode) {\n        tab.mode =\n          isSelectedTab && this.retainSelection ? 'selected' : 'unfocused';\n      } else if (this._isFocusedMode) {\n        if (this._isTabsFocused) {\n          tab.mode = isSelectedTab ? 'focused' : 'unfocused';\n        } else {\n          tab.mode = isSelectedTab ? 'selected' : 'unfocused';\n        }\n      }\n    });\n    if (this.alphaSelectedTab) {\n      this._updateTabAlphas();\n    }\n  }\n\n  _updateTabAlphas() {\n    if (this._isTabsFocused) {\n      this._Tabs.items.forEach(tab => {\n        tab.patch({ alpha: 1 });\n      });\n    } else {\n      this._Tabs.items.forEach(tab => {\n        tab.patch({ alpha: tab === this._Tabs.selected ? 1 : 0.3 });\n      });\n    }\n  }\n\n  _updateTabContent() {\n    const margin = this.style.tabsMarginBottom;\n    this._TabContent.patch({\n      y: this._Tabs.h + margin,\n      contentItems: this._tabContent,\n      selectedIndex: this._isFocusedMode ? this._Tabs.selectedIndex : undefined\n    });\n  }\n\n  $itemChanged() {\n    // triggered when the Tabs Row resizes\n    // update the height of TabBar using the latest h value from Tabs\n    this._updateTabBarHeight();\n    this._updateTabContent();\n  }\n\n  _updateTabBarHeight() {\n    let h;\n    if (this.collapse) {\n      h =\n        this._isFocusedMode &&\n        this._tabContent.filter(content => Object.keys(content).length).length\n          ? this._expandedHeight\n          : this._collapsedHeight;\n    } else {\n      h = this._expandedHeight;\n    }\n    this._TabContent.smooth = {\n      alpha: !this.collapse || this._isFocusedMode ? 1 : 0.001\n    };\n    if (this.h !== h) {\n      this.h = h;\n      this.fireAncestors('$itemChanged');\n    }\n  }\n\n  selectTabs() {\n    if (!this._isTabsFocused) {\n      this._isTabsFocused = true;\n      this._updateTabs();\n      this._updateTabBarHeight();\n    }\n  }\n\n  resetTabs() {\n    this._Tabs.selectedIndex = 0;\n  }\n\n  _handleDown() {\n    if (this._isTabsFocused && this._TabContent._hasContent) {\n      this._isTabsFocused = false;\n      this._updateTabs();\n      this._updateTabBarHeight();\n    }\n    return false;\n  }\n\n  _handleUp() {\n    this.selectTabs();\n    return false;\n  }\n\n  _setTabs(tabs) {\n    this._tabContent = [];\n    this._tabContent = tabs.map(tab => tab.tabContent || {});\n    this._Tabs.items = tabs;\n    return tabs;\n  }\n\n  _getTabs() {\n    return this._Tabs.items;\n  }\n\n  get selected() {\n    return this._Tabs.selected;\n  }\n\n  get selectedIndex() {\n    return this._Tabs.selectedIndex;\n  }\n\n  set selectedIndex(index) {\n    this._Tabs.selectedIndex = index;\n  }\n\n  get _collapsedHeight() {\n    return this._Tabs.h;\n  }\n\n  get _expandedHeight() {\n    return this._Tabs.h + this.style.tabsMarginBottom + this._TabContent.h;\n  }\n\n  _getFocused() {\n    return this._isTabsFocused ? this._Tabs : this._TabContent;\n  }\n\n  _unfocus() {\n    super._unfocus();\n    if (this.reset) {\n      this.resetTabs();\n    }\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  radius: theme.radius.xl,\n  paddingX: theme.spacer.xxxl + theme.spacer.xxs,\n  paddingY: theme.spacer.md + theme.spacer.xs,\n  paddingXNoTitle: theme.spacer.xl,\n  iconSize: theme.spacer.xxxl,\n  iconMarginRight: theme.spacer.md,\n  textStyle: {\n    ...theme.typography.headline3,\n    textColor: theme.color.textNeutral\n  },\n  backgroundColor: theme.color.fillTransparent,\n  contentColor: theme.color.fillNeutral\n});\n\nexport const mode = theme => ({\n  focused: {\n    backgroundColor: theme.color.interactiveNeutralFocus,\n    contentColor: theme.color.fillInverse,\n    textStyle: { textColor: theme.color.textInverse }\n  },\n  selected: {\n    backgroundColor: theme.color.interactiveNeutralFocusSoft,\n    contentColor: theme.color.fillNeutral,\n    textStyle: { textColor: theme.color.textNeutral }\n  },\n  disabled: {\n    backgroundColor: theme.color.fillTransparent,\n    contentColor: theme.color.fillNeutralDisabled,\n    textStyle: { textColor: theme.color.textNeutralDisabled }\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {},\n  inverse: {\n    mode: {\n      focused: {\n        contentColor: theme.color.fillNeutral,\n        textStyle: { textColor: theme.color.textNeutral }\n      }\n    }\n  },\n  brand: {\n    mode: {\n      focused: {\n        contentColor: theme.color.fillNeutral,\n        textStyle: { textColor: theme.color.textNeutral }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Surface from '../Surface';\nimport Icon from '../Icon';\nimport TextBox from '../TextBox';\nimport * as styles from './Tab.styles';\n\nexport default class Tab extends Surface {\n  static _template() {\n    return {\n      ...super._template(),\n      Content: {\n        mount: 0.5,\n        x: w => w / 2,\n        y: h => h / 2,\n        Text: {\n          type: TextBox,\n          mountY: 0.5,\n          signals: {\n            textBoxChanged: '_onTextBoxChanged'\n          }\n        }\n      }\n    };\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get __componentName() {\n    return 'Tab';\n  }\n\n  static get properties() {\n    return ['icon', 'title'];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      'Content',\n      {\n        name: 'Icon',\n        path: 'Content.Icon'\n      },\n      {\n        name: 'Text',\n        path: 'Content.Text'\n      }\n    ];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'noTitlePaddingX', curr: 'paddingXNoTitle' }];\n  }\n\n  _onTextBoxChanged() {\n    this._updateContent();\n    this._updateTabSize();\n  }\n\n  _update() {\n    super._update();\n    this._updateIcon();\n    this._updateText();\n    this._updateContent();\n    this._updateTabSize();\n  }\n\n  _updateIcon() {\n    if (!this.icon) {\n      this._Content.patch({ Icon: undefined });\n      return;\n    }\n    const iconPatch = {\n      icon: this.icon,\n      w: this.style.iconSize,\n      h: this.style.iconSize,\n      y: this._Content.h / 2,\n      style: {\n        color: this.style.contentColor\n      }\n    };\n\n    if (this.title) {\n      iconPatch.x = 0;\n      iconPatch.mountX = 0;\n    } else {\n      iconPatch.x = this._Content.w / 2;\n      iconPatch.mountX = 0.5;\n    }\n\n    if (this._Icon) {\n      this._Icon.patch(iconPatch);\n    } else {\n      this._Content.patch({\n        Icon: {\n          type: Icon,\n          mountY: 0.5,\n          ...iconPatch\n        }\n      });\n    }\n  }\n\n  _updateText() {\n    const textPatch = {\n      content: this.title,\n      style: { textStyle: this.style.textStyle },\n      y: this._Content.h / 2\n    };\n    if (this.icon) {\n      textPatch.x = this._iconW + this.style.iconMarginRight;\n      textPatch.mountX = 0;\n    } else {\n      textPatch.x = this._Content.w / 2;\n      textPatch.mountX = 0.5;\n    }\n\n    this._Text.patch(textPatch);\n  }\n\n  _updateContent() {\n    this._Content.patch({\n      w:\n        this._iconW +\n        (this.title ? this.style.iconMarginRight : 0) +\n        this._textW,\n      h: Math.max(this._iconH, this._Text.h)\n    });\n  }\n\n  _updateTabSize() {\n    if (this.title || this.icon) {\n      this.patch({\n        w: this._paddingX * 2 + this._Content.w,\n        h: this.style.paddingY * 2 + this._Content.h\n      });\n    } else {\n      this.patch({ w: 0, h: 0 });\n    }\n  }\n\n  get _textW() {\n    return this.title ? this._Text.w : 0;\n  }\n\n  get _iconW() {\n    return this.icon && this._Icon !== undefined ? this._Icon.w : 0;\n  }\n\n  get _iconH() {\n    return this.icon && this._Icon !== undefined ? this._Icon.h : 0;\n  }\n\n  get _paddingX() {\n    return this.title ? this.style.paddingX : this.style.paddingXNoTitle;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this._Text && this._Text.announce);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const knobSize = theme.spacer.xl;\n  const knobPadding = theme.spacer.xs;\n  const strokeWidth = theme.stroke.sm;\n  return {\n    height: knobSize + (knobPadding + strokeWidth) * 2,\n    knobWidth: knobSize,\n    knobHeight: knobSize,\n    knobRadius: knobSize / 2,\n    knobPadding,\n    strokeWidth,\n    width: (strokeWidth + knobPadding * 2 + knobSize) * 2\n  };\n};\n\nexport const tone = theme => ({\n  neutral: {\n    strokeColor: theme.color.fillNeutral,\n    backgroundColor: theme.color.fillInverseTertiary,\n    backgroundColorChecked: theme.color.fillNeutral,\n    knobColor: theme.color.fillNeutral,\n    knobColorChecked: theme.color.fillInverse,\n    mode: {\n      disabled: {\n        strokeColor: theme.color.fillNeutralDisabled,\n        backgroundColor: theme.color.fillInverseDisabled,\n        backgroundColorChecked: theme.color.fillNeutralDisabled,\n        knobColor: theme.color.fillNeutralDisabled,\n        knobColorChecked: theme.color.fillInverseDisabled\n      }\n    }\n  },\n  inverse: {\n    strokeColor: theme.color.fillInverse,\n    backgroundColor: theme.color.fillNeutralTertiary,\n    backgroundColorChecked: theme.color.fillInverse,\n    knobColor: theme.color.fillInverse,\n    knobColorChecked: theme.color.fillNeutral,\n    mode: {\n      disabled: {\n        strokeColor: theme.color.fillInverseDisabled,\n        backgroundColor: theme.color.fillNeutralDisabled,\n        backgroundColorChecked: theme.color.fillInverseDisabled,\n        knobColor: theme.color.fillInverseDisabled,\n        knobColorChecked: theme.color.fillNeutralDisabled\n      }\n    }\n  },\n  brand: {\n    strokeColor: theme.color.fillBrand,\n    backgroundColor: theme.color.fillBrandTertiary,\n    backgroundColorChecked: theme.color.fillBrand,\n    knobColor: theme.color.fillBrand,\n    knobColorChecked: theme.color.fillInverse,\n    mode: {\n      disabled: {\n        strokeColor: theme.color.fillNeutralDisabled,\n        backgroundColor: theme.color.fillInverseDisabled,\n        backgroundColorChecked: theme.color.fillNeutralDisabled,\n        knobColor: theme.color.fillNeutralDisabled,\n        knobColorChecked: theme.color.fillInverseDisabled\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './Toggle.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Toggle extends Base {\n  static get __componentName() {\n    return 'Toggle';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      Container: {\n        Stroke: {},\n        Knob: {}\n      }\n    };\n  }\n\n  static get tags() {\n    return [\n      'Container',\n      {\n        name: 'Knob',\n        path: 'Container.Knob'\n      },\n      {\n        name: 'Stroke',\n        path: 'Container.Stroke'\n      }\n    ];\n  }\n\n  static get properties() {\n    return ['checked'];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'strokeWeight', curr: 'strokeWidth' }];\n  }\n\n  _construct() {\n    super._construct && super._construct();\n    this._checked = false;\n  }\n\n  _update() {\n    this._updateKnobPosition();\n    this._updateColors();\n    this._updateContainer();\n    this._updateStroke();\n    this._updateKnob();\n    if (this._checkedChanged) {\n      this.fireAncestors('$announce', this.announce);\n      this._checkedChanged = false;\n    }\n  }\n\n  _updateKnobPosition() {\n    const { knobPadding, knobWidth, strokeWidth } = this.style;\n\n    this.applySmooth(this._Knob, {\n      x: this.checked\n        ? this.w - strokeWidth - knobPadding - knobWidth\n        : strokeWidth + knobPadding\n    });\n  }\n\n  _updateColors() {\n    const {\n      backgroundColor,\n      backgroundColorChecked,\n      knobColor,\n      knobColorChecked\n    } = this.style;\n\n    const currentKnobColor = this.checked ? knobColorChecked : knobColor;\n    const containerColor = this.checked\n      ? backgroundColorChecked\n      : backgroundColor;\n\n    this.applySmooth(this._Knob, { color: currentKnobColor });\n    this.applySmooth(this._Container, { color: containerColor });\n  }\n\n  _updateContainer() {\n    const { knobRadius, knobPadding, strokeRadius, strokeWidth } = this.style;\n\n    const radius =\n      strokeRadius !== undefined\n        ? strokeRadius === 0\n          ? strokeRadius\n          : Math.max(0, strokeRadius - strokeWidth)\n        : Math.max(0, knobRadius + knobPadding + strokeWidth);\n\n    this._Container.patch({\n      w: this.w,\n      h: this.h,\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        this.w - strokeWidth * 2 - 2,\n        this.h - strokeWidth * 2 - 2,\n        getMaxRoundRadius(radius, this.w, this.h),\n        strokeWidth,\n        0,\n        true,\n        false\n      )\n    });\n  }\n\n  _updateStroke() {\n    const { knobRadius, knobPadding, strokeColor, strokeRadius, strokeWidth } =\n      this.style;\n\n    this._Stroke.patch({\n      w: this.w,\n      h: this.h,\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        this.w - 2,\n        this.h - 2,\n        strokeRadius !== undefined\n          ? getMaxRoundRadius(strokeRadius, this.w, this.h)\n          : getMaxRoundRadius(\n              knobRadius,\n              this.w - knobPadding * 2 - 2,\n              this.h - knobPadding * 2 - 2\n            ) +\n              knobPadding +\n              strokeWidth,\n        strokeWidth,\n        strokeColor,\n        false,\n        false\n      )\n    });\n  }\n\n  _updateKnob() {\n    const { knobHeight, knobWidth, knobRadius } = this.style;\n\n    this._Knob.patch({\n      zIndex: 2,\n      y: (this.h - knobHeight) / 2,\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        knobWidth - 2,\n        knobHeight - 2,\n        getMaxRoundRadius(knobRadius, knobWidth - 2, knobHeight - 2),\n        0,\n        0,\n        true,\n        false\n      )\n    });\n  }\n\n  _setChecked(checked) {\n    this._checkedChanged = checked !== this._checked;\n    return checked;\n  }\n\n  toggle() {\n    if (!this._isDisabledMode) {\n      this.checked = !this.checked;\n    }\n    return this;\n  }\n\n  _handleEnter() {\n    if (typeof this.onEnter === 'function') {\n      return this.onEnter(this);\n    } else {\n      this.toggle();\n    }\n    return false;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this.checked ? 'Checked' : 'Unchecked');\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const knobSize = theme.spacer.lg;\n  const knobPadding = theme.spacer.xxs;\n  const strokeWidth = theme.stroke.sm;\n  return {\n    height: knobSize + (knobPadding + strokeWidth) * 2,\n    knobWidth: knobSize,\n    knobHeight: knobSize,\n    knobRadius: knobSize / 2,\n    knobPadding,\n    strokeWidth,\n    width: (strokeWidth + knobPadding * 2 + knobSize) * 2\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Toggle from './Toggle';\nimport * as styles from './ToggleSmall.styles';\n\nexport default class ToggleSmall extends Toggle {\n  static get __componentName() {\n    return 'ToggleSmall';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nexport default class Bubble extends lng.Texture {\n  constructor(stage) {\n    super(stage);\n    this._w = 0;\n    this._h = 0;\n    this._radius = 0;\n    this._pointerWidth = 0;\n    this._pointerHeight = 0;\n    this._strokeWidth = 0;\n    this._color = 'white';\n  }\n\n  set w(w) {\n    this._w = w;\n    this._changed();\n  }\n\n  get w() {\n    return this._w;\n  }\n\n  set h(h) {\n    this._h = h;\n    this._changed();\n  }\n\n  get h() {\n    return this._h;\n  }\n\n  set radius(radius) {\n    if (Array.isArray(radius)) {\n      this._radius = new Array(4).fill().map((_, index) => radius[index] || 0);\n    } else {\n      this._radius = radius;\n    }\n    this._changed();\n  }\n\n  get radius() {\n    return this._radius;\n  }\n\n  set pointerWidth(pointerWidth) {\n    this._pointerWidth = pointerWidth;\n    this._changed();\n  }\n\n  get pointerWidth() {\n    return this._pointerWidth;\n  }\n\n  set pointerHeight(pointerHeight) {\n    this._pointerHeight = pointerHeight;\n    this._changed();\n  }\n\n  get pointerHeight() {\n    return this._pointerHeight;\n  }\n\n  set strokeWidth(strokeWidth) {\n    this._strokeWidth = strokeWidth;\n    this._changed();\n  }\n\n  get strokeWidth() {\n    return this._strokeWidth;\n  }\n\n  set color(color) {\n    this._color = lng.StageUtils.getRgbaString(color);\n    this._changed();\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  createBubble({\n    stage,\n    w = 0,\n    h = 0,\n    radius = 0,\n    pointerWidth = 0,\n    pointerHeight = 0,\n    strokeWidth = 1,\n    color = 'white'\n  }) {\n    const canvas = stage.platform.getDrawingCanvas();\n    const ctx = canvas.getContext('2d');\n\n    canvas.width = w + strokeWidth + 4;\n    canvas.height = h + strokeWidth + 4;\n\n    ctx.imageSmoothingEnabled = true;\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    ctx.lineWidth = strokeWidth;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n\n    const initialCoord = 0.5 * strokeWidth + 1;\n    const leftX = initialCoord;\n    const rightX = leftX + w;\n    const topY = initialCoord;\n    const bottomY = topY + h;\n    const bottomBubbleY = bottomY - pointerHeight;\n    const isRadiusAnArray = Array.isArray(radius);\n    // start: top left\n    ctx.beginPath();\n    ctx.moveTo(leftX + (isRadiusAnArray ? radius[0] : radius), topY);\n    // top side\n    ctx.lineTo(rightX - (isRadiusAnArray ? radius[0] : radius), topY);\n    // top right corner\n    ctx.arcTo(\n      rightX,\n      topY,\n      rightX,\n      topY + (isRadiusAnArray ? radius[1] : radius),\n      isRadiusAnArray ? radius[1] : radius\n    );\n\n    // right side\n    ctx.lineTo(rightX, bottomBubbleY - (isRadiusAnArray ? radius[2] : radius));\n\n    // bottom right corner\n    ctx.arcTo(\n      rightX,\n      bottomBubbleY,\n      rightX - (isRadiusAnArray ? radius[2] : radius),\n      bottomBubbleY,\n      isRadiusAnArray ? radius[2] : radius\n    );\n\n    // bottom side, right of point\n    ctx.lineTo(w / 2 + pointerWidth / 2, bottomBubbleY);\n\n    // point\n    ctx.arcTo(w / 2, bottomY, w / 2 - pointerWidth / 2, bottomBubbleY, 2);\n    ctx.lineTo(w / 2 - pointerWidth / 2, bottomBubbleY);\n\n    // bottom side, left of point\n    ctx.lineTo(leftX + (isRadiusAnArray ? radius[3] : radius), bottomBubbleY);\n\n    // bottom left corner\n    ctx.arcTo(\n      leftX,\n      bottomBubbleY,\n      leftX,\n      bottomBubbleY - (isRadiusAnArray ? radius[3] : radius),\n      isRadiusAnArray ? radius[3] : radius\n    );\n\n    // left side\n    ctx.lineTo(leftX, topY + (isRadiusAnArray ? radius[0] : radius));\n\n    // top left corner\n    ctx.arcTo(\n      leftX,\n      topY,\n      leftX + (isRadiusAnArray ? radius[0] : radius),\n      topY,\n      isRadiusAnArray ? radius[0] : radius\n    );\n\n    // draw shape and fill with color\n    ctx.stroke();\n    ctx.fill();\n\n    return canvas;\n  }\n\n  _getLookupId() {\n    const { w, h, radius, pointerWidth, pointerHeight, color } = this;\n    return `__bubble_${w}x${h}_radius-${radius}_pointer-${pointerWidth}x${pointerHeight}_fill-${color}`;\n  }\n\n  _getSourceLoader() {\n    return cb => {\n      cb(null, {\n        source: this.createBubble(this)\n      });\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  marginBottom: theme.spacer.xl,\n  paddingX: theme.spacer.lg,\n  paddingY: theme.spacer.md,\n  pointerWidth: theme.spacer.xxl,\n  pointerHeight: theme.spacer.lg,\n  radius: theme.radius.sm,\n  textStyle: {\n    ...theme.typography.body3,\n    textColor: theme.color.textInverse\n  },\n  transition: theme.animation.utility // TODO: should delay and duration be xfast?\n});\n\nexport const tone = theme => ({\n  neutral: {\n    backgroundColor: theme.color.fillNeutral,\n    textStyle: { textColor: theme.color.textInverse }\n  },\n  inverse: {\n    backgroundColor: theme.color.fillInverse,\n    textStyle: { textColor: theme.color.textNeutral }\n  },\n  brand: {\n    backgroundColor: theme.color.fillBrand,\n    textStyle: { textColor: theme.color.textNeutral }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Bubble from '../../textures/Bubble';\nimport TextBox from '../TextBox';\nimport Base from '../Base';\nimport * as styles from './Tooltip.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Tooltip extends Base {\n  static get __componentName() {\n    return 'Tooltip';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      alpha: 0,\n      scale: 0.5,\n      mountX: 0.5,\n      x: w => w / 2,\n      Background: {\n        Text: {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_textLoaded'\n          }\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return ['title', 'delayVisible', 'timeVisible'];\n  }\n\n  static get tags() {\n    return ['Background', { name: 'Text', path: 'Background.Text' }];\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'pointerH', curr: 'pointerHeight' },\n      { prev: 'pointerW', curr: 'pointerWidth' }\n    ];\n  }\n\n  _update() {\n    this._updateText();\n    this._updateBackground();\n  }\n\n  _updateText() {\n    if (this._Text) {\n      this._Text.patch({\n        content: this.title,\n        style: { textStyle: this.style.textStyle }\n      });\n    }\n  }\n\n  _textLoaded() {\n    this._updateBackgroundHeight();\n    this._updateTextPosition();\n  }\n\n  /**\n   * patches Background prop updates\n   */\n  _updateBackground() {\n    this.patch({\n      Background: {\n        texture: {\n          type: Bubble,\n          w: this._Background.w,\n          h: this._Background.h,\n          radius: getMaxRoundRadius(\n            this.style.radius,\n            this._Background.w - this.style.pointerHeight,\n            this._Background.h - this.style.pointerHeight\n          ),\n          pointerWidth: this.style.pointerWidth,\n          pointerHeight: this.style.pointerHeight,\n          color: this.style.backgroundColor\n        }\n      }\n    });\n  }\n\n  /**\n   * updates height of background when text height or width is changed\n   */\n  _updateBackgroundHeight() {\n    const backgroundH =\n      this._Text.finalH + this.style.paddingY * 2 + this.style.pointerHeight;\n    const backgroundW = this._Text.finalW + this.style.paddingX * 2;\n    this.patch({\n      w: backgroundW,\n      h: backgroundH,\n      mountY: 1,\n      y: -this.style.marginBottom,\n      Background: {\n        w: backgroundW,\n        h: backgroundH,\n        texture: {\n          type: Bubble,\n          w: backgroundW,\n          h: backgroundH\n        }\n      }\n    });\n  }\n\n  _updateTextPosition() {\n    if (this._Text) {\n      this._Text.patch({\n        mount: 0.5,\n        x: this._Background.w / 2,\n        y: (this._Background.h - this.style.pointerHeight) / 2\n      });\n    }\n  }\n\n  _clearTimers() {\n    clearTimeout(this._hideTimer);\n    clearTimeout(this._showTimer);\n  }\n\n  _transitionIn() {\n    const smooth = {\n      smooth: {\n        alpha: [1, this.style.transition],\n        scale: [1, this.style.transition]\n      }\n    };\n\n    if (this.delayVisible) {\n      this._showTimer = setTimeout(() => {\n        this.patch({ smooth });\n      }, this.delayVisible);\n    } else {\n      this._showTimer = undefined;\n      this.patch({ smooth });\n    }\n\n    this._hideTimer = this.timeVisible\n      ? setTimeout(() => {\n          this._unfocus();\n        }, this.timeVisible + (this.delayVisible || 0))\n      : undefined;\n  }\n\n  _transitionOut() {\n    this.patch({\n      smooth: {\n        alpha: [0, this.style.transition],\n        scale: [0.5, this.style.transition]\n      }\n    });\n  }\n\n  _focus() {\n    this._clearTimers();\n    this._transitionIn();\n  }\n\n  _unfocus() {\n    this._clearTimers();\n    this._transitionOut();\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this._Text && this._Text.announce);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/*\nCreate a Lightning Object pool and then get the component from the pool.\n\nBy default we create two objects, with expectations that one is used at a time\n\nLearn more about object pools\nhttps://egghead.io/blog/object-pool-design-pattern\n*/\n\nconst pools = new Map();\n\nfunction get(key) {\n  if (pools.has(key)) {\n    const pool = pools.get(key);\n    let index = pool.index;\n\n    if (index >= pool.components.length) {\n      index = 0;\n    }\n    pool.index = index + 1;\n\n    return pool.components[index];\n  }\n\n  return false;\n}\n\nfunction clear() {\n  pools.clear();\n}\n\nfunction create({ name, component, stage, size = 2 }) {\n  if (pools.has(name)) {\n    return get(name);\n  }\n\n  component = component || { type: name };\n  const components = [];\n  for (let i = 0; i < size; i++) {\n    components.push(stage.c(component));\n  }\n\n  pools.set(name, {\n    index: 0,\n    components\n  });\n\n  return get(name);\n}\n\nexport default {\n  get,\n  create,\n  clear\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/* global SpeechSynthesisErrorEvent */\nfunction flattenStrings(series = []) {\n  const flattenedSeries = [];\n\n  for (var i = 0; i < series.length; i++) {\n    if (typeof series[i] === 'string' && !series[i].includes('PAUSE-')) {\n      flattenedSeries.push(series[i]);\n    } else {\n      break;\n    }\n  }\n  // add a \"word boundary\" to ensure the Announcer doesn't automatically try to\n  // interpret strings that look like dates but are not actually dates\n  // for example, if \"Rising Sun\" and \"1993\" are meant to be two separate lines,\n  // when read together, \"Sun 1993\" is interpretted as \"Sunday 1993\"\n  return [flattenedSeries.join(',\\b ')].concat(series.slice(i));\n}\n\nfunction delay(pause) {\n  return new Promise(resolve => {\n    setTimeout(resolve, pause);\n  });\n}\n\n/**\n * Speak a string\n *\n * @param {string} phrase Phrase to speak\n * @param {SpeechSynthesisUtterance[]} utterances An array which the new SpeechSynthesisUtterance instance representing this utterance will be appended\n * @return {Promise<void>} Promise resolved when the utterance has finished speaking, and rejected if there's an error\n */\nfunction speak(phrase, utterances, lang = 'en-US') {\n  const synth = window.speechSynthesis;\n  return new Promise((resolve, reject) => {\n    const utterance = new SpeechSynthesisUtterance(phrase);\n    utterance.lang = lang;\n    utterance.onend = () => {\n      resolve();\n    };\n    utterance.onerror = e => {\n      reject(e);\n    };\n    utterances.push(utterance);\n    synth.speak(utterance);\n  });\n}\n\nfunction speakSeries(series, lang, root = true) {\n  const synth = window.speechSynthesis;\n  const remainingPhrases = flattenStrings(\n    Array.isArray(series) ? series : [series]\n  );\n  const nestedSeriesResults = [];\n  /*\n    We hold this array of SpeechSynthesisUtterances in order to prevent them from being\n    garbage collected prematurely on STB hardware which can cause the 'onend' events of\n    utterances to not fire consistently.\n  */\n  const utterances = [];\n  let active = true;\n\n  const seriesChain = (async () => {\n    try {\n      while (active && remainingPhrases.length) {\n        const phrase = await Promise.resolve(remainingPhrases.shift());\n        if (!active) {\n          // Exit\n          // Need to check this after the await in case it was cancelled in between\n          break;\n        } else if (typeof phrase === 'string' && phrase.includes('PAUSE-')) {\n          // Pause it\n          let pause = phrase.split('PAUSE-')[1] * 1000;\n          if (isNaN(pause)) {\n            pause = 0;\n          }\n          await delay(pause);\n        } else if (typeof phrase === 'string' && phrase.length) {\n          // Speak it\n          const totalRetries = 3;\n          let retriesLeft = totalRetries;\n          while (active && retriesLeft > 0) {\n            try {\n              await speak(phrase, utterances, lang);\n              retriesLeft = 0;\n            } catch (e) {\n              // eslint-disable-next-line no-undef\n              if (e instanceof SpeechSynthesisErrorEvent) {\n                if (e.error === 'network') {\n                  retriesLeft--;\n                  console.warn(\n                    `Speech synthesis network error. Retries left: ${retriesLeft}`\n                  );\n                  await delay(500 * (totalRetries - retriesLeft));\n                } else if (\n                  e.error === 'canceled' ||\n                  e.error === 'interrupted'\n                ) {\n                  // Cancel or interrupt error (ignore)\n                  retriesLeft = 0;\n                } else {\n                  throw new Error(`SpeechSynthesisErrorEvent: ${e.error}`);\n                }\n              } else {\n                throw e;\n              }\n            }\n          }\n        } else if (typeof phrase === 'function') {\n          const seriesResult = speakSeries(phrase(), lang, false);\n          nestedSeriesResults.push(seriesResult);\n          await seriesResult.series;\n        } else if (Array.isArray(phrase)) {\n          // Speak it (recursively)\n          const seriesResult = speakSeries(phrase, lang, false);\n          nestedSeriesResults.push(seriesResult);\n          await seriesResult.series;\n        }\n      }\n    } finally {\n      active = false;\n    }\n  })();\n  return {\n    series: seriesChain,\n    get active() {\n      return active;\n    },\n    append: toSpeak => {\n      remainingPhrases.push(toSpeak);\n    },\n    cancel: () => {\n      if (!active) {\n        return;\n      }\n      if (root) {\n        synth.cancel();\n      }\n      nestedSeriesResults.forEach(nestedSeriesResults => {\n        nestedSeriesResults.cancel();\n      });\n      active = false;\n    }\n  };\n}\n\nlet currentSeries;\nexport default function (toSpeak, lang) {\n  currentSeries && currentSeries.cancel();\n  currentSeries = speakSeries(toSpeak, lang);\n  return currentSeries;\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Don't wrap patterns with word boundaries (\\b) or set any RegExp flags.\n// Each pattern will be wrapped with \\b and use the global (g) flag when created as a capture group in combined pattern.\nconst defaultAbbreviations = [\n  { pattern: 'TV-14', replacer: 'Rated TV-14' },\n  { pattern: 'CC', replacer: 'Closed Captions available' },\n  { pattern: 'HD', replacer: 'High Definition available' },\n  { pattern: /ENG(?!\\+)/, replacer: 'English Available' },\n  { pattern: /ENG\\+ES/, replacer: 'Available in English and Spanish' },\n  { pattern: 'AD', replacer: 'Audio Description available' },\n  { pattern: 'RT', replacer: 'Rotten Tomatoes' },\n  {\n    pattern: /(S)+(\\d+)+(E)+(\\d+)+/,\n    replacer: (match, p1, p2, p3, p4) => `Season ${p2} Episode ${p4}`\n  }\n];\n\nexport const defaultAbbrevConfig = generateAbbrevConfig(defaultAbbreviations);\n\nfunction wrapWithBoundary(str) {\n  return `\\\\b${str}\\\\b`;\n}\n\nfunction getNumberOfCaptureGroups(regExp) {\n  return new RegExp(regExp.toString() + '|').exec('').length - 1;\n}\n\n/**\n * @typedef {object} AbbreviationConfig\n * @property {object} abbreviationsPattern - combined RegExp pattern of all abbreviations separated into capture groups\n * @property {object} stringPatternMap - object to look up replacers values based on string matches (uses matched string to look up)\n * @property {object} regExpPatternMap - object to look up replacers values based on RegExp matches (uses index of matched capture group to look up)\n */\n\n/**\n * Generates abbreviation config object to be passed to withAnnouncer for abbreviation translation\n * @param {object[]} abbreviations - array of custom abbreviation objects to generate config off of\n * @param {string|object} abbreviations[].pattern - pattern to match abbreviation\n * @param {string|function} abbreviations[].replacer - string or RegEx replacer function to replace matched abbreviation with\n * @param {boolean} extendDefault - if true, extend the default abbreviations config with custom abbreviations\n * @returns {AbbreviationConfig} - configuration that may be passed to withAnnouncer as abbreviations in options parameter\n */\nexport function generateAbbrevConfig(\n  abbreviations = defaultAbbreviations,\n  extendDefault\n) {\n  const abbrev = extendDefault\n    ? [...defaultAbbreviations, ...abbreviations]\n    : abbreviations;\n  const stringPatternMap = {}; // map of exact strings to the associated replacer\n  const regExpPatternMap = {}; // map of RegExp patterns to the associated replacer\n  let abbreviationsPattern = ''; // string of final RegExp pattern with each pattern as a capture group\n  let patternGroupOffset = 0; // incremented for each capture group found in RegExp patterns passed in\n\n  // If the pattern is a RegExp pattern: key RegExp pattern with its index in passed in abbreviations array parameter.\n  // The capture group for this pattern will be at this position (idx) in the combined RegExp pattern.\n  // When a string is matched, the index of the matched capture group can be used to look up the correct replacer.\n  //\n  // Else (the pattern is a string): it can be keyed by it's pattern.\n  // When a string is matched, the string matcher can be used to look up the correct replacer.\n  abbrev.forEach(({ pattern, replacer }, idx) => {\n    let stringPattern;\n    if (pattern instanceof RegExp) {\n      const patternMapIdx = idx + patternGroupOffset;\n      regExpPatternMap[patternMapIdx] = { pattern, replacer };\n      stringPattern = wrapWithBoundary(pattern.source);\n      patternGroupOffset += getNumberOfCaptureGroups(pattern);\n    } else {\n      stringPatternMap[pattern] = { replacer };\n      stringPattern = wrapWithBoundary(pattern);\n    }\n\n    // create single string for final RegExp - each pattern will be a capture group\n    abbreviationsPattern =\n      abbreviationsPattern === ''\n        ? `(${stringPattern})`\n        : `${abbreviationsPattern}|(${stringPattern})`;\n  });\n\n  abbreviationsPattern = new RegExp(abbreviationsPattern, 'g');\n  return { abbreviationsPattern, stringPatternMap, regExpPatternMap };\n}\n\n/**\n * Translates abbreviations in a string into their associated words\n * @param {string} phrase - phrase to be translated\n * @param {object} - abbreviationsPattern, stringPatternMap and regExpPatternMap\n * @returns {string} - phrase where abbreviations have been replaced with words\n */\nexport const translateAbbrev = (phrase, translationConfig) => {\n  const { abbreviationsPattern, stringPatternMap, regExpPatternMap } =\n    translationConfig;\n\n  const translated = phrase.replace(\n    abbreviationsPattern,\n    (matched, ...args) => {\n      // replace exact string match with replacement string\n      if (stringPatternMap[matched]) {\n        return stringPatternMap[matched].replacer;\n      }\n\n      // else match was found using a more complex RegExp pattern\n      // find replacer by index of matching capture group\n      const patternIdx = args.findIndex(arg => !!arg);\n      const { pattern, replacer } = regExpPatternMap[patternIdx];\n\n      // replace matched string with replacer string\n      if (typeof replacer === 'string') {\n        return replacer;\n      }\n\n      // use replace again for replacer function it can utilize substring matches in its scope\n      if (typeof replacer === 'function') {\n        return matched.replace(pattern, replacer);\n      }\n    }\n  );\n  return translated;\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Speech from './Speech';\nimport { translateAbbrev } from './abbreviations';\nimport { debounce } from '../../utils';\n\nexport { generateAbbrevConfig, defaultAbbrevConfig } from './abbreviations';\n\nconst fiveMinutes = 300 * 1000;\n\nfunction elmName(elm) {\n  return elm.ref || elm.constructor.name;\n}\n\nconst defaultOptions = {\n  voiceOutDelay: 500,\n  abbreviationsConfig: {}\n};\n\nexport default function withAnnouncer(Base, speak = Speech, options = {}) {\n  const announcerOptions = { ...defaultOptions, ...options };\n\n  return class extends Base {\n    _construct() {\n      this._announceEndedTimeout;\n      this._currentlySpeaking = '';\n      super._construct && super._construct();\n    }\n\n    _voiceOut(toAnnounce) {\n      if (this._voiceOutDisabled) {\n        return;\n      }\n      let toSpeak = toAnnounce;\n      if (announcerOptions.abbreviationsConfig.abbreviationsPattern) {\n        toSpeak = Array.isArray(toAnnounce)\n          ? toAnnounce.map(phrase =>\n              translateAbbrev(phrase, announcerOptions.abbreviationsConfig)\n            )\n          : translateAbbrev(toAnnounce, announcerOptions.abbreviationsConfig);\n      }\n      const speech = speak(toSpeak, options.language);\n      // event using speech synthesis api promise\n      if (speech && speech.series) {\n        speech.series.then(() => {\n          this.stage.emit('announceEnded');\n        });\n      }\n\n      // event in case speech synthesis api is flakey,\n      // assume the ammount of time it takes to read each word\n      const toAnnounceStr = Array.isArray(toSpeak)\n        ? toSpeak.concat().join(' ')\n        : toSpeak;\n      const toAnnounceWords = toAnnounceStr.split(' ');\n      const timeoutDelay =\n        toAnnounceWords.length * announcerOptions.voiceOutDelay;\n      clearTimeout(this._announceEndedTimeout);\n      this._announceEndedTimeout = setTimeout(() => {\n        this.stage.emit('announceTimeoutEnded');\n      }, timeoutDelay);\n\n      return speech;\n    }\n\n    _build() {\n      super._build && super._build();\n\n      this._debounceAnnounceFocusChanges = debounce(\n        this._announceFocusChanges.bind(this),\n        Number.isInteger(this.announcerFocusDebounce)\n          ? this.announcerFocusDebounce\n          : 400\n      );\n\n      this.announcerTimeout = Number.isInteger(this.announcerTimeout)\n        ? this.announcerTimeout\n        : fiveMinutes;\n\n      this._resetFocusTimer = debounce(() => {\n        // Reset focus path for full announce\n        this._lastFocusPath = undefined;\n      }, this.announcerTimeout);\n    }\n\n    _firstEnable() {\n      super._firstEnable && super._firstEnable();\n\n      // Lightning only calls Focus Change on second focus\n      this._focusChange();\n    }\n\n    _disable() {\n      clearTimeout(this._announceEndedTimeout);\n      this.stage.emit('announceEnded');\n      this.stage.emit('announceTimeoutEnded');\n    }\n\n    set announcerEnabled(val) {\n      this._announcerEnabled = val;\n      this._focusChange();\n    }\n\n    get announcerEnabled() {\n      return this._announcerEnabled;\n    }\n\n    _focusChange() {\n      if (!this._resetFocusTimer) {\n        return;\n      }\n\n      this._resetFocusTimer();\n      this.$announcerCancel();\n      this._debounceAnnounceFocusChanges();\n    }\n\n    _announceFocusChanges() {\n      const focusPath = this.application.focusPath || [];\n      const lastFocusPath = this._lastFocusPath || [];\n      const loaded = focusPath.every(elm => !elm.loading);\n      const focusDiff = focusPath.filter(elm => !lastFocusPath.includes(elm));\n\n      if (!loaded) {\n        this._debounceAnnounceFocusChanges();\n        return;\n      }\n\n      this._lastFocusPath = focusPath.slice(0);\n      // Provide hook for focus diff for things like TextBanner\n      this.focusDiffHook = focusDiff;\n\n      if (!this.announcerEnabled) {\n        return;\n      }\n\n      let toAnnounce = focusDiff.reduce((acc, elm) => {\n        if (elm.announce) {\n          acc.push([elmName(elm), 'Announce', elm.announce]);\n        } else if (elm.title) {\n          acc.push([elmName(elm), 'Title', elm.title || '']);\n        }\n        return acc;\n      }, []);\n\n      focusDiff.reverse().reduce((acc, elm) => {\n        if (elm.announceContext) {\n          acc.push([elmName(elm), 'Context', elm.announceContext]);\n        } else {\n          acc.push([elmName(elm), 'No Context', '']);\n        }\n        return acc;\n      }, toAnnounce);\n\n      if (this.debug) {\n        console.table(toAnnounce);\n      }\n\n      toAnnounce = toAnnounce.reduce((acc, a) => {\n        const txt = a[2];\n        txt && acc.push(txt);\n        return acc;\n      }, []);\n\n      if (toAnnounce.length) {\n        this.$announcerCancel();\n        this._currentlySpeaking = this._voiceOut(\n          toAnnounce.reduce((acc, val) => acc.concat(val), [])\n        );\n      }\n    }\n\n    $announce(toAnnounce, { append = false, notification = false } = {}) {\n      if (!toAnnounce || !toAnnounce.trim().length) {\n        return;\n      }\n      if (this.announcerEnabled) {\n        this._debounceAnnounceFocusChanges.flush();\n        if (\n          append &&\n          this._currentlySpeaking &&\n          this._currentlySpeaking.active\n        ) {\n          this._currentlySpeaking.append(toAnnounce);\n        } else {\n          this.$announcerCancel();\n          this._currentlySpeaking = this._voiceOut(toAnnounce);\n        }\n\n        if (notification) {\n          this._voiceOutDisabled = true;\n          this._currentlySpeaking.series.finally(() => {\n            this._voiceOutDisabled = false;\n            this.$announcerRefresh();\n          });\n        }\n      }\n    }\n\n    $announcerCancel() {\n      this._currentlySpeaking && this._currentlySpeaking.cancel();\n    }\n\n    $announcerRefresh(depth) {\n      if (depth) {\n        this._lastFocusPath = this._lastFocusPath.slice(0, depth);\n      } else {\n        this._lastFocusPath = undefined;\n      }\n      this._resetFocusTimer();\n      this._focusChange();\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport default function (classImp) {\n  const cache = new Map();\n\n  return base => {\n    if (cache.has(base)) {\n      return cache.get(base);\n    }\n\n    const classWithNewBase = classImp(base);\n    cache.set(base, classWithNewBase);\n    return classWithNewBase;\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport default function withSelections(Base, options = {}) {\n  const defaultOpts = {\n    captureKey: 'Enter',\n    defaultIndex: 0,\n    eventName: 'onSelect',\n    keys: {\n      currentSelected: 'currentSelected',\n      currentSelectedIndex: 'currentSelectedIndex',\n      isSelected: 'isSelected',\n      items: 'items',\n      setSelected: 'setSelected'\n    }\n  };\n  const {\n    captureKey,\n    defaultIndex,\n    eventName,\n    keys: {\n      currentSelected,\n      currentSelectedIndex,\n      isSelected,\n      items,\n      setSelected\n    }\n  } = {\n    ...defaultOpts,\n    ...options,\n    keys: {\n      ...defaultOpts.keys,\n      ...options.keys\n    }\n  };\n\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _construct() {\n      super._construct();\n      this[currentSelectedIndex] = defaultIndex;\n    }\n\n    _init() {\n      super._init();\n      this[currentSelected][isSelected] = true;\n    }\n\n    [setSelected](selected, val) {\n      const prevSelected = (this[items] || [])[this[currentSelectedIndex]];\n\n      if (\n        selected &&\n        (selected !== prevSelected || selected[isSelected] !== val)\n      ) {\n        prevSelected && (prevSelected[isSelected] = false);\n        selected[isSelected] = val;\n        this[currentSelectedIndex] = Array.from(this[items] || []).indexOf(\n          selected\n        );\n        this.fireAncestors('$' + eventName, selected, val);\n      }\n    }\n\n    _captureKey(event) {\n      if (\n        (Array.isArray(captureKey) && captureKey.indexOf(event.key) > -1) ||\n        event.key === captureKey\n      ) {\n        const [selected] = this.stage.application.focusPath.slice(-1);\n        this[setSelected](selected, true);\n      }\n      return false;\n    }\n\n    ['$' + setSelected](selected, val) {\n      this[setSelected](selected, val);\n    }\n\n    get [currentSelected]() {\n      return this[items][this[currentSelectedIndex]];\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport default function (Base) {\n  return class extends Base {\n    // Initialization and state management\n    _init() {\n      super._init();\n      this.isEditing = false;\n    }\n\n    toggleEdit() {\n      this.isEditing = !this.isEditing;\n    }\n\n    _unfocus() {\n      this.isEditing = false;\n      super._unfocus();\n    }\n\n    // Item manipulation and transition handling\n    _swapItemArrayPos(array, current, previous) {\n      [array[current], array[previous]] = [array[previous], array[current]];\n      super.selectedIndex = current;\n    }\n\n    _getPositionValue(item, axis) {\n      return item.transition(axis)\n        ? item.transition(axis).targetValue\n        : item[axis];\n    }\n\n    _waitForTransition(item, axis) {\n      return new Promise(resolve =>\n        item._getTransition(axis).on('finish', resolve)\n      );\n    }\n\n    // Selection and focus management\n    get selectedIndex() {\n      return super.selectedIndex;\n    }\n\n    set selectedIndex(index) {\n      if (\n        !this.isEditing ||\n        (this.selectedIndex >= this.items.length - 1 &&\n          index > this.selectedIndex)\n      ) {\n        if (!this.isEditing) {\n          super.selectedIndex = index;\n        }\n        return;\n      }\n\n      const currentItem = this.selected;\n      this.prevSelected = currentItem;\n      const nextItem = this.items[index];\n      const previousIndex = this.selectedIndex;\n\n      const oldPos = {\n        x: this._getPositionValue(currentItem, 'x'),\n        y: this._getPositionValue(currentItem, 'y')\n      };\n      const newPos = {\n        x: this._getPositionValue(nextItem, 'x'),\n        y: this._getPositionValue(nextItem, 'y')\n      };\n      const previousCurrentItemZIndex = currentItem.zIndex;\n      currentItem.zIndex = previousCurrentItemZIndex + 1; // Current item should appear to be on top of other items\n\n      this._swapItemArrayPos(this.items, index, previousIndex);\n      currentItem.setSmooth('x', newPos.x);\n      currentItem.setSmooth('y', newPos.y);\n      nextItem.setSmooth('x', oldPos.x);\n      nextItem.setSmooth('y', oldPos.y);\n\n      (async () => {\n        await Promise.all([\n          this._waitForTransition(currentItem, 'x'),\n          this._waitForTransition(currentItem, 'y'),\n          this._waitForTransition(nextItem, 'x'),\n          this._waitForTransition(nextItem, 'y')\n        ]);\n\n        currentItem.zIndex = previousCurrentItemZIndex; // Reset zIndex\n\n        if (\n          !this.Items.children.length ||\n          !this.Items.children[index]?.skipFocus\n        ) {\n          this._selectedIndex = index;\n          this._render(this.selected, this.prevSelected);\n          this.signal('selectedChange', this.selected, this.prevSelected);\n          this._refocus();\n        }\n      })();\n    }\n\n    _selectedChange(selected, prevSelected) {\n      if (this.isEditing) return;\n      this._render(selected, prevSelected);\n      this.signal('selectedChange', selected, prevSelected);\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/*\n  LinearGradient texture\n\n  Properties:\n    h: height of the texture\n    w: width the texture\n    degrees: rotation of the gradient clockwise from 0 (top->bottom), inclusive to 360\n    steps: color steps in the gradient.\n\n  Usage Example (gradient from right to left)\n    Gradient: {\n      texture: {\n        type: LinearGradient,\n        w: gradient_width,\n        h: gradient_height,\n        degrees: 90,\n        steps: [\n          { percent: 0, color: 'rgba(20, 20, 23, 0.48)' },\n          { percent: 0.09, color: 'rgba(20, 20, 23, 0.52)' },\n          { percent: 0.18, color: 'rgba(20, 20, 23, 0.6)' },\n          { percent: 0.26, color: 'rgba(20, 20, 23, 0.69)' },\n          { percent: 0.37, color: 'rgba(20, 20, 23, 0.78)' },\n          { percent: 0.52, color: 'rgba(20, 20, 23, 0.87)' },\n          { percent: 0.72, color: 'rgba(20, 20, 23, 0.94)' },\n          { percent: 1, color: 'rgba(20, 20, 23, 0.96)' }\n        ]\n      }\n    }\n\n  Each step in the gradient is an object with the following properties:\n    percent: number between 0 and 1\n    color: string 'hsla(0,0,0,0)' or 'rgba(0,0,0,0)`\n*/\n\nimport lng from '@lightningjs/core';\n\n// translates degrees into radians\nconst rad = deg => {\n  return (deg * Math.PI) / 180;\n};\n\n// translates radians into degrees\nconst deg = rad => {\n  return (rad * 180) / Math.PI;\n};\n\n// given the width and height of the texture area,\n// calculates the breakpoint angles at which the assumed\n// side of the triangle necessary for calculating the origin\n// points of the linear gradient changes.\n\nconst getBreakpoints = (width, height) => {\n  const a = height / 2;\n  const b = width / 2;\n  const c = Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));\n  const C = 90;\n  const A = Math.ceil(deg(Math.asin((a * Math.sin(rad(C))) / c)));\n  const B = 180 - C - A;\n  return [B, 90, 90 + A, 180, 180 + B, 270, 270 + A, 360];\n};\n\n// given the degrees of rotation, width and height of the texture,\n// calculates the x/y coordinates on the bounding box of the texture\n// where the linear gradient should start and end\n\nconst points = (degrees, width, height) => {\n  const breakAngles = getBreakpoints(width, height);\n  const breakIndex = breakAngles.findIndex(angle => angle >= degrees);\n  let b = height / 2;\n  let max = width / 2;\n  if ([1, 2, 5, 6].includes(breakIndex)) {\n    b = width / 2;\n    max = height / 2;\n  }\n  if ([2, 4, 6].includes(breakIndex)) {\n    degrees = degrees - breakAngles[breakIndex - 1];\n  } else if (breakIndex > 0) {\n    degrees = breakAngles[breakIndex] - degrees;\n  }\n\n  const A = degrees;\n  const B = 90 - A;\n  let a = Math.ceil((Math.sin(rad(A)) * b) / Math.sin(rad(B)));\n  if (a > max) {\n    a = max;\n  }\n\n  let x0 = 0;\n  let y0 = 0;\n  let x1 = 0;\n  let y1 = 0;\n\n  switch (breakIndex) {\n    case 0:\n      x0 = width / 2 + a;\n      break;\n    case 1:\n      x0 = width;\n      y0 = height / 2 - a;\n      break;\n    case 2:\n      x0 = width;\n      y0 = height / 2 + a;\n      break;\n    case 3:\n      x0 = width / 2 + a;\n      y0 = height;\n      break;\n    case 4:\n      x0 = width / 2 - a;\n      y0 = height;\n      break;\n    case 5:\n      y0 = height / 2 + a;\n      break;\n    case 6:\n      y0 = height / 2 - a;\n      break;\n    case 7:\n      x0 = width / 2 - a;\n      break;\n  }\n\n  if (x0 == 0) {\n    x1 = width;\n    y1 = height - y0;\n  }\n  if (y0 == 0) {\n    y1 = height;\n    x1 = width - x0;\n  }\n  if (x0 == width) {\n    x1 = 0;\n    y1 = height - y0;\n  }\n  if (y0 == height) {\n    y1 = 0;\n    x1 = width - x0;\n  }\n  return { x0, y0, x1, y1 };\n};\n\n// The class for the texture\n\nexport default class LinearGradient extends lng.Texture {\n  constructor(stage) {\n    super(stage);\n    this._w = 0;\n    this._h = 0;\n    this._steps = [];\n    this._degrees = 0;\n  }\n\n  // Width\n  get w() {\n    return this._w;\n  }\n\n  set w(w) {\n    this._w = w;\n    this._changed();\n  }\n\n  // Height\n  get h() {\n    return this._h;\n  }\n\n  set h(h) {\n    this._h = h;\n    this._changed();\n  }\n\n  // Steps\n  get steps() {\n    return this._steps;\n  }\n\n  set steps(steps) {\n    this._steps = steps;\n    this._changed();\n  }\n\n  // Degrees\n  get degrees() {\n    return this._degrees;\n  }\n\n  set degrees(degrees) {\n    this._degrees = degrees;\n    this._changed();\n  }\n\n  _getLookupId() {\n    return `__linearGradient_${this._h}_${this._w}_${this._steps.count}_${this._degrees}`;\n  }\n\n  _getSourceLoader() {\n    const w = this._w;\n    const h = this._h;\n    const d = this._degrees;\n    const p = points(d, w, h);\n    const { x0, y0, x1, y1 } = p;\n    const steps = this._steps;\n    const strokeWidth = this.strokeWidth;\n    // if there is a stroke radius, make sure it is in a 4-element array, otherwise, set to 0\n    const strokeRadius = this.strokeRadius\n      ? Array.isArray(this.strokeRadius) && this.strokeRadius.length === 4\n        ? this.strokeRadius\n        : Array(4).fill(this.strokeRadius)\n      : Array(4).fill(0);\n\n    return function (cb) {\n      const canvas = this.stage.platform.getDrawingCanvas();\n\n      canvas.width = w + strokeWidth + 2;\n      canvas.height = h + strokeWidth + 2;\n      var ctx = canvas.getContext('2d');\n\n      var gradient = ctx.createLinearGradient(x0, y0, x1, y1);\n\n      steps.forEach(step => {\n        gradient.addColorStop(step.percent, step.color);\n      });\n\n      if (strokeWidth) {\n        const x = 0.5 * strokeWidth + 1,\n          y = 0.5 * strokeWidth + 1;\n\n        ctx.beginPath();\n        ctx.moveTo(x + strokeRadius[0], y);\n        ctx.lineTo(x + w - strokeRadius[1], y);\n        ctx.arcTo(x + w, y, x + w, y + strokeRadius[1], strokeRadius[1]);\n        ctx.lineTo(x + w, y + h - strokeRadius[2]);\n        ctx.arcTo(\n          x + w,\n          y + h,\n          x + w - strokeRadius[2],\n          y + h,\n          strokeRadius[2]\n        );\n        ctx.lineTo(x + strokeRadius[3], y + h);\n        ctx.arcTo(x, y + h, x, y + h - strokeRadius[3], strokeRadius[3]);\n        ctx.lineTo(x, y + strokeRadius[0]);\n        ctx.arcTo(x, y, x + strokeRadius[0], y, strokeRadius[0]);\n        ctx.closePath();\n\n        ctx.lineWidth = strokeWidth;\n        ctx.strokeStyle = gradient;\n        ctx.stroke();\n      } else {\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, w, h);\n      }\n\n      cb(null, { source: canvas, w, h });\n    };\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nexport default class Circle extends lng.Texture {\n  constructor(stage) {\n    super(stage);\n    this._color = 'rgb(0,0,0)';\n    this._fill = true;\n    this._radius = 100;\n    this._stroke = false;\n    this._strokeColor = 'rgb(0,0,0)';\n    this._strokeWidth = 1;\n  }\n\n  get fill() {\n    return this._fill;\n  }\n\n  set fill(fill) {\n    this._fill = fill;\n    this._changed();\n  }\n\n  get radius() {\n    return this._radius;\n  }\n\n  set radius(radius) {\n    this._radius = radius;\n    this._changed();\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this._changed();\n  }\n\n  get stroke() {\n    return this._stroke;\n  }\n\n  set stroke(stroke) {\n    this._stroke = stroke;\n    this._changed();\n  }\n\n  get strokeWidth() {\n    return this._strokeWidth;\n  }\n\n  set strokeWidth(strokeWidth) {\n    this._strokeWidth = strokeWidth;\n    this._changed();\n  }\n\n  get strokeColor() {\n    return this._strokeColor;\n  }\n\n  set strokeColor(strokeColor) {\n    this._strokeColor = strokeColor;\n    this._changed();\n  }\n\n  _getLookupId() {\n    return `__circle_${this._radius}`;\n  }\n\n  _getSourceLoader() {\n    // We need to scope these to protect them from modifications while loading (which may be async).\n    const color = this._color;\n    const fill = this._fill;\n    const radius = this._radius;\n    const stroke = this._stroke;\n    const strokeColor = this._strokeColor;\n    const strokeWidth = this._strokeWidth;\n    const canvas = this.stage.platform.getDrawingCanvas();\n    let dimension = radius;\n\n    if (stroke) {\n      dimension = radius + strokeWidth * 2;\n    }\n\n    canvas.width = dimension * 2;\n    canvas.height = dimension * 2;\n\n    return function (cb) {\n      const ctx = canvas.getContext('2d');\n      ctx.lineWidth = strokeWidth;\n      ctx.strokeStyle = strokeColor;\n      ctx.fillStyle = color;\n      ctx.beginPath();\n\n      ctx.arc(dimension, dimension, radius, 0, 2 * Math.PI);\n\n      if (fill) {\n        ctx.fill();\n      }\n\n      if (stroke) {\n        ctx.stroke();\n      }\n      cb(null, { source: canvas, radius });\n    };\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nexport default class Arrow extends lng.Texture {\n  constructor(stage) {\n    super(stage);\n    this._color = 'rgb(13, 13, 15)';\n    this._w = 0;\n    this._h = 0;\n    this._direction = 'right';\n  }\n\n  get w() {\n    return this._w;\n  }\n\n  set w(l) {\n    this._w = l;\n    this._changed();\n  }\n\n  get h() {\n    return this._h;\n  }\n\n  set h(l) {\n    this._h = l;\n    this._changed();\n  }\n\n  get direction() {\n    return this._direction;\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this._changed();\n  }\n\n  set direction(direction) {\n    this._direction = direction;\n    this._changed();\n  }\n\n  _getLookupId() {\n    return `__triangle_${this._direction}_${this._w}x${this._h}`;\n  }\n\n  _getSourceLoader() {\n    // We need to scope these to protect them from modifications while loading (which may be async).\n\n    const color = this._color;\n    const w = this._w;\n    const h = this._h;\n    const direction = this._direction;\n\n    var canvas = this.stage.platform.getDrawingCanvas();\n    return function (cb) {\n      var ctx = canvas.getContext('2d');\n      canvas.width = w;\n      canvas.height = h;\n      ctx.fillStyle = color;\n      ctx.strokeStyle = ctx.fillStyle;\n      ctx.lineWidth = 2;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n      const p = ctx.lineWidth / 2;\n      ctx.beginPath();\n\n      if (direction === 'right') {\n        ctx.moveTo(p, p);\n        ctx.lineTo(p, h - p);\n        ctx.lineTo(w - p, h / 2);\n      } else if (direction === 'down') {\n        ctx.moveTo(p, p);\n        ctx.lineTo(w - p, p);\n        ctx.lineTo(w / 2, h - p);\n      } else {\n        // default is left arrow\n        ctx.moveTo(p, h / 2);\n        ctx.lineTo(w - p, p);\n        ctx.lineTo(w - p, h - p);\n      }\n      ctx.closePath();\n      ctx.stroke();\n      ctx.fill();\n\n      cb(null, { source: canvas, w, h, direction });\n    };\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nexport default class Line extends lng.Texture {\n  constructor(stage) {\n    super(stage);\n\n    this._w = 0;\n    this._h = 0;\n    this._rounded = false;\n  }\n\n  get w() {\n    return this._w;\n  }\n\n  set w(l) {\n    this._w = l;\n    this._changed();\n  }\n\n  get h() {\n    return this._h;\n  }\n\n  set h(l) {\n    this._h = l;\n    this._changed();\n  }\n\n  get rounded() {\n    return this._rounded;\n  }\n\n  set rounded(rounded) {\n    this._rounded = rounded;\n    this._changed();\n  }\n\n  _getLookupId() {\n    return `__line_${this._w}x${this._h}${this._rounded ? '_rounded' : ''}`;\n  }\n\n  _getSourceLoader() {\n    // We need to scope these to protect them from modifications while loading (which may be async).\n    const w = this._w;\n    const h = this._h;\n    const rounded = this._rounded;\n\n    var canvas = this.stage.platform.getDrawingCanvas();\n    return function (cb) {\n      var ctx = canvas.getContext('2d');\n      canvas.width = w;\n      canvas.height = h;\n      ctx.lineWidth = h;\n\n      if (rounded) {\n        ctx.lineCap = 'round';\n      }\n\n      ctx.strokeStyle = 'white';\n      ctx.beginPath();\n      ctx.moveTo(rounded ? 2 : 0, h / 2);\n      ctx.lineTo(rounded ? w - 2 : w, h / 2);\n      ctx.stroke();\n\n      cb(null, { source: canvas, w, h, rounded });\n    };\n  }\n}\n","import Button from '../../components/Button/Button';\n\nexport default class SignalButton extends Button {\n  onEnter() {\n    this.signal(this.signalName);\n  }\n  set signalName(signalName) {\n    this._signalName = signalName;\n  }\n  get signalName() {\n    return this._signalName;\n  }\n}\n"],"names":["Logger","constructor","this","_logCallback","undefined","_prefix","_debug","debug","value","Boolean","logCallback","warn","concat","log","_len","arguments","length","args","Array","_key","level","payload","console","info","_len2","_key2","_len3","_key3","error","_len4","_key4","loggerInstance","debounce","func","wait","immediate","timeout","context","timestamp","result","later","last","Date","now","setTimeout","apply","debounced","callNow","clear","clearTimeout","flush","getEuclideanDistance","xA","yA","xB","yB","xDiff","yDiff","Math","sqrt","pow","getShortestDistance","coordinate","element","core","getAbsoluteCoords","distanceToStart","distanceToMiddle","w","h","distanceToEnd","min","isComponentOnScreen","component","offsets","renderContext","px","py","_scissor","scissor","stageH","stage","getRenderPrecision","stageW","finalX","finalY","relativeOffsetX","x","relativeOffsetY","y","offsetX","offsetY","transition","targetValue","wVis","hVis","leftBounds","topBounds","clipWidth","clipHeight","withinLeftClippingBounds","round","withinRightClippingBounds","withinTopClippingBounds","withinBottomClippingBounds","getWidthByUpCount","theme","upCount","screenW","layout","columnCount","marginX","gutterX","columnWidth","columnGapTotal","totalColumnsWidth","getWidthByColumnSpan","columnSpan","getDimensions","obj","fallback","ratioX","ratioY","fallbackW","fallbackH","dimensions","getItemRatioDimensions","_objectSpread","getAspectRatioW","ratio","seperator","ratioW","ratioH","split","getAspectRatioH","getHexColor","hex","alpha","toString","slice","replace","hexAlpha","str","Number","getValidColor","color","test","substr","parseInt","indexOf","rgba2argb","rgba","lng","StageUtils","getArgbNumber","simplifyFraction","_ref","numerator","denominator","i","reduceFraction","string","map","n","join","getValFromObjPath","object","path","filter","key","reduce","dive","rgbaStr","capitalizeFirstLetter","charAt","toUpperCase","RoundRect","getWidth","options","padding","paddingLeft","paddingRight","strokeWidth","getHeight","paddingBottom","paddingTop","clone","target","_clone","Object","create","getPrototypeOf","defineProperties","getOwnPropertyDescriptors","hasOwnProperty","getMergeValue","targetVal","objectVal","targetValType","objectValType","isArray","measureTextWidth","text","canvas","document","createElement","ctx","getContext","fontStyle","fontWeight","fontSize","fontFamily","fontFace","fontCss","font","textMetrics","measureText","width","getFirstNumber","_len5","numbers","_key5","find","isFinite","getDimension","prop","isRunning","renderProp","getX","getY","getW","getH","flatten","arr","flat","toFlatten","objectPropertyOf","stringifyCompare","objA","objB","JSON","stringify","delayForAnimation","callback","delay","downloadFile","content","fileName","contentType","validContentTypes","includes","dataStr","encodeURIComponent","dlAnchorElem","setAttribute","click","degreesToRadians","deg","PI","MARKUP_STRING_PATTERN","isMarkupString","parseInlineContent","iconRegEx","badgeRegEx","newlineRegEx","textRegEx","splitStr","forEach","item","formattedItem","badge","exec","icon","newline","title","style","push","max","from","arg","isNaN","createConditionalZContext","zOffset","zIndex","forceZIndexContext","watchForUpdates","_ref2","_element$__core","watchProps","sideEffect","isElement","logger","initialOnAfterUpdate","__core","_onAfterUpdate","onAfterUpdate","hasChanged","prevValueKey","nextValue","bind","convertTextAlignToFlexJustify","align","getMaxRoundRadius","radius","height","offset","maxRadius","r","utils","utils$1","Metrics","_keyMetricsCallback","keyMetricsCallback","metricsInstance","eventEmitterInstance","EventEmitter","events","baseTheme","name","primary","secondary","tertiary","inactive","full","none","alpha1","alpha2","alpha3","alpha4","alpha5","animation","duration","xfast","fast","normal","slow","xslow","expressive","timingFunction","expressiveEntrance","expressiveExit","standard","standardEntrance","standardExit","utility","utilityEntrance","utilityExit","asset","arrowLeft","arrowRight","backspaceOutline","check","white","black","grey","red","orange","yellow","green","blue","purple","palette","material","materialBrand","overlay","textNeutral","textNeutralSecondary","textNeutralTertiary","textNeutralDisabled","textInverse","textInverseSecondary","textInverseTertiary","textInverseDisabled","textBrand","textBrandSecondary","textBrandTertiary","textBrandDisabled","textPositive","textNegative","textInfo","textCaution","fillTransparent","fillNeutral","fillNeutralSecondary","fillNeutralTertiary","fillNeutralDisabled","fillInverse","fillInverseSecondary","fillInverseTertiary","fillInverseDisabled","fillBrand","fillBrandSecondary","fillBrandTertiary","fillBrandDisabled","fillPositive","fillNegative","fillInfo","fillCaution","strokeNeutral","strokeNeutralSecondary","strokeNeutralTertiary","strokeNeutralDisabled","strokeInverse","strokeInverseSecondary","strokeInverseTertiary","strokeInverseDisabled","strokeBrand","strokeBrandSecondary","strokeBrandTertiary","strokeBrandDisabled","strokePositive","strokeNegative","strokeInfo","strokeCaution","interactiveNeutral","interactiveNeutralFocus","interactiveNeutralFocusSoft","interactiveInverse","interactiveInverseFocus","interactiveInverseFocusSoft","interactiveBrand","interactiveBrandFocus","interactiveBrandFocusSoft","shadowNeutral","shadowNeutralFocus","shadowNeutralFocusSoft","shadowNeutralText","shadowInverse","shadowInverseFocus","shadowInverseFocusSoft","shadowInverseText","shadowBrand","shadowBrandFocus","shadowBrandFocusSoft","shadowBrandText","componentConfig","Keyboard","keyProps","delete","focusScale","gutterY","marginY","safe","screenH","xs","sm","md","lg","xl","spacer","xxs","xxl","xxxl","stroke","typography","display1","lineHeight","verticalAlign","textBaseline","display2","headline1","headline2","headline3","body1","body2","body3","button1","button2","callout1","caption1","tag1","footnote1","customFontFaces","fontLoader","fonts","promises","_loop","family","src","descriptors","fontSrc","url","FontFace","add","Promise","resolve","load","then","catch","err","Error","message","all","fontsLoaded","loaded","failed","cleanupFonts","_ref3","_asyncToGenerator","_x","THEME_KEY_REPLACER","merge","objArray","base64Cache","isSubTheme","themeName","getMimeTypeFromDataUri","dataUri","matches","match","checkBase64EncodedImage","regex","isImage","mimeType","base64ToBlobURL","base64String","byteCharacters","atob","substring","byteArrays","byteNumbers","charCodeAt","byteArray","Uint8Array","blob","Blob","type","blobURL","URL","createObjectURL","ThemeManager","_cache","Map","window","LUI","themeManagerInstances","themeManager","_setCache","_ref4","set","_deleteCache","_ref5","_emit","_ref6","emit","getTheme","has","get","_processTheme","call","setTheme","themeConfig","_this","_clearCache","extensions","_loadFonts","_refreshSubThemes","getSubTheme","subThemeName","setSubTheme","_arguments","_this2","triggerUpdate","keys","globalTheme","subTheme","original","cache","updateSubTheme","fontArray","updateTheme","_this3","currentTheme","image","revokeObjectURL","_arguments2","_this4","removeSubTheme","_getComponentUUID","id","themeArray","themeFunctions","themeString","originalValue","replacement","k","targetComponent","themeValue","validColor","parse","themeManagerInstance","Context","metrics","on","off","_len6","_key6","setSubThemes","subThemesObj","setLogCallback","setKeyMetricsCallback","config","configKeys","setMethod","contextInstance","GlobalUpdateManager","_updateThemeSet","Set","_requestUpdateSet","_timeout","_runUpdatesTimeoutHandler","_updateThemeComponent","e","requestUpdate","addUpdateTheme","deleteUpdateTheme","addRequestUpdate","deleteRequestUpdate","hasQueuedRequestFor","updateManager","capital","mergeProps","componentConfigProp","_result","getPropertyDescriptor","_this$__componentConf3","customGetter","_this$__componentConf","_this$__componentConf2","__componentConfigProps","oldValue","changeHandler","newValue","queueRequestUpdate","configurable","enumerable","getAliasPropertyDescriptor","prev","curr","deprecationWarning","withUpdates","Base","_construct","prototype","_withUpdatesInitialized","props","properties","descriptor","defineProperty","aliasProps","aliasProperties","alias","_whenEnabled","_whenEnabledResolver","super","_isAttached","_firstEnable","_readyForUpdates","requestEarlyUpdate","_detach","force","_update","__componentName","logPropTable","table","_propTable","acc","tag","withTags","_withTagsInitialized","tags","withHandleKey","_handleKey","keyEvent","_processEvent","_handleKeyRelease","suffix","keyMap","application","__keymap","keyCode","_invokeKeyPayloadCallback","metricsPayload","withLayout","_previousDimensionData","itemLayout","_itemLayout","v","componentName","_componentName","_originalW","_originalH","_updateItemLayout","_allowUpdate","circle","layoutString","values","calculatedWidth","calculatedHeight","_circleSet","_originalRadius","fireAncestors","getCharacterValue","char","index","sortObject","sortedObj","sort","getCharacterSum","sum","getHash","executeWithContextRecursive","objOrFunction","isPlainObject","RegExp","Function","p","getComponentConfig","_obj$theme","removeEmptyObjects","safeStringify","originalObj","seen","WeakSet","createSharedReferences","seenObjects","process","currentObj","queue","current","shift","cacheKey","getUniqueProperties","defaultProps","TypeError","generatePayload","base","defaultStyle","toneItem","modeItem","tone","mode","_tone$toneItem","_mode$modeItem","findNestedKeys","keyToFind","nestedKeys","searchNestedKeys","searchForKey","generateSolution","_ref7","modeKeys","toneKeys","solution","uniqueModes","uniqueTones","DEFAULT_KEYS","enforceContract","inputObj","fallbackKey","generateComponentStyleSource","styleChain","inlineStyle","componentDefault","_ref8","default","componentConfigDefaultStyle","localDefaultStyle","local","merged","parsedStyles","final","formatStyleObj","colorParser","cleanObj","targetObject","styleObj","processedStyle","_","startsWith","isValidColor","num","generateStyle","componentStyleSource","generateNameFromPrototypeChain","_proto$constructor","proto","trim","styleChainCache","clearStyleChainCache","getStyleChainMemoized","componentObj","getStyleChain","styleMap","_proto","componentConfigStyle","themeStyle","__themeStyle","mixinStyle","__mixinStyle","uniqueStyles","reverse","aliasStyles","formatters","replaceAliasValues","formattersArray","_ref9","skipWarn","search","themeStyleCache","StyleManager","init","isActive","setupListeners","_style","update","_boundThemeUpdate","_onThemeUpdate","_hasSubTheme","_targetSubTheme","clearListeners","destroy","_cleanupCache","_styleCache","clearSourceCache","clearStyleCache","sourceKey","_generateCacheKey","_removeCache","styleKey","_customStyleHash","_addCache","existing","ids","__id","_ref10","removeIndex","_getCache","_this$_getCache","_this$_getCache2","styleSource","_componentLevelStyle","_componentConfig","hasCustomStyle","mergeObjectsWithSecondDominant","firstObj","secondObj","allKeys","withThemeStyles","_withThemeStylesSetupComplete","_hSetByUser","_wSetByUser","_styleManager","_updatePropDefaults","queueThemeUpdate","_setup","_prevComponentConfigProps","_attach","_unfocus","_isFocusedMode","_focus","_isDisabledMode","_checkDimensionUpdates","dimensionUpdateRequired","_w","_h","_updateDimensions","_componentStyle","styleConfig","_styleConfig","_this$_componentConfi","_mode","event","_tone","_this$style","_this$style2","SUFFIX","withExtensions","_withExtensionsApplied","_prototypeChain","__prototypeChain","prototypeChain","_extensions","_ref11","extension","_componentExtensions","_ref12","pattern","endsWith","ComponentRegExp","some","_ref13","_extensionApplied","_currentComponentExtensionLength","_appliedExtensionLength","_extendedList","_extensionInstance","_setupExtensionBound","_setupExtension","_calculateComponentExtensionLength","_createExtension","_resetComponent","_extensionCleanup","extensionLength","extensionMixin","ExtendedClass","_createExtensionClass","instance","_createExtensionAliases","_setComponentAliases","ExtensionBase","baseProto","extended","extensionOverrides","extensionClass","FakeClass","originalComponentDescriptors","setPrototypeOf","aliasObj","Component","skipPlinko","centerInParent","_init","_resetLoadedPromise","reject","_resolveLoadedPromise","_rejectLoadedPromise","_updateShouldSmooth","shouldSmooth","applySmooth","ref","patch","smooth","announce","_announce","announceContext","_announceContext","_shouldSmooth","_isUnfocusedMode","isFullyOnScreen","getFocusScale","getUnfocusScale","withMixins","baseComponent","Base$1","gradientTop","neutral","gradientColor","inverse","brand","Gradient","styles","rect","rtt","colorTop","colorBottom","texture","Tools","getRoundRect","animationBlurEntrance","animationBlurExit","animationComponentEntrance","animationGradientEntrance","animationGradientExit","animationImageScaleEntrance","animationImageScaleExit","blur","centerImageRadius","fallbackSrc","fillColor","imageScale","imageScalePivotX","imageScalePivotY","zIndexSet","centerImage","fill","gradient","foreground","checkFileType","createSvg","cb","platform","getDrawingCanvas","imageSmoothingEnabled","img","Image","onload","drawImage","source","onerror","Utils","isPS4","crossOrigin","imageLoader","_ref14","renderInfo","compressed","hasAlpha","removeAttribute","CustomImageTexture","Texture","_src","_hasAlpha","_changed","l","_getIsValid","_getLookupId","_getSourceLoader","getOption","fc","fileType","loadSrcTexture","getNonDefaults","Artwork","_template","_shouldBlur","shouldBur","_blur","_hasCenterImage","_Image","format","_aspectRatioEqual","_componentSrc","_generatePromise","_actualAspectRatio","_supportedAspectRatioHeights","srcCallbackAspectRatios","rw","rh","calcHeight","_closestSupportedAspectRatio","closest","abs","_processedImageSrc","srcCallback","closestAspectRatio","aspectRatio","_gradientPatch","_Gradient","findZContext","_srcCallbackAspectRatios","_setSrc","_getFallbackSrc","_fallbackSrc","resolvePromise","rejectPromise","complete","_resolveLoading","_rejectLoading","parseFloat","finalW","finalH","toFixed","signal","_this5","_updateRadius","_updateGradient","_updateImage","_updateFillColor","_updateForegroundImage","_showComponent","_updateCenterImage","_updateBlur","_updateScale","_handleImageLoadError","shouldScale","pivotX","pivotY","scale","_this6","_foregroundSrc","_ForegroundImage","ForegroundImage","foregroundImagePatch","mount","foregroundWidth","foregroundHeight","once","imageW","getRenderWidth","imageH","getRenderHeight","_Blur","_getTransition","Blur","_srcFailed","amount","getTexture","components","FastBlurComponent","_updateFormatContain","_updateFormatSquareCircle","_CenterImage","CenterImage","_this7","resizeMode","imageSize","shader","shaders","RoundedRectangle","_createGradient","_this8","FillColor","Icon","fixed","_notify","_handleTxtError","_getColor","_color","_icon","_iconPatch","isSvgTag","isSvgURI","svgTag","svgURI","getSvgTexture","colorUl","colorUr","colorBl","colorBr","contentSpacing","paddingX","paddingY","textStyle","textAlign","backgroundColor","iconColor","textColor","strokeColor","Badge","Text","mountY","signals","itemChanged","_Text","_updateLayout","_updateText","_updateIcon","_updateVisibility","_updateWidth","_updateBackground","_updatePositions","renderHeight","_Icon","iconWidth","iconHeight","renderWidth","iconAlign","_getIconHeight","justify","minWidth","paddingXNoTitle","itemSpacing","maxLines","contentColor","focused","disabled","FocusManager","_selectedIndex","_itemPosX","_itemPosY","direction","_checkSkipFocus","Items","_Items","_setDirection","state","column","row","_setState","_getItems","children","items","_resetItems","appendItems","itemPosX","itemPosY","childList","_lazyItems","_appendLazyItem","a","_refocus","appendItemsAt","idx","addIndex","isInteger","_lastAppendedIdx","itemIdx","addAt","parentFocus","hasFocus","selectedIndex","prependItems","removeItemAt","removeAt","initialSelection","skipFocus","selectNext","selected","prevSelected","_selectedChange","_render","_firstFocusableIndex","firstItem","originalIdx","_lastFocusableIndex","lastItem","pop","selectPrevious","hasFocusable","wrapSelected","previousItemIndex","lastIndexOf","shouldSmoothOverride","splice","nextIndex","findIndex","_getIndexOfItemNear","prevItem","itemX","itemY","prevMiddle","selectedCoordArray","distance","b","_getFocused","focusRef","cparent","_updateTransitionTarget","property","updateTargetValue","onScreenItems","child","_isOnScreen","_isOnScreenCompletely","fullyOnScreenItems","rv","_isComponentHorizontallyVisible","transitionX","getTransitionXTargetValue","withinLeftStageBounds","withinRightStageBounds","_isComponentVerticallyVisible","transitionY","getTransitionYTargetValue","withinTopStageBounds","withingBottomStageBounds","_states","None","Row","_handleLeft","onLeft","_handleRight","onRight","Column","_handleUp","onUp","_handleDown","onDown","alwaysScroll","itemTransition","neverScroll","scrollIndex","directionPropNames","axis","crossAxis","lengthDimension","crossDimension","innerLengthDimension","innerCrossDimension","NavigationManager","_lazyUpCountBuffer","_directionPropNames","_initComponentSize","_transitionListener","parent","nextPosition","maxCrossDimensionSize","maxInnerCrossDimensionSize","childrenToCenter","loadingChildren","updateDidRun","childCrossDimensionSize","_calcCrossDimensionSize","waitForDimensions","updatePositionOnAxis","extraItemSpacing","childIdx","_totalAddedWidth","_autoResize","_centerItemsInParent","_updateLastScrollIndex","_performRender","sizes","crossDimensionSize","_ref15","autoResizeWidth","autoResizeHeight","_lastScrollIndex","itemPos","_isRow","scrollOffset","lastChild","endOfLastChild","_calcAxisPosition","lastScrollIndex","childPosition","canScrollToChild","comp","_isColumn","transitionDone","_withAfterUpdate","_appendItem","itemCrossSize","appended","$itemChanged","lazyUpCount","lazyUpCountBuffer","addAtIdx","_totalAddedLength","newItem","itemLength","_selectedPastAdded","position","scrollTo","shouldScrollLeft","_canScrollBack","shouldScrollRight","_canScrollNext","shouldScrollUp","shouldScrollDown","shouldScroll","_prevLastScrollIndex","itemsStartCoord","_itemsX","_itemsY","endOfItemsPosition","_getAlwaysScroll","_alwaysScroll","_getNeverScroll","_neverScroll","_setScrollIndex","_getScrollIndex","_scrollIndex","_setLazyUpCountBuffer","buffer","_this$parent","focusmanager","_isOnScreenForScrolling","itemsTransitionX","rowX","xModifier","_shouldScroll","prevIndex","getIndex","lazyScroll","startLazyScrollIndex","stopLazyScrollIndex","isCompletelyOnScreen","_getPrependedOffset","_getLazyScrollX","_getScrollX","currItemsX","prevX","itemsContainerX","selectedX","itemIndex","next","plinko","onScreenEffect","_getLazyScroll","_lazyScroll","Surface","Background","innerH","innerW","_radius","_Background","textY","marginBottom","strikethroughRatio","strikethroughColor","isText","isIcon","isBadge","InlineContent","_maxLinesSuffix","_updateContent","_waitForComponentLoad","_shouldTruncate","_parsedContent","flex","wrap","contentWrap","justifyContent","isLast","flexItem","contentProperties","_marginBottom","marginRight","nextItem","_createText","_createIcon","_createBadge","finally","_contentLoaded","_notifyAncestors","multiLineHeight","_layout","_lineLayouter","_lines","totalHeight","line","entries","startIndex","endIndex","_renderMaxLines","childrenDimensions","_calcChildrenDimensions","renderedLastElement","nextChild","isOnLastLine","isLastBeforeMaxLines","canRenderLastWithSuffix","hasSpaceForSuffix","isLastWithSpaceForSuffix","_addSuffix","suffixW","maxLinesSuffix","contentEndX","isNewLineElement","data","ceil","_ref16","negatedRightMargin","marginLeft","iconProps","textHeight","textOverrideStyles","customStyleMappings","textComponent","textDecoration","textWidth","strikethroughLine","badgeY","badgeProperties","loadedBadge","_updateIconPosition","_loadedBadge","_formatSpaces","parsedContent","whitespace","parsed","formattedWords","word","_setContent","_content","_setBadgeProperties","_getBadgeProperties","_badgeProperties","_setContentProperties","_getContentProperties","_contentProperties","_setCustomStyleMappings","_getCustomStyleMappings","_customStyleMappings","_setMaxLines","floor","_item$style","fadeWidth","FadeShader","WebGLDefaultShader","_margin","left","right","positionLeft","_positionLeft","positionRight","_positionRight","setupUniforms","operation","owner","shaderOwner","renderPrecision","_setUniform","gl","uniform1fv","Float32Array","uniform2fv","fragmentShaderSource","Marquee","ContentClipper","boundsMargin","ContentBox","Content","ContentLoopTexture","_scrolling","_autoStart","_centerAlign","_Content","_updateContentTexture","restartScrolling","_restartScrolling","stopScrolling","_currentTexture","_ContentClipper","_shouldClip","_updateShader","_positionTexture","startScrolling","_updateColor","_updateTexture","autoStart","_shouldTryScrolling","contentTexture","textContent","_updateAnimation","_scrollAnimation","stopNow","_loopWidth","repeat","actions","t","_shouldCenter","_textRenderedW","_ContentBox","_ContentLoopTexture","start","_setAutoStart","_setCenterAlign","center","_ref17","_this$title$text","_this$title","overrideLoopX","lightningTextDefaults","textures","TextTexture","_ref18","TextBox","_setDimensions","_isInlineContent","sizeChanged","hideOnLoad","_marqueeContentListenerAttached","_marqueeOverrideLoopX","_resetMarqueePromise","_InlineContent","_updateMarquee","_updateInlineContent","inlineContentPatch","_textStyleSet","wordWrapWidth","loadedInlineContent","marqueeOverrideLoopX","_Marquee","_resolveAwaitMarqueeOverrideX","_awaitMarqueeOverrideX","_rejectAwaitMarqueeOverrideX","_loadedMarqueeContent","marquee","_toggleMarquee","_contentTag","marqueePatch","marqueeProps","marqueeContentLoaded","_getMarqueeProps","_this$_marqueeProps","_marqueeProps","contentTag","toggleMarquee","Button","_updatePrefix","_updateTitle","_updateSuffix","_updateAllPositioning","_updateTruncation","_updateContentDimensions","_updateSurfaceDimensions","_updateContentPosition","_onTitleTextBoxChanged","_hasPrefix","_Prefix","_prefixX","_hasTitle","_TextWrapper","_titleX","_hasSuffix","_Suffix","_suffixX","prefixString","prefix","prefixPatch","_rowProps","Prefix","_updatePrefixSuffixStyles","_prevPrefix","prevProp","_prevSuffix","propString","_addButtonProps","titlePatch","_Title","textBoxChanged","TextWrapper","Title","suffixPatch","Suffix","wordWrap","_fixedWordWrapWidth","contentDimensionsPatch","_contentW","_contentProps","newWidth","_calcDynamicWidth","visible","_paddingX","_buttonProps","_getJustify","_justify","mountX","_paddingLeft","_paddingRight","_prefixW","_titleW","_suffixW","_totalTitlePaddingX","totalTitlePadding","nonTextSpace","_announceComponentName","ButtonSmall","paddingHorizontal","paddingVertical","titleTextStyle","Card","_updateTitlePosition","_calculateTextWidth","descriptionTextStyle","detailsTextStyle","CardTitle","Description","Details","_updateDescription","_updateDetails","_updateDescriptionPosition","_updateDetailsPosition","_Description","description","_Details","details","subtitleTextStyle","size","knobHeight","knobWidth","backgroundColorChecked","knobColor","Radio","Body","Knob","Stroke","_updateBody","_updateStroke","_updateKnob","_checkedChanged","_updateOpacity","bodyColor","checked","_Body","_Stroke","_Knob","_setChecked","_checked","toggle","_handleEnter","onEnter","RadioSmall","CardRadio","Subtitle","_updateRadio","_updateSubtitle","_updateSubtitlePosition","_Subtitle","subtitle","radioPatch","radio","_Radio","CardSection","iconObject","iconSrc","checkColor","Checkbox","Check","_updateCheck","_Check","alphaPatch","Label","withMarqueeSync","_shouldSync","_updateSignals","_cleanupSyncValues","syncArray","willMarquee","_willMarquee","compRef","_longestMarqueeWidth","marqueeSync","logoWidth","logoHeight","logoPadding","MetadataBase","DetailsWrapper","_titleLoaded","_subtitleLoaded","_detailsLoaded","_ref19","_updateDetailsLayout","_descriptionLoaded","_ref20","_DetailsWrapper","_updateLines","_textW","_textH","_updateMetadataHeight","_updateLogo","logo","logoPosition","newH","resetMarquee","_Logo","Logo","subtitleH","titleH","detailsH","descriptionH","_getLogoWidth","_logoWidth","_setLogoWidth","_getLogoHeight","_logoHeight","_setLogoHeight","logoTitle","MetadataBase$1","MetadataTile","_ref21","barColor","progressColor","ProgressBar","Bar","Progress","_progress","_updateTextures","_updateProgress","_progressChanged","_getProgressWidth","_Bar","_Progress","_setProgress","progress","animationEntrance","animationExit","metadataLocation","paddingYProgress","paddingYBetweenContent","Tile","imageLoaded","_Metadata","_Badge","_Label","_ProgressBar","_updateTileColor","_updateArtwork","_updateBadge","_updateLabel","_updateCheckbox","_updateProgressBar","_updateMetadata","_getRenderHeight","_this$_Metadata","_isInsetMetadata","_shouldShowGradient","_this$progressBar","_hasMetadata","_shouldShowMetadata","progressBar","_shouldShowLogo","_isCircleLayout","_foregroundDefaultWidth","_Tile","itemContainerPatch","logoObject","_calculateLogoYPosition","_metadataY","_progressBarY","persistentMetadata","_this$style3","_this$artwork","_Artwork","artwork","_getSrc","_imageLoaded","_this$badge","badgePatch","_shouldShowBadgeLabel","_badgeLabelTransitions","_this$label","label","labelPatch","loadedLabel","_this$checkbox","checkbox","_Checkbox","checkboxPatch","_targetValue","_this$progressBar2","_removeProgressBar","progressPatch","_metadataTransitions","_metadataAlpha","metadata","_metadataPatch","_nonSmoothingMetadataPatch","_getMetadataLocation","_this$_metadataLocati","_metadataLocation","Metadata","updateComponentDimensions","_animateMetadata","_resetMarqueeAnimation","_metadataLoaded","alphaTransition","counterTextStyle","itemSize","counterBackgroundColor","Provider","providersHidden","providers","_visibleCount","_providers","_updateProviders","_updateCounter","providerList","visibleCount","provider","disableRadius","_Row","remaining","counter","counterText","_getVisibleCount","descriptionDetailsStyle","MetadataCardContent","DescriptionDetails","DetailsFader","providerChanged","_setDetails","_detailsPromise","_detailsPromiseResolver","_setProvider","_providerPromise","_providerPromiseResolver","_this9","_updateProvider","_updateDescriptionDetails","_DescriptionDetails","descriptionDetails","descriptionDetailsTextStyle","maxWidth","_detailsMaxW","_DetailsFader","_resolveDetails","_Provider","_resolveProvider","_providerH","_providerW","expandedWidth","expandedHeight","CardContent","_updateSize","_updateTile","_tile","tileRadius","_collapse","_orientation","tile","_shouldShowTile","metadataPatch","_metadataPosition","_metadataDimensions","marqueeOnFocus","_collapseW","_collapseH","orientation","collapseToMetadata","shouldCollapse","CardContentHorizontal","CardContentHorizontalLarge","CardContentVertical","CardContentVerticalSmall","_setMetadata","CheckboxSmall","itemsTransitionY","columnY","yModifier","_getScrollY","itemsContainerY","prevPlinko","checkSkipPlinko","up","prevItems","endOfMultiSkipPlinkos","prevPlinkoIndex","$removeItem","wasSelected","remove","$columnChanged","logoRadius","iconStyle","logoStyle","prefixPadding","Control","_updatePrefixStyle","_updateCollapseStatus","_updatePrefixObj","_patchTitle","leftOverSpace","middle","_setPrefix","_setSuffix","_setIcon","_setLogo","parentStyle","ControlStyle","radiusOffset","ControlSmall","titleMarginBottom","titleMarginLeft","TitleRow","_updateRow","_autoResizeHeight","_titleFirstLoadProps","ControlRow","__themeStyles","selectedChange","_leftControls","_contentItems","_rightControls","_lastLeftControlIndex","_lastItemIndex","_lazyLoadBuffer","itemsToAppend","leftControls","_withExtraSpacing","contentItems","rightControls","isControl","itemsCopy","_prevLeftControls","_prevItems","_getMoreItems","lazyLoadBuffer","loadMoreIndex","loadMoreItems","_appendItemsAt","appendIndex","removeSpacingIndex","addContentItems","lastSelected","itemsToAdd","_createContentItems","addContentItemsAt","removeContentItemAt","addLeftControls","controls","_createControls","addLeftControlsAt","removeLeftControlAt","addRightControls","addRightControlsAt","removeRightControlAt","controlProps","backgroundType","newContentItems","itemProps","_setLeftControls","_getLeftControls","_setRightControls","_getRightControls","_getContentItems","_setContentItems","_getLeftControlItems","_getContentItemItems","_getRightControlItems","leftSiblingIndex","propertyTextStyle","valueTextStyle","Spacer","Line","_lineThickness","TickLeft","_tick","TickRight","_tickLength","_Line","_TickRight","lineColor","_TickLeft","rotation","vertical","GridOverlay","textRow","Property","Value","Columns","Margins","Horizontal","Left","spacerLoaded","Right","Vertical","Top","Safe","Bottom","Gutters","TextPanel","ScreenW","ScreenH","ColumnCount","MarginX","MarginY","GutterX","GutterY","_showColumns","_showMargins","_showSafe","_showGutters","_showText","_updateGlobalThemeProps","_updateMargins","_updateSafe","_updateColumns","_updateGutters","_Columns","showColumns","_Margins","showMargins","_Safe","showSafe","_Gutters","showGutters","_TextPanel","showText","_screenW","_screenH","_columnCount","_marginX","_marginY","_safe","_gutterX","_gutterY","_columnColor","_marginColor","_safeColor","_gutterColor","marginPatch","marginHorizontalPatch","_MarginHorizontal","_MarginLeft","_MarginRight","marginVerticalPatch","_MarginVertical","_MarginTop","safePatch","_SafeHorizontal","_SafeLeft","_SafeRight","_SafeVertical","_SafeTop","_SafeBottom","_columnRects","gutterPatch","_GutterHorizontal","_updatePropertyTextStyle","textPanelName","_updateValueTextStyle","val","_TextScreenW","_TextScreenH","_TextColumnCount","_TextMarginX","_TextMarginY","_TextGutterX","_TextGutterY","_TextSafe","cursorStyle","blink","eyebrowTextStyle","helpTextStyle","Input","Eyebrow","HelpText","_title","actualTitle","_fixed","_updateTextWrapper","_updateHiddenContent","_updateCursorPosition","_updateTitleScrollPosition","_onHiddenTextBoxChanged","_updatePassword","_updateEyebrow","_updateHelpText","_updateCursor","_updateCursorListening","_updateCursorBlink","password","mask","_Eyebrow","eyebrow","_HelpText","helpText","clipping","_visibleContentWidth","_HiddenContent","HiddenContent","textBeforeCursor","_Cursor","Cursor","cursorBlink","isPlaying","isCursorActive","stop","_isOverflow","suffixX","listening","insert","backspace","moveLeft","moveRight","baseWidth","isUpperCase","isAlphaChar","alphaNato","c","d","f","g","j","m","o","q","s","u","z","getNato","toLowerCase","Key","_size","_keySpacing","sizeMultiplier","baseSize","keySpacing","keyId","inputSpacing","inputStyle","capitalize","_setShouldUpdateThemeBound","_setShouldUpdateTheme","shouldUpdateTheme","_currentKeyboard","_currentFormat","_shouldUpdateKeyboards","defaultFormat","centerKeyboard","centeredXPos","_createKeyboardsFromFormats","_formatKeys","formats","keyboardData","_formatKeyboardData","_createKeyboard","_createRows","_formatsChanged","rows","keyboard","_this$_currentKeyboar","centerKeys","rowWrap","_createKeys","keyComponent","_this$style$keyProps","_this$style$keyProps2","keyName","keyOverrides","keyPatch","inline","keyRows","$toggleKeyboard","nextKeyboard","nextKeyboardTag","selectKeyOn","getSelectedKey","_setFormats","_defaultFormat","rowCount","KeyboardEmail","emailFormat","uppercase","lowercase","accents","accentsUpper","symbols","KeyboardFullScreen","fullscreenFormat","letters","KeyboardNumbers","numbersFormat","dialpad","dialpadExtended","KeyboardQwerty","qwertyFormat","KeyboardInput","Wrapper","passSignals","keyboardWidthChanged","_Wrapper","_updateKeyboardType","_updateInput","_updateKeyboard","_updateCenterKeyboard","_Keyboard","keyboardType","_Input","input","$onSoftKey","_ref22","$keyboardFocused","focus","KeyboardSearch","searchFormat","circleColor","ListItem","_onTextBoxChanged","_updatePrefixLogo","_updateSuffixLogo","_hasDescription","descriptionPatch","_hasPrefixLogo","_addLogoProps","_prefixLogo","_hasSuffixLogo","_suffix","_suffixLogo","prefixLogo","suffixLogo","base$c","showArrows","showKnob","mode$4","arrowColor","arrowAlphaValue","arrowAlphaValueLimit","arrowHeight","arrowSpacing","arrowWidth","containerHeight","iconLeftSrc","iconRightSrc","circleAnimation","mode$3","Slider","Container","SliderBar","Circle","LeftArrow","RightArrow","_min","_max","_step","_value","_vertical","_updateDirection","_updateSliderLayout","_updateArrowAlpha","_updateArrows","_valueChanged","_checkAndSignalSizeChange","_decrementValue","_incrementValue","_Container","_calculatedSliderX","_calculatedSliderWidth","prevH","prevW","prevRotation","_updateSliderProgress","_updateCirclePosition","step","_SliderBar","xCirclePosition","_Circle","leftAlpha","rightAlpha","offAlpha","alphaLimit","_LeftArrow","_RightArrow","arrowProps","totalArrowSize","_circleW","_setVertical","_setValue","_setMin","_setMax","VerticalSlider","NestedSlider","ListItemSlider","template","onChange","_updateSliderPosition","_updateValue","_Value","_hasValue","valuePatch","sliderProps","slider","_Slider","titleWrapWidth","_onSliderChanged","ListItemPicker","_alignPicker","_options","_updatePicker","_updateArrowsAlpha","_updateAlignment","_Picker","Picker","option","centerAlign","wordWrapWidthFocused","selectedOption","MetadataCard","fadeHeight","scroll","contentMarginTop","contentMarginLeft","sliderMarginLeft","scrollWrapperBase","ScrollSlider","ScrollWrapper","FadeContainer","ScrollContainer","onSizeChange","_scrollStep","_shouldWrap","_flexDirection","_fadeContent","_sliderWidth","_afterTextBoxUpdate","textBox","_prevW","_prevH","_updateScrollWrapperLayout","_updateAlpha","_resetFlexContainer","_FadeContainer","_contentChanged","_updateAutoScroll","_updateScrollContainer","resetScroll","_setupAutoScroll","_ScrollContainer","_contentWidth","_updateFadeContainer","_updateSlider","showScrollBar","isScrollable","shouldFade","fadeContent","_isEndContentVisible","FadeOut","bottom","_scrollContainerLoaded","_ref23","ScrollableText","flexDirection","shouldWrap","_scrollDown","hasContentToScrollTo","_scrollContainerY","targetY","scrollStep","canScrollByStepLength","scrollEndY","hasScrolledToEnd","_autoScrollComplete","_scrollUp","canScrollUp","finish","_transitions","_setAutoScroll","_autoScroll","_startAutoScroll","_performAutoScrollTimer","autoScroll","_performAutoScroll","autoScrollDelay","autoScrollSpeed","enabled","_updateScrollContainerSize","scrollHeight","contentScrollSteps","sliderMax","sliderStep","scrollDuration","spread","maxOffsetY","maxOffsetX","Shadow","_updateFocusStyle","_Shadow","shadowSize","holepunchError","extraBoundsY","extraBoundsX","Frame","maskShadow","Hole","getShadowRect","SliderLarge","ContentSwitcher","_updateSelected","_preveSelectedIndex","prevContent","_hasContent","_fadeInContent","_selectedContent","allContent","tagName","componentLoader","_loadAsyncComponent","tabSpacing","tabsMarginBottom","TabBar","Tabs","TabContent","contentHeightChange","_tabContent","_isTabsFocused","_selectedTabChange","_updateTabsLayout","_updateTabs","_updateTabContent","_updateTabBarHeight","defaultLayout","tabsRowPatch","patchObj","_Tabs","tab","isSelectedTab","retainSelection","alphaSelectedTab","_updateTabAlphas","margin","_TabContent","collapse","_expandedHeight","_collapsedHeight","selectTabs","resetTabs","_setTabs","tabs","tabContent","_getTabs","reset","iconSize","iconMarginRight","Tab","_updateTabSize","iconPatch","textPatch","_iconW","_iconH","knobSize","knobPadding","knobRadius","knobColorChecked","Toggle","_updateKnobPosition","_updateColors","_updateContainer","currentKnobColor","containerColor","strokeRadius","ToggleSmall","Bubble","_pointerWidth","_pointerHeight","_strokeWidth","pointerWidth","pointerHeight","getRgbaString","createBubble","_ref24","fillStyle","strokeStyle","lineWidth","lineCap","lineJoin","initialCoord","leftX","rightX","topY","bottomY","bottomBubbleY","isRadiusAnArray","beginPath","moveTo","lineTo","arcTo","Tooltip","_textLoaded","_updateBackgroundHeight","_updateTextPosition","backgroundH","backgroundW","_clearTimers","_hideTimer","_showTimer","_transitionIn","delayVisible","timeVisible","_transitionOut","pools","pool","_ref25","index$2","flattenStrings","series","flattenedSeries","pause","speak","phrase","utterances","lang","synth","speechSynthesis","utterance","SpeechSynthesisUtterance","onend","speakSeries","root","remainingPhrases","nestedSeriesResults","active","seriesChain","totalRetries","retriesLeft","SpeechSynthesisErrorEvent","seriesResult","append","toSpeak","cancel","currentSeries","Speech","defaultAbbreviations","replacer","p1","p2","p3","p4","defaultAbbrevConfig","generateAbbrevConfig","wrapWithBoundary","getNumberOfCaptureGroups","regExp","abbreviations","extendDefault","abbrev","stringPatternMap","regExpPatternMap","abbreviationsPattern","patternGroupOffset","_ref27","stringPattern","patternMapIdx","translateAbbrev","translationConfig","translated","matched","_len7","_key7","patternIdx","fiveMinutes","elmName","elm","defaultOptions","voiceOutDelay","abbreviationsConfig","withAnnouncer","announcerOptions","_announceEndedTimeout","_currentlySpeaking","_voiceOut","toAnnounce","_voiceOutDisabled","speech","language","toAnnounceStr","toAnnounceWords","timeoutDelay","_build","_debounceAnnounceFocusChanges","_announceFocusChanges","announcerFocusDebounce","announcerTimeout","_resetFocusTimer","_lastFocusPath","_focusChange","_disable","announcerEnabled","_announcerEnabled","$announcerCancel","focusPath","lastFocusPath","every","loading","focusDiff","focusDiffHook","txt","$announce","notification","$announcerRefresh","depth","index$1","classImp","classWithNewBase","withSelections","defaultOpts","captureKey","defaultIndex","eventName","currentSelected","currentSelectedIndex","isSelected","setSelected","_captureKey","isEditing","toggleEdit","_swapItemArrayPos","array","previous","_getPositionValue","_waitForTransition","_this10","currentItem","previousIndex","oldPos","newPos","previousCurrentItemZIndex","setSmooth","_this10$Items$childre","rad","getBreakpoints","C","A","asin","sin","B","points","degrees","breakAngles","breakIndex","angle","x0","y0","x1","y1","LinearGradient","_steps","_degrees","steps","count","createLinearGradient","addColorStop","percent","closePath","fillRect","_fill","_stroke","_strokeColor","dimension","arc","Arrow","_direction","_rounded","rounded","SignalButton","signalName","_signalName"],"mappings":"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hhBY,MAAM8vC,2BAA2B/uD;IAC9C,0BAAWkO;QACT,OAAO;AACR;IAED,uBAAWuI;QACT,OAAO0J;AACR;IAEDrT,UAAAA;QACEY,MAAMZ;QACNhoB,KAAK8nE,UAAU9nE,KAAKkqE;AACrB;IAED,oBAAIA;QACF,OAAO;YACLC,SAAS,EACP,EACE,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA;gBACEn5D,OAAO;gBACPi2C,MAAM;gBACNqB,QAAQ;gBACRnuB,UAAU;gBACV4sC,OAAO;eAET;gBACE/1D,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;eAEZ;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;eAEZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,MAEF,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;YAGJ6vC,SAAS,EACP,EACE,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA;gBACEh5D,OAAO;gBACPi2C,MAAM;gBACNqB,QAAQ;gBACRnuB,UAAU;eAEZ;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;eAEZ;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;eAEZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,MAEF,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBAAEnpB,OAAO;gBAAKmpB,UAAU;eACxB,KACA,KACA,KACA,KACA;gBAAEnpB,OAAO;gBAAKmpB,UAAU;eACxB,KACA,KACA;gBAAEnpB,OAAO;gBAAKmpB,UAAU;eACxB;gBAAEnpB,OAAO;gBAAKmpB,UAAU;eACxB;gBAAEnpB,OAAO;gBAAKmpB,UAAU;eACxB,KACA,KACA,KACA,KACA;;AAIP;;;AC1JY,MAAMiwC,wBAAwBlvD;IAC3C,0BAAWkO;QACT,OAAO;AACR;IAED,uBAAWuI;QACT,OAAO0J;AACR;IAEDrT,UAAAA;QACEY,MAAMZ;QACNhoB,KAAK8nE,UAAU9nE,KAAKqqE;AACrB;IAED,iBAAIA;QACF,OAAO;YACL38D,SAAS,EAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK;YACvD48D,SAAS,EAAC,EAAC,KAAK,KAAK,OAAM,EAAC,KAAK,KAAK,OAAM,EAAC,KAAK,KAAK,OAAM,EAAC;YAC9DC,iBAAiB,EACf,EAAC,KAAK,KAAK,OACX,EAAC,KAAK,KAAK,OACX,EAAC,KAAK,KAAK,OACX,EACE,KACA;gBACEv5D,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;;;AAKnB;;;ACjCY,MAAMqwC,uBAAuBtvD;IAC1C,0BAAWkO;QACT,OAAO;AACR;IAED,uBAAWuI;QACT,OAAO0J;AACR;IAEDrT,UAAAA;QACEY,MAAMZ;QACNhoB,KAAK8nE,UAAU9nE,KAAKyqE;AACrB;IAED,gBAAIA;QACF,OAAO;YACLb,WAAW,EACT,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE54D,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;iBAGd,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACNqB,QAAQ;gBACRnuB,UAAU;gBACV4sC,OAAO;iBAGX,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE/1D,OAAO;gBACPi2C,MAAM;gBACNqB,QAAQ;gBACRnuB,UAAU;gBACV4sC,OAAO;iBAGX,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBAAE/1D,OAAO;gBAAKmpB,UAAU;eACxB;gBAAEnpB,OAAO;gBAAKmpB,UAAU;eACxB;gBAAEnpB,OAAO;gBAAKmpB,UAAU;eACxB;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACNqB,QAAQ;gBACRnuB,UAAU;gBACV4sC,OAAO;iBAGX,EACE;gBACE/1D,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;eAEZ;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;eAEZ;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;;YAIhB0vC,WAAW,EACT,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE74D,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;iBAGd,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACNqB,QAAQ;gBACRnuB,UAAU;gBACV4sC,OAAO;iBAGX,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE/1D,OAAO;gBACPi2C,MAAM;gBACNqB,QAAQ;gBACRnuB,UAAU;gBACV4sC,OAAO;iBAGX,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBAAE/1D,OAAO;gBAAKmpB,UAAU;eACxB;gBAAEnpB,OAAO;gBAAKmpB,UAAU;eACxB;gBAAEnpB,OAAO;gBAAKmpB,UAAU;eACxB;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACNqB,QAAQ;gBACRnuB,UAAU;gBACV4sC,OAAO;iBAGX,EACE;gBACE/1D,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;eAEZ;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;eAEZ;gBACEnpB,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;;YAIhB2vC,SAAS,EACP,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE94D,OAAO;gBACPi2C,MAAM;gBACN8f,OAAO;gBACP5sC,UAAU;iBAGd,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACEnpB,OAA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"}